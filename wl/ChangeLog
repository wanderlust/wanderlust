2005-03-25  Yuuichi Teranishi  <teranisi@gohome.org>

	* 2.14.0 is released.

2005-03-21  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-summary.el (wl-summary-rescan-message): Call
	`wl-thread-make-number-list' (A stopgap measure).

2005-03-20  Yoichi NAKAYAMA  <yoichi@geiin.org>

	* wl-fldmgr.el (wl-fldmgr-add): Create folder after testing parent
	group is access or not (it is not strict, like wl-fldmgr-rename).

2005-03-17  Yoichi NAKAYAMA  <yoichi@geiin.org>

	* wl-thread.el (wl-thread-update-line-on-buffer-sub): Avoid
	duplicate call of `wl-summary-print-argument' on the wrong line.

2005-03-17  Hiroya Murata  <lapis-lazuli@pop06.odn.ne.jp>

	* wl-summary.el (wl-summary-jump-to-msg): Don't interactive input
	even if argument `number' is nil.
	(wl-summary-insert-line): Print action argument if current message
	has it.

2005-03-16  Hiroya Murata  <lapis-lazuli@pop06.odn.ne.jp>

	* wl-draft.el (wl-draft-forward): Call `wl-draft' with number.
	(wl-draft-reply): Ditto.
	(wl-draft): Add optional argument `parent-number' and call
	`wl-draft-create-buffer' with it.
	(wl-draft-create-buffer): Add optional argument
	`parent-number'. Set wl-draft-parent-number as it.

2005-03-13  Yoichi NAKAYAMA  <yoichi@geiin.org>

	* wl-folder.el (wl-folder-set-persistent-mark): If summary
	buffer is not for given folder, don't use it.

2005-03-13  Yuuichi Teranishi  <teranisi@gohome.org>

	* Version number is increased to 2.14.0.

2005-03-11  Hiroya Murata  <lapis-lazuli@pop06.odn.ne.jp>

	* wl.el (wl-init): Call `elmo-global-flags-initialize'.

	* wl-highlight.el (wl-highlight-summary-flagged-face): New face.
	(wl-highlight-get-face-by-name): New internal function.
	(wl-highlight-summary-line-face-spec): Use it and fixed.

2005-03-10  Hiroya Murata  <lapis-lazuli@pop06.odn.ne.jp>

	* wl-summary.el (wl-summary-sync-update): Use
	`elmo-message-entity-field' instead of `car' to get message-id
	from overview entity.

	* wl-summary.el (wl-summary-rescan-message): Call
	`wl-highlight-summary-displaying' when displaying a message.

2005-03-07  Yoichi NAKAYAMA  <yoichi@geiin.org>

	* wl-draft.el (wl-draft-config-info-filename): Extracted from
	`wl-draft-config-info-operation'.
	(wl-draft-buffer-change-number): New function.
	(wl-draft-rename-saved-config): Ditto.
	* wl.el (wl-init): Connect slot for message-number-changed.
	(toplevel): Add autoload for wl-draft-rename-saved-config.

2005-03-05  Hiroya Murata  <lapis-lazuli@pop06.odn.ne.jp>

	* wl-summary.el (wl-summary-buffer-attach): Connect to signal
	`update-overview'
	(wl-summary-buffer-detach): Disconnect from it.
	(wl-summary-rescan-message): Use command.

	* wl-message.el (wl-message-buffer-display): Use
	`with-current-buffer' instead of `save-excursion'.

2005-03-04  Hiroya Murata  <lapis-lazuli@pop06.odn.ne.jp>

	* wl-mime.el (wl-draft-preview-attributes-list): Protect
	wl-draft-preview-attributes-list from distraction.

2005-02-27  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-summary.el (wl-summary-sync-update): Sort the return value of
	`elmo-list-diff'.

2005-02-27  Hiroya Murata  <lapis-lazuli@pop06.odn.ne.jp>

	* wl-summary.el
	(wl-summary-edit-addresses-collect-candidate-fields): Use
	`elmo-with-enable-multibyte' instead of `elmo-set-work-buf'.

	* wl-draft.el (wl-draft-yank-original): Use `with-temp-buffer'
	instead of `elmo-set-work-buf'.

	* wl-address.el (wl-address-make-alist-from-alias-file): Ditto.
	(wl-address-make-address-list): Ditto.

	* Version number is increased to 2.13.3.

2005-02-25  Hiroya Murata  <lapis-lazuli@pop06.odn.ne.jp>

	* wl-vars.el (wl-message-auto-reassemble-message/partial): New
	user option.

	* wl-summary.el (wl-summary-toggle-mime): Treat numeric prefix
	argument `5'.

	* wl-message.el (wl-message-display-no-merge-p): New function.
	(wl-message-buffer-display): Check whether the message is
	reassembled and follow the API change.

2005-02-24  Hiroya Murata  <lapis-lazuli@pop06.odn.ne.jp>

	* wl-action.el (wl-summary-exec-action-resend-subr): Disable
	multibyte on working buffer and removed unnecessary
	`buffer-disable-undo'.

2005-02-18  Hiroya Murata  <lapis-lazuli@pop06.odn.ne.jp>

	* wl-util.el (wl-read-search-condition-internal): Fixed the last
	change.

2005-02-18  Yoichi NAKAYAMA  <yoichi@geiin.org>

	* wl-util.el (wl-read-search-condition-internal): Protect
	elmo-global-flags from distraction.

2005-02-18  Hiroya Murata  <lapis-lazuli@pop06.odn.ne.jp>

	* wl.el (wl-exit): Call `elmo-clear-signal-slots'.

	* wl-summary.el (wl-summary-buffer-event-handler): Abolish.
	(wl-summary-event-handler): Ditto.
	(wl-summary-update-persistent-mark-on-event): New
	function (renamed from `elmo-event-handler-flag-changed').
	(wl-summary-buffer-attach): New function.
	(wl-summary-buffer-detach): Rewrite by `elmo-signal'.
	(wl-summary-buffer-set-folder): Use `wl-summary-buffer-attach'
	instead of `elmo-folder-add-handler'.

	* Version number is increased to 2.13.2.

2005-02-14  Hiroya Murata  <lapis-lazuli@pop06.odn.ne.jp>

	* wl-news.el.in (wl-news-mode-map): Bind commands of outline-mode
	and "\177" to the `wl-news-previous-page'.
	(wl-news-mode): Defined by `define-derived-mode' instead of `defun'.
	(wl-news-previous-page): New function.

2005-02-11  Hiroya Murata  <lapis-lazuli@pop06.odn.ne.jp>

	* wl-summary.el (wl-summary-save): Use `write-region-as-binary'
	instead of `write-region' and simplify.

2005-02-09  Hiroya Murata  <lapis-lazuli@pop06.odn.ne.jp>

	* wl-template.el (wl-template-select): Cause error if
	`wl-template-alist' is nil.

2005-02-06  TAKAHASHI Kaoru  <kaoru@kaisei.org>

	* wl-news.el.in: Set file variable `no-byte-compile'.

2005-02-06  Hiroya Murata  <lapis-lazuli@pop06.odn.ne.jp>

	* wl-summary.el (elmo-event-handler-flag-changed): Does not check
	whether a target message is within displaying area.
	(elmo-event-handler-cache-changed): Ditto.

2005-02-01  Tetsurou Okazaki  <okazaki@be.to>

	* wl-thread.el (wl-thread-entity-get-descendant): Change `defsubst'
	to `defun'.  Use `nconc' instead of `append' to collect descendant
	message numbers.

2005-01-30  TAKAHASHI Kaoru  <kaoru@kaisei.org>

	* wl-thread.el (wl-thread-save-top-list)
	(wl-thread-save-entities): Use `with-temp-buffer'.
	* wl-news.el.in (wl-news-previous-version-load):
	(wl-news-previous-version-save): Ditto.
	* wl-summary.el (wl-summary-load-file-object)
	(wl-summary-save-view-cache): Ditto.

2005-01-30  Hiroya Murata  <lapis-lazuli@pop06.odn.ne.jp>

	* wl-util.el (toplevel): Require 'elmo-flag'.
	(wl-read-search-condition): New function (Renamed from
	`elmo-read-search-condition').
	(wl-read-search-condition-internal): Likewise.

	* wl-summary.el (wl-summary-decide-flag): Cause error if flag is
	invalid.
	(wl-summary-pick): Use `wl-read-search-condition' instead of
	`elmo-read-search-condition'.
	(wl-summary-virtual): Ditto.

	* wl-folder.el (wl-folder-virtual): Ditto.
	(wl-folder-pick): Ditto.

	* wl-fldmgr.el (wl-fldmgr-make-filter): Ditto.

2005-01-28  Hiroya Murata  <lapis-lazuli@pop06.odn.ne.jp>

	* wl-summary.el (wl-summary-reedit): Call
	`wl-summary-message-string' with argument `use-cache' as `'maybe'.

2005-01-23  Hiroya Murata  <lapis-lazuli@pop06.odn.ne.jp>

	* wl-mime.el (toplevel): Require wl-vars.

	* wl-message.el (toplevel): Require cl at compile.

	* wl-draft.el (toplevel): Require elmo.

2005-01-20  Yoichi NAKAYAMA  <yoichi@geiin.org>

	* wl-message.el (wl-message-buffer-prefetch): Count is a number
	and do nothing when it is not positive.
	(wl-message-buffer-prefetch-next): Ditto.

2005-01-19  Yoichi NAKAYAMA  <yoichi@geiin.org>

	* wl-summary.el (wl-summary-goto-folder-subr): Avoid error for
	`wl-message-buffer-prefetch-depth' is nil though it is illegal.
	(wl-summary-redisplay-internal): Ditto.

	* wl-summary.el (wl-summary-goto-folder-subr): Protect current
	message (the condition is borrowed from `wl-check-variables-2').
	(wl-summary-redisplay-internal): Ditto.

2005-01-17  Hiroya Murata  <lapis-lazuli@pop06.odn.ne.jp>

	* wl-mime.el (wl-draft-nntp-attribute): New function.
	(wl-draft-attribute-nntp-posting-server): Use it.
	(wl-draft-attribute-nntp-posting-port): Ditto.

	* wl-mime.el (wl-draft-preview-attributes-list): New function.
	(wl-draft-show-attributes-buffer): Ditto.
	(wl-draft-hide-attributes-buffer): Ditto.
	(wl-draft-attribute-newsgroups): Ditto.
	(wl-draft-attribute-nntp-posting-server): Ditto.
	(wl-draft-attribute-nntp-posting-port): Ditto.
	(wl-draft-preview-message): Use there functions.

	* wl-vars.el (wl-draft-preview-attributes-list): Change default
	value.

2005-01-11  Hiroya Murata  <lapis-lazuli@pop06.odn.ne.jp>

	* wl-draft.el (wl-draft-insert-get-message): Follow the API change.
	(wl-draft-reedit): Ditto.
	(wl-draft-queue-flush): Ditto.

	* wl-mime.el (wl-message-request-partial): Ditto.
	(wl-message-delete-current-part): Use `elmo-message-fetch-string'
	instead of `elmo-message-fetch'.

	* wl-action.el (wl-summary-exec-action-resend-subr): Ditto.

	* wl-summary.el (wl-summary-message-string): Ditto.

2005-01-07  Hiroya Murata  <lapis-lazuli@pop06.odn.ne.jp>

	* wl-util.el (wl-current-message-buffer): Follow the API change.

	* wl-summary.el (wl-summary-redisplay-internal): Call
	`wl-summary-mark-as-read' with 2nd argument as nil and update
	unread count instead of persistent mark.

	* wl-message.el (wl-message-buffer-mime-entity): New buffer local
	variable.
	(wl-message-redisplay): Follow the API change.
	(wl-message-buffer-display): Managed mime-entity directly and
	return preview buffer only.
	(wl-message-display-internal): Rewrite.
	(wl-message-buffer-prefetch-subr): Not save return value of
	`wl-message-buffer-display'.

	* Version number is increased to 2.13.1.

2005-01-05  Hiroya Murata  <lapis-lazuli@pop06.odn.ne.jp>

	* wl-addrmgr.el (wl-addrmgr-pickup-entry-list): Call
	'elmo-multiple-fields-body-list' with boundary specified.

2005-01-05  Yoichi NAKAYAMA  <yoichi@geiin.org>

	* wl-vars.el (wl-summary-resend-use-cache): New variable.
	* wl-action.el (wl-summary-exec-action-resend-subr): Use file
	cache if `wl-summary-resend-use-cache' is non-nil.

2005-01-02  Yoichi NAKAYAMA  <yoichi@geiin.org>

	* wl-vars.el (wl-pop-before-smtp-stream-type): Fix range.
	(wl-nntp-posting-stream-type): Ditto.

2005-01-01  TAKAHASHI Kaoru  <kaoru@kaisei.org>

	* wl-demo.el (wl-demo-copyright-notice): Add 2005.

2005-01-01  Ron Isaacson  <Ron.Isaacson@morganstanley.com>

	* wl-util.el (wl-save-drafts): Avoid error on redisplaying
	message.

2004-12-25  Hiroya Murata  <lapis-lazuli@pop06.odn.ne.jp>

	* wl-summary.el (wl-summary-buffer-unsync-mark-number-list):
	Abolish.
	(wl-summary-buffer-persistent-mark-version): New internal
	variable.
	(wl-summary-update-mark-and-highlight-window): Check by
	wl-summary-persistent-mark-invalid-p.
	(wl-summary-update-status-marks): Ditto.
	(elmo-event-handler-flag-changed): Rewrite.
	(elmo-event-handler-cache-changed): Define.
	(wl-summary-prefetch-msg): Does not update persistent mark here.
	(wl-summary-delete-cache): Ditto.
	(wl-summary-resume-cache-status): Ditto.
	(wl-summary-jump-to-msg): Add arguments `beg' and `end'.
	(wl-summary-persistent-mark-invalid-p): New function.
	(wl-summary-validate-persistent-mark): Ditto.
	(wl-summary-validate-persistent-mark-string): Ditto.
	(wl-summary-invalidate-persistent-mark): Ditto.
	(wl-summary-update-persistent-mark): Call
	`wl-summary-validate-persistent-mark'.
	(wl-summary-create-line): Call
	`wl-summary-validate-persistent-mark-string'.

	* wl-message.el (wl-message-buffer-prefetch-subr): Set cache
	status as t if cache used.

2004-12-24  Yoichi NAKAYAMA  <yoichi@geiin.org>

	* wl-fldmgr.el (wl-fldmgr-set-petname): Check wl-folder-group-alist
	only if the target is group.
	* wl-folder.el (wl-folder-append-petname): Don't check group name.

2004-12-23  Yoichi NAKAYAMA  <yoichi@geiin.org>

	* wl-folder.el (wl-folder-buffer-search-entity): Check real name.

2004-12-22  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-vars.el (wl-smtp-authenticate-realm): New user option.

	* wl-draft.el (wl-smtp-extension-bind): Use wl-smtp-authenticate-realm.

2004-12-15  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-e21.el (wl-draft-mode-setup): Avoid global-font-lock-mode
	(Thanks to Yoichi NAKAYAMA).

2004-12-15  Yoichi NAKAYAMA  <yoichi@geiin.org>

	* wl-util.el (wl-save-drafts): Restore echo area.

2004-12-12  Yuuichi Teranishi  <teranisi@gohome.org>

	* Version number is increased to 2.13.0.

	* wl-util.el (wl-biff-check-folder-async): Use
	wl-folder-entity-exists-p instead of elmo-folder-exists-p.

2004-12-12  Hiroya Murata  <lapis-lazuli@pop06.odn.ne.jp>

	* wl-message.el (wl-message-display-internal): Does not put
	wl-message-display-type property on message buffer.
	(wl-message-buffer-display-type): New function.

	* wl-mime.el (wl-draft-yank-current-message-entity): Use it.

	* wl-summary.el (wl-summary-mode): Use `dolist' to add
	`wl-summary-buffer-detach'.
	(wl-summary-message-display-type): Use
	`wl-summary-buffer-display-type'.

2004-12-12  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-summary.el (wl-summary-mode): Set kill-buffer-hook as
	buffer-local.

	* wl-mime.el (wl-draft-preview-message): Use make-local-hook for
	kill-buffer-hook instead of make-local-variable.
	(wl-draft-preview-message): Set `local' argument of add-hook as t.

2004-12-12  Scott Renfro <scott@renfro.org>

	* wl-summary.el (wl-summary-default-subject-filter): Fixed greedy
	regex for square-branket.

2004-12-11  Hiroya Murata  <lapis-lazuli@pop06.odn.ne.jp>

	* wl-mime.el (wl-mime-preview-follow-no-mime): Call
	`wl-message-mime-analysis-p' with argument `header'.

2004-12-11  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-mime.el (wl-draft-yank-current-message-entity): 
	Switch to no-mime following method according to wl-message-display-type
	property.
	(wl-mime-preview-follow-no-mime): Use wl-message-mime-analysis-p.

	* wl-message.el (wl-message-display-internal): 
	Put wl-message-display-type property on message buffer.

	* wl-message.el (wl-message-mime-analysis-p): Fixed misspelling.
	(wl-message-display-internal): Ditto;

	* wl-summary.el (wl-summary-toggle-mime): Ditto.

2004-12-11  Hiroya Murata  <lapis-lazuli@pop06.odn.ne.jp>

	* wl-message.el (wl-message-make-display-type): New function.
	(wl-message-display-type-property): Ditto.
	(wl-message-mime-analysys-p): Ditto.
	(wl-message-display-all-header-p): Ditto.
	(wl-message-redisplay): Removed argument `as-is', `all-header' and
	added `display-type'.
	(wl-message-buffer-display): Likewise.
	(wl-message-display-internal): Likewise.
	(wl-message-buffer-display-type): Abolish.
	(wl-message-buffer-prefetch-subr): Follow the API changed.

	* wl-summary.el (wl-summary-buffer-display-header-mode): Renamed
	from wl-summary-buffer-display-all-header and changed default value.
	(wl-summary-message-display-type): New function.
	(wl-summary-buffer-display-mime-mode): Ditto.
	(wl-summary-buffer-display-header-mode): Ditto.
	(wl-summary-toggle-mime): Rewrite with above functions.
	(wl-summary-toggle-all-header): Ditto.
	(wl-summary-redisplay): Force redisplay with default mode.
	(wl-summary-redisplay-internal): Renamed argument from `mode',
	`all-header' to `mime-mode', `header-mode'.
	Use `wl-message-make-display-type'.

	* wl-vars.el (wl-summary-mode-line-format): Removed `[%m]'.
	(wl-message-mode-line-format-spec-alist): Changed definition for `m'.

2004-12-11  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-draft.el (wl-draft-send): Allow parent-folder as "".

2004-12-11  Yoichi NAKAYAMA  <yoichi@geiin.org>

	* wl-draft.el (wl-draft-forward):  Call wl-draft-forward-make-subject
	in original message buffer.
	(wl-draft-reply): Call wl-draft-reply-make-subject in original message
	buffer.

2004-12-10  Yoichi NAKAYAMA  <yoichi@geiin.org>

	* wl-draft.el (wl-draft-forward): Don't jump into temp-buffer.

2004-12-10  Yoichi NAKAYAMA  <yoichi@geiin.org>

	* wl-vars.el (wl-summary-line-format): Add reference to wl-summary-width.

2004-12-07  Tetsurou Okazaki  <okazaki@be.to>

	* wl-action.el (wl-summary-exec-action-refile): Display a done message
	when actions succeeded.
	(wl-summary-exec-action-copy): Likewise.

2004-12-07  Yoichi NAKAYAMA  <yoichi@geiin.org>

	* wl-summary.el (wl-summary-forward): Don't call set-buffer since
	there is switch-to-buffer at the end of wl-message-select-buffer.
	(wl-summary-reply): Ditto.

2004-12-06  Yoichi NAKAYAMA  <yoichi@geiin.org>

	* wl-summary.el (wl-summary-forward): Put subject in original
	message buffer as argument of wl-draft-forward.
	* wl-draft.el (wl-draft-forward): Decode subject as in
	wl-draft-reply.

2004-12-05  Yoichi NAKAYAMA  <yoichi@geiin.org>

	* wl-fldmgr.el (wl-fldmgr-unsubscribe): Show message if it is not
	a folder under access group.

2004-12-01  Yoichi NAKAYAMA  <yoichi@geiin.org>

	* wl-message.el (wl-message-buffer-prefetch-subr): Fix argument of
	wl-message-buffer-display.

	* wl-util.el (wl-set-save-drafts): Fix typo.

2004-12-01  Katsumi Yamaoka  <yamaoka@jpl.org>

	* wl-demo.el (wl-demo-insert-image): Use :file instead of :data to
	make an xbm image on XEmacs; use wl-highlight-demo-face instead of
	wl-highlight-logo-face to set the bg color of an xbm image; fixed
	the way to measure the width of a bitmap image; don't put face on
	ascii and bitmap images; put the mark which should not use the
	variable-pitch face on ascii and bitmap images.
	(wl-demo-setup-properties): Don't use the variable-pitch face on
	ascii and bitmap images; made it work on Emacs 20 and earlier.
	(wl-demo-insert-text): End with a newline at the bottom; don't put
	face on text.

	* wl-highlight.el (wl-highlight-logo-face): Specified bg colors.

2004-11-26  Yoichi NAKAYAMA  <yoichi@geiin.org>

	* wl-util.el (toplevel): Don't check existence of `timer-activate'.

	* wl-util.el (wl-save-drafts): Moved from sample setting.
	(wl-set-save-drafts): New function to set idle timer.
	* wl-draft.el (wl-draft): Call it.
	* wl-vars.el (wl-auto-save-drafts-interval): New variable.

2004-11-23  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-util.el (wl-current-message-buffer): Fixed bug when yank from
	a summary which has toggle display status off.

2004-11-23  Hiroya Murata  <lapis-lazuli@pop06.odn.ne.jp>

	* wl-draft.el (wl-draft-do-fcc): No cache save.

2004-11-16  Hiroya Murata  <lapis-lazuli@pop06.odn.ne.jp>

	* wl-summary.el (elmo-event-handler-flag-changed): Use
	`set-buffer' instead of `with-current-buffer'.

2004-11-14  Hiroya Murata  <lapis-lazuli@pop06.odn.ne.jp>

	* wl-summary.el (wl-summary-after-resize-function): New function.
	(wl-summary-mode): Add `wl-summary-after-resize-function' to
	window-size-change-functions.

2004-11-12  Hiroya Murata  <lapis-lazuli@pop06.odn.ne.jp>

	* wl-draft.el (wl-draft-create-buffer): Bind
	`change-major-mode-hook' after current buffer is changed.

	* wl-summary.el (wl-summary-buffer-detach): New function.
	(wl-summary-buffer-set-folder): Call it.
	(wl-summary-mode): Add `wl-summary-buffer-detach' to
	change-major-mode-hook and kill-buffer-hook.
	(wl-summary-exit): Does not call `elmo-folder-remove-handler'.
	(wl-summary-switch-to-clone-buffer): Ditto.
	(wl-summary-goto-folder-subr): Ditto.

2004-11-11  TAKAHASHI Kaoru  <kaoru@kaisei.org>

	* wl-summary.el (wl-summary-mode): Set `show-trailing-whitespace'
	after boundp check.

2004-11-07  Hiroya Murata  <lapis-lazuli@pop06.odn.ne.jp>

	* wl-summary.el (wl-summary-mimic-kill-buffer): New command.
	(wl-summary-mode-map): Substitute `wl-summary-mimic-kill-buffer'
	for `kill-buffer'.

	* wl-summary.el (wl-summary-switch-to-clone-buffer): Remove event
	handler of current buffer from elmo-folder.

2004-11-07  Yoichi NAKAYAMA  <yoichi@geiin.org>

	* wl-fldmgr.el (wl-fldmgr-sort): Confirm before sorting.

2004-11-06  Hiroya Murata  <lapis-lazuli@pop06.odn.ne.jp>

	* wl-summary.el (wl-summary-buffer-event-handler): New internal
	variable.
	(wl-summary-event-handler): New class.
	(elmo-event-handler-flag-changed): Define to update persistent
	mark.
	(wl-summary-buffer-set-folder): Register event handler to
	elmo-folder.
	(wl-summary-exit): Unregister event handler.
	(wl-summary-goto-folder-subr): Ditto.
	(wl-summary-mark-as-read-all): Does not call
	`wl-summary-update-persistent-mark' directly.
	(wl-summary-mark-as-read-internal): Ditto.
	(wl-summary-set-persistent-mark-internal): Ditto.
	(wl-summary-set-flags-internal): Ditto.

	* Version number is increased to 2.11.33.

2004-10-28  TAKAHASHI Kaoru  <kaoru@kaisei.org>

	* wl-summary.el (wl-summary-mode): Set `show-trailing-whitespace'
	to nil.

2004-10-24  Hiroya Murata  <lapis-lazuli@pop06.odn.ne.jp>

	* wl-spam.el (wl-spam-setup): Add hook
	`wl-summary-auto-check-spam' to `wl-summary-sync-updated-hook'
	instead of `wl-summary-prepare-hook'.

	* wl-summary.el (wl-summary-set-flags): Allow flag operation even
	if folder type is `'flag'.
	(wl-summary-mark-as-important): Ditto.

2004-10-16  Hiroya Murata  <lapis-lazuli@pop06.odn.ne.jp>

	* wl-address.el (wl-address-minibuffer-history): New variable.
	(wl-address-minibuffer-local-map): New keymap.
	(wl-address-read-from-minibuffer): New function.

	* wl-action.el (wl-summary-get-resend-address): Use
	`wl-address-read-from-minibuffer' instead of `completing-read'.

2004-10-11  Hiroya Murata  <lapis-lazuli@pop06.odn.ne.jp>

	* Version number is increased to 2.11.32.

2004-10-10  Yoichi NAKAYAMA  <yoichi@geiin.org>

	* wl-vars.el (wl-mime-charset): Change default value for XEmacs
	without mule to iso-8859-1.
	(wl-draft-add-in-reply-to): Add note in description.
	(wl-draft-add-references): Ditto.

2004-10-10  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-vars.el (wl-summary-mode-line-format-spec-alist): Changed
	definition for `m'.
	(wl-summary-mode-line-format): Add '[%m]'.
	(wl-message-mode-line-format-spec-alist): Ditto.
	(wl-summary-display-mime-mode-list): New variable.

	* wl-summary.el (wl-summary-buffer-display-mime-mode): Renamed
	from wl-summary-buffer-display-as-is.
	(wl-summary-buffer-display-all-header): New buffer local variable.
	(wl-summary-mode-map): Bind "H" to the 'wl-summary-toggle-all-header'.
	(wl-summary-goto-folder-subr): Setup wl-summary-buffer-display-mime-mode
	instead of wl-summary-buffer-display-as-is.
	(wl-summary-unset-persistent-mark): Don't use term 'Flag' here.
	(wl-summary-set-persistent-mark): Ditto.
	(wl-summary-set-message-buffer-or-redisplay): Just call
	`wl-summary-redisplay-internal' without optional arguments.
	(wl-summary-toggle-mime): Rewrite.
	(wl-summary-redisplay): Don't use `wl-summary-buffer-display-as-is'.
	(wl-summary-toggle-all-header): New function.
	(wl-summary-redisplay-internal): Treat mime mode.

	* wl-mime.el (wl-draft-yank-current-message-entity): Pass mode
	to wl-mime-preview-follow-no-mime.
	(wl-mime-preview-follow-no-mime): Bind elmo-mime-display-header-analysis
	accodring to the display-mode.

	* wl-message.el (wl-message-buffer-display-type): Rewrite.
	(wl-message-buffer-display): Changed argument name from `as-is' to
	`mode'.
	(wl-message-display-internal): Ditto;
	Bind elmo-mime-display-header-analysis according to the mode.
	(wl-message-display-internal): Put wl-message-display-mime-mode
	property on entire buffer.

2004-10-03  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-draft.el (wl-draft-do-fcc): Undo last change.

2004-09-29  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-summary.el (wl-summary-overview-entity-compare-by-from): 
	Don't extract mail address.
	(wl-summary-mark-as-read-all): Dont' treat `read' flag.

	* wl-draft.el (wl-draft-do-fcc): Don't treat `read' flag.

	* wl-score.el (wl-summary-score-update-all-lines): Ditto.

2004-09-28  Yoichi NAKAYAMA  <yoichi@geiin.org>

	* wl-fldmgr.el (wl-fldmgr-exit): Display length of
	wl-fldmgr-cut-entity-list on confirmation.

2004-09-27  Yoichi NAKAYAMA  <yoichi@geiin.org>

	* wl-mime.el (mime-edit-temp-message-buffer): Remove definition.
	(wl-mime-quit-preview): Check existence of
	mime-edit-temp-message-buffer here.

2004-09-26  Yoichi NAKAYAMA  <yoichi@geiin.org>

	* wl-fldmgr.el (wl-fldmgr-delete): Remove folder entity
	after deletion.

	* wl-draft.el (wl-draft-send-confirm): Check major-mode
	before calling wl-mime-quit-preview.

2004-09-25  Hiroya Murata  <lapis-lazuli@pop06.odn.ne.jp>

	* wl-summary.el (wl-summary-pick): If call it with prefix
	argument, set `delete-marks' as non-nil. Pick from only visible
	messages.
	(wl-summary-check-target-mark): New function.
	(wl-summary-target-mark-mark-as-read): Use it.
	(wl-summary-target-mark-mark-as-unread): Ditto.
	(wl-summary-target-mark-operation): Ditto.
	(wl-summary-target-mark-set-flags): Ditto.
	(wl-summary-target-mark-save): Ditto.
	(wl-summary-target-mark-pick): Ditto.
	(wl-summary-target-mark-forward): Ditto.
	(wl-summary-target-mark-reply-with-citation): Ditto.
	(wl-summary-target-mark-print): Ditto.
	(wl-summary-target-mark-uudecode): Ditto.

	* wl-summary.el (wl-summary-toggle-mime): Added optional argument
	`no-mime'. if it is non-nil, call `wl-summary-redisplay-no-mime'
	with `ask-coding' is non-nil.

2004-09-24  Hiroya Murata  <lapis-lazuli@pop06.odn.ne.jp>

	* wl-thread.el (wl-thread-set-parent): If parent is a message
	which is identified by references, set linked as nil.

2004-09-24  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-vars.el (wl-summary-mode-line-format-spec-alist): Added spec "m".
	(wl-message-mode-line-format-spec-alist): Ditto.
	(wl-message-mode-line-format): Ditto.
	(wl-summary-mode-line-format): Ditto for docstring.
	(wl-summary-no-mime-folder-list): Fix typo.

	* wl-util.el (wl-current-message-buffer): Call
	`wl-message-buffer-display' with `as-is' and `all-header' as nil.

	* wl-summary.el (wl-summary-buffer-display-as-is): New buffer-local
	variable.
	(wl-summary-mode-map): Bind 'M' as `wl-summary-toggle-mime' instead
	of `wl-summary-redisplay-no-mime'.
	(wl-summary-goto-folder-subr): Set up wl-summary-buffer-display-as-is.
	(wl-summary-toggle-mime): New function.
	(wl-summary-redisplay-all-header): Rewrite.
	(wl-summary-redisplay-no-mime): Ditto.
	(wl-summary-redisplay-internal): Added argument `as-is' and
	`all-header'.

	* wl-refile.el (wl-refile-default-from-folder-path-separator):
	New variable.
	(wl-refile-guess-functions): Added wl-refile-guess-by-from at the
	bottom.
	(wl-refile-guess-by-history): Don't use wl-refile-guess-by-from.
	(wl-refile-guess-by-from): Rewrite to fix the bug which inserts
	"/" unconditionally.

	* wl-mime.el (wl-draft-yank-current-message-entity): Use
	wl-mime-preview-follow-no-mime for as-is content.
	(wl-mime-preview-follow-no-mime): New function.
	(wl-mime-preview-follow-current-region): Fixed parenthesis.

	* wl-message.el (wl-message-redisplay): Removed argument `display-type'
	and added `as-is', `all-header'.
	(wl-message-buffer-display): Ditto.
	(wl-message-buffer-display-type): New function.

2004-09-21  Yoichi NAKAYAMA  <yoichi@geiin.org>

	* wl-vars.el (wl-message-header-button-alist): Change default
	value.
	(wl-message-body-button-alist): Ditto.

2004-09-20  Yoichi NAKAYAMA  <yoichi@geiin.org>

	* wl.el (wl-exit): Run elmo-passwd-alist-clear.

2004-09-19  Hiroya Murata  <lapis-lazuli@pop06.odn.ne.jp>

	* wl-summary.el (wl-summary-get-available-flags): Rewrite.

2004-09-19  Yoichi NAKAYAMA  <yoichi@geiin.org>

	* wl-summary.el (wl-summary-sync-marks): Remove condition which
	is always true.

2004-09-15  Yoichi NAKAYAMA  <yoichi@geiin.org>

	* wl-mime.el (wl-mime-preview-follow-current-region): Avoid error
	on null entity.

2004-09-13  Yoichi NAKAYAMA  <yoichi@geiin.org>

	* wl-vars.el (wl-draft-reply-default-position): Fix range.

2004-09-13  Hiroya Murata  <lapis-lazuli@pop06.odn.ne.jp>

	* wl-vars.el (wl-summary-resend-hook): New hook.

	* wl-action.el (wl-summary-exec-action-resend-subr): Run
	`wl-summary-resend-hook'.

2004-09-12  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-vars.el (wl-draft-forward-hook): Setup to put forwarded flag.
	(wl-summary-persistent-mark-priority-list): Add `forwarded'.
	(wl-summary-uncached-mark): Renamed from wl-summary-read-uncached-mark.
	(wl-summary-new-cached-mark): Changed default value to 'n'.
	(wl-summary-unread-cached-mark): Changed default value to 'u'.
	(wl-summary-answered-cached-mark): Changed default value to 'a'.
	(wl-folder-sync-range-alist): Remove spec for 'flag.
	(wl-summary-force-prefetch-folder-list): New user option.

	* wl-summary.el (wl-summary-mode-map): Bind 'M-k' to
	`wl-summary-toggle-persistent-mark'.
	(wl-summary-update-mark-and-highlight-window): Don't highlight when
	number is nil.
	(wl-summary-mark-as-answered-region): Set interactive argument of
	`wl-summary-set-persistent-mark-internal'.
	(wl-summary-mark-as-important-region): Ditto.
	(wl-summary-unset-persistent-mark): Ditto.
	(wl-summary-set-persistent-mark): Ditto.
	(wl-summary-mark-as-answered): Ditto.
	(wl-summary-mark-as-important): Ditto.
	(wl-summary-set-persistent-mark-internal): Do nothing
	when `elmo-message-flag-available-p' is nil.
	(wl-summary-toggle-persistent-mark): New function.
	(wl-summary-goto-folder-subr): Call `wl-summary-force-prefetch'
	when the folder matches `wl-summary-force-prefetch-folder-list'.


	* wl-highlight.el (wl-highlight-summary-current-line): Do nothing
	when number is nil.
	(wl-highlight-summary-forwarded-face): New face.

2004-09-12  Yuuichi Teranishi  <teranisi@gohome.org>

	* Version number is increased to 2.11.31.

2004-09-11  Yoichi NAKAYAMA  <yoichi@geiin.org>

	* wl-util.el (wl-biff-check-folders): Ignore non-existent folder.
	(wl-biff-check-folder-async): Ditto.
	* wl-vars.el (wl-biff-check-folder-list): Fix tag.

2004-09-08  Tetsurou Okazaki  <okazaki@be.to>

	* wl-summary.el (wl-summary-rescan): Implement reverse sorting.
	Add an argument `reverse'.  All callers are updated.
	(wl-summary-sort): Add a prefix argument `reverse' to specify
	reverse sorting.
	(wl-summary-sort-by-date, wl-summary-sort-by-number) 
	(wl-summary-sort-by-subject, wl-summary-sort-by-from) 
	(wl-summary-sort-by-list-info, wl-summary-sort-by-size): Likewise.

2004-09-08  Hiroya Murata  <lapis-lazuli@pop06.odn.ne.jp>

	* wl-message.el (wl-message-redisplay): Does not narrow header if
	disply-type is all-header or as-is.

	* wl-summary.el (wl-summary-enter-handler): Use
	`wl-thread-jump-to-msg' instead of `wl-summary-jump-to-msg'.

2004-09-06  Yoichi NAKAYAMA  <yoichi@geiin.org>

	* wl-draft.el (wl-draft-reply): Save wl-draft-config-variables
	after adding wl-draft-parent-variables.
	(wl-draft-forward): Ditto.

2004-09-05  Hiroya Murata  <lapis-lazuli@pop06.odn.ne.jp>

	* wl-summary.el (wl-summary-sync-marks): Call
	`wl-summary-set-persistent-mark' and
	`wl-summary-unset-persistent-mark' with 4th argument `no-server'.
	(wl-summary-set-persistent-mark-internal): Add 4th argument
	`no-server'.
	(wl-summary-unset-persistent-mark): Ditto.
	(wl-summary-set-persistent-mark): Ditto.
	(wl-summary-add-flags-internal): Abolish.
	(wl-summary-remove-flags-internal): Ditto.
	(wl-summary-mark-as-important-internal): Ditto.
	(wl-summary-mark-as-important): Use
	`wl-summary-set-persistent-mark' instead of
	`wl-summary-add-flags-internal'.
	(wl-summary-mark-as-important-region): Ditto.

	* wl-score.el (wl-summary-score-update-all-lines): Ditto.

	* wl-summary.el (wl-summary-get-available-flags): New function.
	(wl-summary-sync-marks): Use it and simplified.
	(wl-summary-unset-persistent-mark): Use
	`wl-summary-get-available-flags'.
	(wl-summary-set-persistent-mark): Ditto.

2004-09-05  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-folder.el (wl-folder-entity-assign-id): Fix for folder entity
	id.

2004-09-04  Hiroya Murata  <lapis-lazuli@pop06.odn.ne.jp>

	* wl-summary.el (wl-summary-enter-handler): If argument is not a
	number, call `wl-summary-prev-line-content'. Show message when the
	message is not found.

2004-09-04  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-summary.el (wl-summary-mode-map): Bind enter key to the
	wl-summary-enter-handler.
	(wl-summary-enter-handler): New command.

	* wl-vars.el (wl-summary-persistent-mark-priority-list): Update
	docstring and custom spec.

	* wl-summary.el (wl-summary-unset-persistent-mark): Treat global
	flags too; Don't treat Cached and New.
	(wl-summary-set-persistent-mark): Ditto.

	* wl-folder.el (wl-folder-set-persistent-mark): Renamed from
	`wl-folder-set-flag'.

	* wl-draft.el (wl-draft-send): Use `wl-folder-set-persistent-mark'
	instead of `wl-folder-set-flag'.

	* wl-summary.el (wl-summary-unset-persistent-mark): Ignore case
	for completion.
	(wl-summary-set-persistent-mark): Ditto.

	* wl-draft.el (wl-draft-send-confirm): Call `wl-mime-quit-preview'
	instead of `wl-draft-quit-preview'.

	* wl-mime.el (toplevel): Avoid compile warning.
	(wl-mime-quit-preview): New function
	(formarly defined as `wl-draft-quit-preview').
	(wl-draft-preview-message): Use `wl-mime-quit-preview' for
	quitting method.

	* wl-draft.el: Move wl-draft-quit-preview to wl-mime.el.

	* wl-folder.el (wl-folder-set-flag): Renamed from
	`wl-draft-set-flag-on-parent'.

	* wl-draft.el (wl-draft-quit-preview): New function.
	(wl-draft-send-confirm): Call it instead of `mime-preview-quit'.
	(wl-draft-send): Call `wl-folder-set-flag' instead of
	`wl-draft-set-flag-on-parent'.
	(wl-draft-set-flag-on-parent): Renamed to `wl-folder-set-flag'.

2004-09-03  Hiroya Murata  <lapis-lazuli@pop06.odn.ne.jp>

	* wl-draft.el (wl-draft-forward): Fixed parenthesis.
	(wl-draft-send): Ditto.

2004-09-03  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-vars.el (wl-draft-reply-hook): Changed default value.
	(wl-draft-kill-pre-hook): Set default value as nil.
	(wl-summary-reply-hook): Ditto.
	(wl-draft-kill-flags): Abolish.

	* wl-draft.el (wl-draft-parent-flag): New buffer local variable.
	(wl-draft-parent-variables): Renamed from
	wl-draft-reply-saved-variables and added wl-draft-parent-flag.
	(wl-draft-forward): Call wl-draft-config-info-operation with 'save
	argument; Add wl-draft-parent-variables to
	wl-draft-config-variables.
	(wl-draft-reply): Likewise.
	(wl-draft-kill-flags): Abolish.
	(wl-draft-send): Call wl-draft-set-flag-on-parent.
	(wl-draft-set-flag-on-parent): New function.
	(wl-draft-setup-parent-flag): Ditto.

2004-09-02  Tetsurou Okazaki  <okazaki@be.to>

	* wl-draft.el (wl-draft-kill-flags): Avoid error when
	`wl-draft-parent-folder' is "".

2004-09-02  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-summary.el (wl-summary-mode-map): Treat digits as prefix args.
	(wl-summary-digit-jump): New function.
	(Adviced by John Owens and Hiroya Murata)

	* wl-e21.el (wl-message-define-keymap): Bind "w" as wl-draft.
	(Adviced by John Owens)

	* wl-xmas.el (wl-message-define-keymap): Ditto.

	* wl-mule.el (wl-message-define-keymap): Ditto.

2004-08-31  Hiroya Murata  <lapis-lazuli@pop06.odn.ne.jp>

	* wl-vars.el (wl-summary-mode-line-format-spec-alist): Follow the
	change of return value of elmo-folder-count-flags.

	* wl-summary.el (wl-summary-prefetch-msg): Ditto.
	(wl-summary-mark-as-read-internal): Ditto.
	(wl-summary-set-persistent-mark-internal): Ditto.
	(wl-summary-folder-info-update): Ditto.
	(wl-summary-sync-update): Fixed the last change.

	* wl-score.el (wl-summary-score-update-all-lines): Ditto.

2004-09-01  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-vars.el (wl-draft-kill-pre-hook): New hook.
	(wl-draft-kill-flags): Fixed docstring.

	* wl-draft.el (wl-draft-kill-flags): New function.
	(wl-draft-kill): Run `wl-draft-kill-pre-hook'.

2004-08-31  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-vars.el (wl-reply-hook): Abolish.
	(wl-draft-reply-hook): New hook.
	(wl-summary-reply-hook): Ditto.
	(wl-draft-forward-hook): Ditto.
	(wl-summary-forward-hook): Ditto.
	(wl-draft-kill-flags): New variable.

	* wl-summary.el (wl-summary-mark-as-answered-region): Use
	wl-summary-set-persistent-mark-internal.
	(wl-summary-sync-marks): Use elmo-preserved-flags.
	(wl-summary-update-persistent-mark): Make it interactive.
	(wl-summary-set-persistent-mark-internal): New inline function.
	(wl-summary-mark-as-answered): Use it.
	(wl-summary-mark-as-unanswered): Ditto.
	(wl-summary-unset-persistent-mark): New function.
	(wl-summary-set-persistent-mark): Ditto.
	(wl-summary-reply): Don't set answered flag;
	Run wl-summary-reply-hook instead.
	(wl-summary-forward): Call wl-draft-forward with number.
	Run wl-summary-forward-hook.

	* wl-highlight.el (wl-summary-persistent-mark-face): New face.
	(wl-highlight-summary-line-face-spec): Use it as a default
	persistent mark face.

	* wl-draft.el (wl-draft-forward): Added optional argument number;
	Set wl-draft-parent-number; Run wl-draft-forward-hook.
	(wl-draft-reply): Run wl-draft-reply-hook instead of wl-reply-hook.
	(wl-draft-kill): Use wl-draft-kill-flags.

	* wl-vars.el (wl-summary-answered-uncached-mark): Fixed typo.

	* wl-folder.el (wl-folder-check-one-entity): Follow the change
	of return value of elmo-folder-count-flags.

	* wl-score.el (wl-summary-score-update-all-lines): Ditto.

	* wl-summary.el (wl-summary-count-unread): Ditto.
	(wl-summary-sync-update): Follow the change above.
	(wl-summary-force-prefetch): New function.

2004-08-25  Tetsurou Okazaki  <okazaki@be.to>

	* wl-folder.el (wl-folder-set-folder-updated): Initialize the local
	variable `buf' with `let' instead of `setq'.

2004-08-21  Yoichi NAKAYAMA  <yoichi@geiin.org>

	* wl-mime.el (wl-message-delete-current-part): If filename exists,
	add Content-Disposition heaeder on the deleted part.

2004-08-05  Yoichi NAKAYAMA  <yoichi@geiin.org>

	* wl-draft.el (wl-draft-save): Encode address list under edit by
	`eword-encode-unstructured-field-body'.

	* wl-draft.el (toplevel): Require eword-encode, cl (at compile).

2004-08-01  Yoichi NAKAYAMA  <yoichi@geiin.org>

	* wl-summary.el (wl-summary-set-message-buffer-or-redisplay): Set
	wl-current-summary-buffer.

2004-07-29  Tetsurou Okazaki  <okazaki@be.to>

	* wl-action.el (wl-summary-exec): Fix the bug whereby a non null
	`numbers' is ignored.

2004-07-25  Yoichi NAKAYAMA  <yoichi@geiin.org>

	* wl-folder.el (wl-folder-open-folder): Avoid error.
	Reported by John Owens, [wl-en:815]

	* wl.el (wl): Set timer for biff process even if prefix argument
	is given or auto-checking is quitted.

	* wl-util.el (wl-biff-start): Don't call `wl-biff-check-folders'
	immediately.
	* wl.el (wl): Call `wl-biff-check-folders' explicitly.
	(wl-toggle-plugged): Ditto.

	* wl-vars.el (wl-biff-use-idle-timer): New variable.
	* wl-util.el (wl-biff-start): Use idle timer if
	`wl-biff-use-idle-timer' is non-nil.

2004-07-21  Yoichi NAKAYAMA  <yoichi@geiin.org>

	* wl-highlight.el (wl-highlight-message): Fix description.

2004-07-16  Yoichi NAKAYAMA  <yoichi@geiin.org>

	* wl-demo.el (wl-demo-setup-properties): Avoid error for XEmacs on
	tty.

2004-07-12  Yoichi NAKAYAMA  <yoichi@geiin.org>

	* wl-action.el (wl-summary-exec): Print failure count.

2004-07-11  Yoichi NAKAYAMA  <yoichi@geiin.org>

	* wl-summary.el (wl-summary-redisplay-internal): Change `defsubst'
	to `defun', remove interactive form.
	Set elmo-message-fetch-confirm when force-reload is non-nil.

2004-07-10  Hiroya Murata  <lapis-lazuli@pop06.odn.ne.jp>

	* wl-summary.el (toplevel): Removed unnecessary autoload.

2004-07-11  Yoichi NAKAYAMA  <yoichi@geiin.org>

	* wl-message.el (wl-message-exit): Switch to mime-mother-buffer if
	the buffer is generated from another message buffer.

2004-07-06  Yoichi NAKAYAMA  <yoichi@geiin.org>

	* wl-fldmgr.el (wl-fldmgr-save-access-list): New function
	extracted from `wl-fldmgr-save-folders'.
	(wl-fldmgr-delete): Call it after deletion.

2004-07-03  Hiroya Murata  <lapis-lazuli@pop06.odn.ne.jp>

	* wl-e21.el (wl-plugged-set-folder-icon): Follow the change for
	multi-tty support.

2004-07-01  Tetsurou Okazaki  <okazaki@be.to>

	* wl-folder.el (wl-folder-update-group): Change `defsubst' to `defun'.

2004-06-27  Tetsurou Okazaki  <okazaki@be.to>

	* wl-summary.el (wl-summary-rescan): Remove unused variables.
	(wl-summary-sync-update): Ditto.  Narrow the scope of local variables.

2004-06-26  Hiroya Murata  <lapis-lazuli@pop06.odn.ne.jp>

	* wl-fldmgr.el (wl-delete-entity-sub): Add folder name to
	unsubscribe list only if argument CLEAR is nil.

2004-06-25  Yoichi NAKAYAMA  <yoichi@geiin.org>

	* wl-draft.el (wl-draft-reply): Decode subject before removing
	Re: prefix.

2004-06-23  Tetsurou Okazaki  <okazaki@be.to>

	* wl-summary.el (wl-summary-sort-by-size): New command.

2004-06-23  Hiroya Murata  <lapis-lazuli@pop06.odn.ne.jp>

	* wl-summary.el (wl-summary-number-list-from-region): New
	function.
	(wl-summary-mark-as-read-region): Use it.
	(wl-summary-mark-as-unread-region): Ditto.
	(wl-summary-set-flags-region): Ditto and add optional argument
	remove.
	(wl-summary-mark-as-answered-region): Ditto.
	(wl-summary-mark-as-important-region): Ditto.
	(wl-summary-target-mark-mark-as-important): Added optional
	argument remove.
	(wl-summary-target-mark-mark-as-answered): Ditto.
	(wl-summary-target-mark-set-flags): Ditto.

2004-06-22  Hiroya Murata  <lapis-lazuli@pop06.odn.ne.jp>

	* wl-summary.el (wl-summary-set-flags-region): Call
	`wl-summary-set-flags-internal' with number list instead of call
	one by each message.
	(wl-summary-target-mark-set-flags): Likewise.

2004-06-21  Hiroya Murata  <lapis-lazuli@pop06.odn.ne.jp>

	* wl-summary.el (wl-summary-target-mark-operation): Add optional
	argument `inverse' and use `wl-summary-delete-all-target-marks'.
	(wl-summary-target-mark-mark-as-important): Refine to toggle mark.
	(wl-summary-target-mark-mark-as-answered): Likewise.

2004-06-22  Yoichi NAKAYAMA  <yoichi@geiin.org>

	* wl-summary.el (wl-summary-target-mark-forward): Use
	`wl-summary-delete-all-target-marks' instead of
	`wl-summary-delete-all-temp-marks'.
	(wl-summary-target-mark-reply-with-citation): Ditto.
	(wl-summary-target-mark-uudecode): Ditto.
	(wl-summary-target-mark-set-flags): Ditto and remove needless
	cursor move.

2004-06-21  Yoichi NAKAYAMA  <yoichi@geiin.org>

	* wl-summary.el (wl-summary-target-mark-forward): Protect
	wl-summary-buffer-target-mark-list from nreverse.
	(wl-summary-target-mark-reply-with-citation): Ditto.

2004-06-20  Yoichi NAKAYAMA  <yoichi@geiin.org>

	* wl-thread.el (wl-thread-update-indent-string-thread): Use
	`elmo-display-progress-threshold'.

2004-06-19  Hiroya Murata  <lapis-lazuli@pop06.odn.ne.jp>

	* wl-summary.el (wl-summary-update-mark-and-highlight-window): No
	check `wl-summary-highlight'.
	(wl-summary-window-scroll-functions): Respect value of
	`wl-summary-highlight'.
	(wl-summary-sync-update): Run hooks
	`wl-summary-buffer-window-scroll-functions' at any time.

2004-06-20  Yoichi NAKAYAMA  <yoichi@geiin.org>

	* wl-summary.el (wl-summary-exec-with-confirmation): Extracted
	from `wl-summary-cleanup-temp-marks'.
	(wl-summary-cleanup-temp-marks): Abolish argument.
	* wl.el (wl-save-status): Revert previous change.
	(wl-execute-temp-marks): New function, call
	`wl-summary-exec-with-confirmation'.
	* wl-folder.el (wl-folder-mode-map): Bind "x" to it.
	(wl-folder-save-and-exec-marks): Abolished.

2004-06-19  Yoichi NAKAYAMA  <yoichi@geiin.org>

	* wl-e21.el (wl-e21-display-image-p): Respect
	`wl-highlight-folder-with-icon'.
	(wl-e21-highlight-folder-group-line): Highlight mouse line
	even if wl-e21-display-image-p is nil.

	* wl-summary.el (wl-summary-update-mark-and-highlight-window):
	Respect value of `wl-summary-highlight'.

	* wl.el (wl-save-status): Remove unused variable.

	* wl-folder.el (wl-folder-save-and-exec-marks): New function.
	(wl-folder-mode-map): Bind it to "x".

2004-06-18  Yoichi NAKAYAMA  <yoichi@geiin.org>

	* wl-summary.el (wl-summary-sync-update): Utilize lazy-highlight.

	* wl-thread.el (wl-thread-get-parent-list): Don't check
	disconnected ancestors, neglecting needless work in
	`wl-thread-update-indent-string-thread'.

	* wl.el (wl-save): Take prefix argument to execute remaining marks.
	* wl-summary.el (wl-summary-cleanup-temp-marks): Abolish unused
	argument, add argument default-keep to keep marks by default.

	* Version number is increased to 2.11.30.

	* wl-vars.el (wl-draft-reply-with-argument-list): Fix
	customization type and docstring.
	(wl-draft-reply-without-argument-list): Ditto.

2004-06-13  Hiroya Murata  <lapis-lazuli@pop06.odn.ne.jp>

	* wl-vars.el (wl-summary-mark-action-list): Fix customization type.

	* wl-spam.el (wl-spam-mark-action-list): Ditto.

2004-06-14  Yoichi NAKAYAMA  <yoichi@geiin.org>

	* wl-vars.el (wl-summary-mark-action-list): Fix customization type.

2004-06-12  Yoichi NAKAYAMA  <yoichi@geiin.org>

	* wl-draft.el (wl-draft-config-exec): Narrow the range of
	save-excursion so as not to include run-hooks.

2004-06-11  Yoichi NAKAYAMA  <yoichi@geiin.org>

	* wl-summary.el (wl-summary-cleanup-temp-marks): defsubst->defun.
	Clarify that marks are going to be cleared.

2004-06-09  Hiroya Murata  <lapis-lazuli@pop06.odn.ne.jp>

	* wl-summary.el (wl-summary-persistent-mark-string): Decide mark
	according to 3rd element of wl-summary-flag-mark.

	* wl-vars.el (wl-summary-flag-alist): Add description for mark.

2004-06-07  Hiroya Murata  <lapis-lazuli@pop06.odn.ne.jp>

	* wl-action.el (wl-summary-target-mark-all): Don't set
	wl-summary-buffer-target-mark-list by elmo-folder-list-messages.

2004-06-06  Yoichi NAKAYAMA  <yoichi@geiin.org>

	* wl-vars.el (wl-reply-subject-prefix): The value can be function.
	(wl-forward-subject-prefix): Ditto.
	* wl-draft.el (wl-draft-forward-make-subject): Change accordingly.
	(wl-draft-reply-make-subject): Ditto.

	* wl-draft.el (wl-draft-forward-make-subject): Extracted from
	`wl-draft-forward'.
	(wl-draft-reply-make-subject): Ditto from `wl-draft-reply'.

2004-06-04  Yoichi NAKAYAMA  <yoichi@geiin.org>

	* wl-action.el (wl-summary-target-mark-set-action): Stop if
	target message does not exist.

2004-06-04  Tsutomu OKADA  <tsutomu.okada@furuno.co.jp>

	* wl-vars.el (wl-subject-re-prefix-regexp): Renamed from
	`wl-subject-prefix-regexp'.
	(wl-subject-forward-prefix-regexp): New variable.
	* wl-draft.el (wl-draft-strip-subject-regexp): Renamed from
	`wl-draft-strip-subject-re' and take regexp as argument.
	(wl-draft-forward): Use it.
	(wl-draft-reply): Ditto.

2004-05-30  ARISAWA Akihiro  <ari@mbf.sphere.ne.jp>

	* wl-e21.el (wl-highlight-plugged-current-line): Change for
	emacs multi-tty support.

2004-05-29  ARISAWA Akihiro  <ari@mbf.sphere.ne.jp>

	* wl-e21.el (wl-e21-display-image-p): Don't call
	`display-images-p'.
	(wl-e21-highlight-folder-group-line): Change for emacs multi-tty
	support.
	(wl-highlight-folder-current-line): Ditto.
	(wl-folder-init-icons): Ditto.

2004-05-26  Yoichi NAKAYAMA  <yoichi@geiin.org>

	* wl-summary.el (wl-summary-cursor-move-surface): Avoid error on
	the last line of summary in unplugged mode.

2004-05-26  Tetsurou Okazaki  <okazaki@be.to>

	* wl-vars.el (wl-refile-rule-alist): Doc fix.

2004-05-23  Yoichi NAKAYAMA  <yoichi@geiin.org>

	* wl-vars.el (wl-user-mail-address-regexp): New variable.
	* wl-address.el (wl-address-user-mail-address-p): Use it.
	(wl-address-delete-user-mail-addresses): Ditto.
	Suggested by David Bremner <bremner@unb.ca>, [wl-en:463]

	* wl-address.el (wl-address-user-mail-address-p): defsubst->defun.
	(wl-address-delete-user-mail-addresses): Ditto.

	* wl-address.el (wl-address-delete-user-mail-addresses): New
	function.
	* wl-refile.el (wl-refile-guess-by-history): Use it.
	* wl-draft.el (wl-draft-delete-myself-from-cc): Ditto.
	(wl-draft-make-mail-followup-to): Ditto and fix logic.

	* wl-draft.el (wl-draft-edit-string): To judge sender address,
	use wl-address-user-mail-address-p.

2004-05-22  Yoichi NAKAYAMA  <yoichi@geiin.org>

	* wl-folder.el (wl-folder-open-close): Keep cursor on the line
	after opening group.

2004-05-22  Hiroya Murata  <lapis-lazuli@pop06.odn.ne.jp>

	* wl-draft.el (wl-draft-reply): Use set-buffer-multibyte instead
	of elmo-set-buffer-multibyte.

	* wl-message.el (wl-original-message-mode): Ditto.

	* wl-score.el (wl-score-insert-header): Ditto.

	* wl-summary.el
	(wl-summary-edit-addresses-collect-candidate-fields): Ditto.
	(wl-summary-goto-folder-subr): Ditto.
	(wl-summary-insert-headers): Ditto.

	* wl-util.el (wl-set-string-width): Ditto.

	* Version number is increased to 2.11.29.

2004-05-20  Yoichi NAKAYAMA  <yoichi@geiin.org>

	* wl-vars.el (wl-use-flag-folder-help-echo): Avolished.
	(wl-highlight-summary-line-help-echo-alist): New variable.
	* wl-highlight.el (wl-highlight-summary-line-flag-folder): Divide
	into `wl-highlight-summary-line-help-echo' and
	`wl-highlight-flag-folder-help-echo'.
	(wl-highlight-summary-line-string): Change accordingly.
	(wl-highlight-summary-current-line): Ditto.

2004-05-18  Yoichi NAKAYAMA  <yoichi@geiin.org>

	* wl-highlight.el (wl-highlight-message): Ignore white spaces
	at the beginning of field body (Thanks to Markus Knittig).

	* wl-draft.el (wl-draft-insert-current-message): Also check
	summary buffer, remove unnecessary tag.

2004-05-17  Yoichi NAKAYAMA  <yoichi@geiin.org>

	* wl-draft.el (wl-draft-insert-current-message): Cause error also
	when wl-message-buffer is nil.

	* wl-folder.el (wl-folder): Abolish unused argument.
	Call wl-folder-init when wl-folder-entity is nil.
	* wl.el (wl): Change accordingly.

2004-05-16  Hiroya Murata  <lapis-lazuli@pop06.odn.ne.jp>

	* wl-draft.el (wl-draft-yank-from-mail-reply-buffer): Convert to
	multibyte string before insert into draft buffer.
	(wl-draft-create-buffer): Always enable multibyte characters for
	draft buffer.

	* Version number is increased to 2.11.28.

2004-05-12  Yoichi NAKAYAMA  <yoichi@geiin.org>

	* wl-folder.el (wl-folder-open-close): Handle blank line.
	(wl-folder-jump-to-current-entity): Ditto.

2004-05-09  Hiroya Murata  <lapis-lazuli@pop06.odn.ne.jp>

	* Version number is increased to 2.11.27.

2004-04-29  Yoichi NAKAYAMA  <yoichi@geiin.org>

	* wl-thread.el (wl-thread-insert-message): When the thread is
	devided by wl-summary-max-thread-depth, insert line at the end of
	buffer.

2004-04-18  Hiroya Murata  <lapis-lazuli@pop06.odn.ne.jp>

	* Version number is increased to 2.11.26.

2004-04-18  Yoichi NAKAYAMA  <yoichi@geiin.org>

	* wl-vars.el (wl-draft-sendlog-max-size): Add nil to range.

2004-04-17  Yoichi NAKAYAMA  <yoichi@geiin.org>

	* wl-draft.el (wl-draft-send-mail-with-pop-before-smtp): Fix
	value of stream-type and session.

2004-04-16  Hiroya Murata  <lapis-lazuli@pop06.odn.ne.jp>

	* Version number is increased to 2.11.25.

2004-04-16  Tetsurou Okazaki  <okazaki@be.to>

	* wl-summary.el (wl-summary-sync-update): Remove duplicated period
	in a quit message.

2004-04-10  Yoichi NAKAYAMA  <yoichi@geiin.org>

	* wl-summary.el (wl-summary-redisplay-all-header): Set cached.
	(wl-summary-redisplay-no-mime-internal): Ditto.

2004-04-03  Yoichi NAKAYAMA  <yoichi@geiin.org>

	* wl-draft.el (wl-smtp-extension-bind): Support smtp over ssl.
	* wl-vars.el (wl-smtp-connection-type): Ditto.

2004-04-03  Colin Rafferty  <colin.rafferty@morganstanley.com>

	* wl-highlight.el (wl-highlight-message): Change to strict regexp
	for the separator line and quote mail-header-separator.

2004-04-02  Hiroya Murata  <lapis-lazuli@pop06.odn.ne.jp>

	* wl-spam.el (wl-message-check-spam): Fixed problem no display
	result message.

	* wl-addrmgr.el (wl-addrmgr-address-entry-list): Call
	`elmo-multiple-fields-body-list' with boundary as
	mail-header-separator.

2004-04-01  Yoichi NAKAYAMA  <yoichi@geiin.org>

	* wl-refile.el (wl-refile-guess-by-from): Use elmo-concat-path.

2004-03-27  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-util.el (wl-list-diff): Remove unused function.

	* wl-draft.el (wl-draft-send-confirm): Discard input before
	confirmation.

2004-03-13  Hiroya Murata  <lapis-lazuli@pop06.odn.ne.jp>

	* wl-vars.el (wl-summary-persistent-mark-priority-list): Changed
	order of flag and new.

2004-02-21  Hiroya Murata  <lapis-lazuli@pop06.odn.ne.jp>

	* wl-vars.el (wl-refile-policy-alist): Abolished.

	* wl-action.el (wl-summary-set-action-refile): Follow the change
	above.

2004-02-19  Katsumi Yamaoka  <yamaoka@jpl.org>

	* wl-highlight.el (wl-highlight-signature-search): Don't use
	re-search-backward for a long word since it is possible to crash
	XEmacs because of a bug.

2004-02-15  Tetsurou Okazaki  <okazaki@be.to>

	* wl-message.el (wl-message-buffer-prefetch-p): Change `defsubst' to `defun'.

2004-02-13  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-summary.el (wl-summary-goto-folder-subr): Don't give 'no-check
	argument for wl-summary-sync-force-update.

2004-02-12  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-summary.el (wl-summary-mode-map): Revival of
	wl-summary-mark-as-important related bindings;
	Bind 'F','tF','mF','rF','m&'.
	(wl-summary-mark-as-important-region): Revival.
	(wl-summary-target-mark-mark-as-important): Ditto.
	(wl-summary-target-mark-operation): New function.
	(wl-summary-target-mark-mark-as-answered): Use it.
	(wl-summary-decide-flag): Don't set Important as default.
	(wl-summary-mark-as-important-internal): Revival.
	(wl-summary-mark-as-important): Ditto.

	* wl-thread.el (wl-thread-mark-as-important): Ditto.

	* wl-highlight.el (wl-highlight-summary-line-face-spec): Use find-face
	instead of facep.

2004-02-10  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-dnd.el (wl-dnd-drop-func): Fix.

	* wl-message.el (wl-message-header-narrowing-widen-at-mouse): Use
	mouse-set-point instead of posn-point.

	* wl-xmas.el (wl-completing-read-multiple): Define as function.

	* wl-mule.el (wl-completing-read-multiple): Ditto.

2004-02-10  Hiroya Murata  <lapis-lazuli@pop06.odn.ne.jp>

	* wl-demo.el (face-background-name): Defalias to avoid compile
	warning.

2004-02-10  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-summary.el (wl-summary-decide-flag): Use
	wl-completing-read-multiple instead of completing-read-multiple.

	* wl-mule.el,wl-e21.el,wl-xmas.el (wl-completing-read-multiple): 
	New alias.

	* wl-demo.el (wl-demo-setup-properties)[XEmacs]:
	Use face-background-name instead of face-background.

	* wl-vars.el (wl-summary-save-file-suffix): New user option.

	* wl-summary.el (wl-summary-save): Use it.
	(wl-summary-mode-menu-spec): Added wl-summary-sort-by-size.

	* wl-mime.el (wl-mime-save-content): Fix last change.

2004-02-10  Len Trigg <lenbok@myrealbox.com>

	* wl-summary.el (wl-summary-overview-entity-compare-by-size):
	New function.
	(wl-summary-sort-specs): Added sort.
	* wl-mime.el (wl-mime-save-content): Expand file name.

2004-02-10  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-mime.el (wl-draft-preview-message): Fixed typo.

	* wl-vars.el (wl-draft-always-delete-myself): Ditto.

2004-02-09  Hiroya Murata  <lapis-lazuli@pop06.odn.ne.jp>

	* wl-highlight.el (wl-highlight-summary-line-face-spec): Make face
	for flag if it is not defined.

2004-02-09  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-e21.el (wl-highlight-folder-current-line): Use
	elmo-folder-type-internal when elmo-folder-type returns nil.

	* wl-xmas.el (wl-highlight-folder-current-line): Ditto.

	* wl.el (wl-init): Setup faces accoding to wl-summary-flag-alist.

	* wl-xmas.el (wl-summary-toolbar): Setup wl-summary-set-flags.

	* wl-e21.el (wl-summary-toolbar): Ditto.

	* wl-vars.el (wl-demo-background-color): Abolished.
	(wl-summary-persistent-mark-priority-list): Renamed from
	wl-summary-flag-priority-list.
	(wl-summary-flag-alist): New user option.
	(wl-summary-flag-mark): Renamed from wl-summary-important-mark.
	(wl-message-mode-line-format-spec-alist): Added 'F'.
	(wl-message-mode-line-format): Likewise.
	(wl-summary-expire-reserve-marks): Use wl-summary-flag-mark
	instead of wl-summary-important-mark.
	(wl-file-folder-icon): New variable.

	* wl-thread.el (wl-thread-set-flags): Renamed from
	wl-thread-mark-as-important.

	* wl-summary.el: Define `elmo-global-flag-list' to avoid byte-compile
	warning.
	(wl-summary-mode-menu-spec): Follow the change of 
	`wl-summary-mark-as-important', `wl-thread-set-flags', and so on.
	(wl-summary-mode-map): Follow the change of
	`wl-summary-mark-as-important', `wl-thread-set-flags', and so on.
	(wl-summary-detect-mark-position): Follow the variable name change.
	(wl-summary-set-flags-region): New function for the replacement of
	wl-summary-mark-as-important-region.
	(wl-summary-sync-marks): Sync all global-flags.
	(wl-summary-auto-select-msg-p): Use elmo-message-has-global-flag-p
	instead of elmo-message-flagged-p.
	(wl-summary-persistent-mark-string): Follow the variable name change;
	Put wl-summary-flag-mark if the message has global-flag.
	(wl-summary-target-mark-set-flags): Renamed from 
	wl-summary-target-mark-mark-as-important.
	(wl-summary-decide-flag): New function.
	(wl-summary-set-flags-internal): Renamed from
	wl-summary-mark-as-important-internal.
	(wl-summary-add-flags-internal): New function.
	(wl-summary-remove-flags-internal): Ditto.
	(wl-summary-set-flags): Renamed from wl-summary-mark-as-important.
	(wl-summary-mark-as-unimportant): Abolish.
	(wl-summary-move-spec-alist): Changed `important' to `digest'.
	(wl-summary-next-message): List flagged messages in the msgdb.

	* wl-score.el (wl-summary-score-update-all-lines): Use
	wl-summary-add-flags-internal instead of 

	* wl-mime.el (wl-mime-display-header): Follow the variable name change.

	* wl-message.el (wl-message-buffer-cur-display-type): Renamed
	from wl-message-buffer-cur-flag (To avoid misunderstanding).
	(wl-message-buffer-require-all-header): Renamed from
	wl-message-buffer-all-header-flag (Ditto).
	(wl-message-buffer-flag-indicator): New variable.
	(wl-message-redisplay): Changed local varibale name from `flag' to
	`display-type'; Set up wl-message-buffer-flag-indicator.
	(wl-message-buffer-display): Changed varibale name from `flag' to
	`display-type'.
	(wl-message-display-internal): Likewise.

	* wl-highlight.el (wl-highlight-demo-face): Define default background
	color.
	(wl-highlight-summary-line-face-spec): Highlight flagged messages.

	* wl-e21.el (wl-folder-internal-icon-list): Added file folder icon.

	* wl-demo.el (wl-demo-xpm-set-background): Abolish.
	(wl-demo-setup-properties): Renamed from
	`wl-demo-set-background-color'.
	(wl-demo): Follow the change above.
	
	* Version number is increased to 2.11.24.

2004-02-06  Hiroya Murata  <lapis-lazuli@pop06.odn.ne.jp>

	* wl-summary.el (wl-summary-toggle-thread): Call
	`wl-summary-rescan' with disable-thread as non-nil.
	(Thanks to KOBAYASHI Shinji <kobayashi_shinji@nifty.com>)

2004-02-01  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-demo.el (wl-demo-set-background-color)[Emacs21]: Set slant and
	foreground property of the face.
	(wl-demo-insert-text): Don't set up face property here.
	(wl-demo): Call wl-demo-set-background-color, anyway.

2004-02-01  Yoichi NAKAYAMA  <yoichi@geiin.org>

	* wl-vars.el (wl-demo-background-color): The value can be nil.

2004-01-29  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-summary.el (wl-summary-setup-mouse)[non-xemacs]: Bind mouse-wheel1
	to wl-summary-wheel-dispatcher.

	* wl-e21.el (wl-message-define-keymap): Bind mouse-wheel1 to
	wl-message-wheel-dispatcher.
	(wl-message-wheel-dispatcher): New function.
	(wl-summary-wheel-dispatcher): Ditto.

2004-01-28  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-action.el (wl-summary-target-mark-all): List messages which are
	not in the killed-list.

	* wl-summary.el (wl-summary-mark-as-important-internal): Cause an error
	only when the folder is 'flag/important.

	* wl-address.el (wl-complete-field-body): Complete if the last
	character is a space.

2004-01-28  Hiroya Murata  <lapis-lazuli@pop06.odn.ne.jp>

	* wl-folder.el (wl-folder-clear-entity-info): Use
	elmo-clear-hash-val.

	* wl-fldmgr.el (wl-fldmgr-rename): Set
	wl-folder-info-alist-modified as t.

2004-01-25  Yoichi NAKAYAMA  <yoichi@geiin.org>

	* wl-fldmgr.el (wl-fldmgr-unsubscribe): Avoid compile warning.

2004-01-21  Yoichi NAKAYAMA  <yoichi@geiin.org>

	* wl-folder.el (wl-folder-jump-to-current-entity): Cosmetic fix.
	(wl-folder-buffer-last-visited-entity-id): New buffer local
	variable.
	(wl-folder-revisit-last-visited-folder): New function.
	(wl-folder-mode-map): Bind it to "C-i".
	(wl-folder-set-current-entity-id): Set last visited folder.
	* wl-summary.el (wl-summary-exit): Ditto.

2004-01-15  Katsumi Yamaoka  <yamaoka@jpl.org>

	* wl-draft.el (wl-draft-highlight-and-recenter): Redraw frame just
	before calling `recenter' in order to cope with an XEmacs bug.

2004-01-12  Yoichi NAKAYAMA  <yoichi@geiin.org>

	* wl-vars.el (wl-folder-hierarchy-access-folders): Add "^'$"
	to the default value.

2004-01-11  Hiroya Murata  <lapis-lazuli@pop06.odn.ne.jp>

	* wl-summary.el (wl-summary-mark-as-read-all): Follow the API
	change.
	(wl-summary-sync-marks): Ditto.
	(wl-summary-mark-as-read-internal): Ditto.
	(wl-summary-mark-as-answered-internal): Ditto.
	(wl-summary-mark-as-important-internal): Ditto.
	(wl-summary-reply): Ditto.

	* wl-draft.el (wl-draft-kill): Use `elmo-folder-unset-flag'
	instead of `elmo-folder-unflag-answered'.

	* Version number is increased to 2.11.23.

	* wl-spam.el (wl-summary-exec-action-refile-with-register): Fixed
	the last change.

2004-01-11  Kenichi Okada  <okada@opaopa.org>

	* wl-spam.el (wl-summary-exec-action-refile-with-register):
	Specify "spam" or "good".

2004-01-11  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-spam.el (wl-summary-exec-action-spam): Call
	wl-folder-confirm-existence for spam folder.
	(wl-spam-setup): Bind "mk".

2004-01-07  Hiroya Murata  <lapis-lazuli@pop06.odn.ne.jp>

	* wl-action.el (wl-summary-refile-prev-destination): Avoid warning.

2004-01-07  Yoichi NAKAYAMA  <yoichi@geiin.org>

	* wl-action.el (wl-summary-set-action-refile): Don't proceed if
	destination folder is empty.

2004-01-07  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-summary.el (wl-summary-buffer-prev-copy-destination): Abolish.
	(wl-summary-mode-map): Bound "t\M-o", "m\M-o" and "r\M-o".

	* wl-action.el (wl-summary-refile-prev-destination): Rewrite.
	(wl-summary-refile-prev-destination-region): New function.
	(wl-thread-refile-prev-destination): Ditto.
	(wl-summary-target-mark-refile-prev-destination): Ditto.

2004-01-05  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-vars.el (wl-demo-image-filter-alist): Set default value to nil.
	(wl-demo-background-color): Changed default value.

	* wl-highlight.el (wl-highlight-demo-face): Changed default foreground
	color.

	* wl-demo.el (wl-demo-set-background-color): New function.
	(wl-demo): Call it.

2004-01-03  Yoichi NAKAYAMA  <yoichi@geiin.org>

	* wl-address.el (wl-address-delete): Avoid mis-deleting.
	* wl-address.el (wl-address-add-or-change): Don't add empty
	address.

2004-01-01  TAKAHASHI Kaoru  <kaoru@kaisei.org>

	* wl-demo.el (wl-demo-copyright-notice): Add 2004.

2003-12-26  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-vars.el (wl-demo-image-filter-alist): New variable
	(wl-demo-background-color): Ditto.

	* wl-demo.el (wl-demo-xpm-set-background): New function.
	(wl-demo-image-filter): Ditto.
	(wl-demo-insert-image)[XEmacs,Emacs21]: Use it.

	* wl-vars.el (wl-demo-icon-name-alist): New variable.

	* wl-demo.el (wl-demo-icon-name): Define as function.
	(wl-demo-insert-image): Use it.

2003-12-19  Tetsurou Okazaki  <okazaki@be.to>

	* wl-vars.el (wl-draft-mime-bcc-body): Customization type fix.

2003-12-18  Yoichi NAKAYAMA <yoichi@geiin.org>

	* wl-mime.el (wl-message-verify-pgp-nonmime): Remove kludge.

2003-12-14  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-action.el (wl-summary-delete-all-mark): Fix for "*".

2003-12-14  Hiroya Murata  <lapis-lazuli@pop06.odn.ne.jp>

	* wl-thread.el (wl-thread-mark-as-answered): New function.

	* wl-summary.el (wl-summary-mode-menu-spec): Add "Mark as
	answered" entry.
	(wl-summary-mode-map): Bind wl-summary-mark-as-answered-region to
	"r&" and wl-thread-mark-as-answered to "t&".
	(wl-summary-mark-as-important-region): Refine to toggle mark.
	(wl-summary-mark-as-answered-region): New function.
	(wl-summary-mark-as-answered-internal): Changed to optional 2nd
	and 3rd argument.
	(wl-summary-mark-as-important-internal): Likewise.

2003-12-08  Hiroya Murata  <lapis-lazuli@pop06.odn.ne.jp>

	* wl-template.el (wl-template-preview): New internal variable.
	(wl-template-preview-p): New function.
	(wl-template-show): Bind `wl-template-preview' as t.

2003-12-05  Hiroya Murata  <lapis-lazuli@pop06.odn.ne.jp>

	* wl-mime.el (wl-mime-combine-message/partial-pieces): Call
	`elmo-message-entity-field' with 3rd argument which is non-nil.

2003-12-04  Hiroya Murata  <lapis-lazuli@pop06.odn.ne.jp>

	* wl-mime.el (wl-mime-combine-message/partial-pieces): Fixed bug;
	Removed duplicate local bind `folder'.

2003-11-30  Hiroya Murata  <lapis-lazuli@pop06.odn.ne.jp>

	* wl-spam.el (wl-spam-folder): Renamed from `wl-spam-folder-name'.

2003-11-29  Hiroya Murata  <lapis-lazuli@pop06.odn.ne.jp>

	* wl-message.el (wl-message-buffer-cur-summary-buffer): Remove
	duplicate definition.

2003-11-29  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-util.el (wl-current-message-buffer): If wl-message-buffer is
	non-nil, use it; Don't fetch message if there's no message in the
	current cursor position.

2003-11-29  Yoichi NAKAYAMA  <yoichi@geiin.org>

	* wl-util.el (wl-region-exists-p): Use region-active-p.
	(wl-deactivate-region): New function.
	* wl-message.el (wl-message-redisplay): Deactivate region.

	* wl-summary.el (wl-summary-reply): Call
	`wl-summary-set-message-buffer-or-redisplay' instead of
	`wl-summary-redisplay-internal', don't move point.

2003-11-29  Hiroya Murata  <lapis-lazuli@pop06.odn.ne.jp>

	* wl-util.el (wl-region-exists-p): Remove duplicate definition.
	(wl-url-nntp): Use `wl-summary-jump-to-msg' instead of searching
	by regexp.

2003-11-27  Hiroya Murata  <lapis-lazuli@pop06.odn.ne.jp>

	* wl-spam.el (wl-spam-save-status): Dose not initialize processor
	if no need.

2003-11-22  Hiroya Murata  <lapis-lazuli@pop06.odn.ne.jp>

	* wl-spam.el (wl-spam-auto-check-folder-regexp-list): Changed
	default value to nil.
	(wl-spam-setup): Added `wl-summary-auto-check-spam' to
	`wl-summary-prepare-hook'; Replace refile action to
	`wl-summary-exec-action-refile-with-register'.

	* Version number is increased to 2.11.22.

2003-11-20  Hiroya Murata  <lapis-lazuli@pop06.odn.ne.jp>

	* wl-summary.el (wl-summary-detect-mark-position): Set
	`wl-summary-buffer-weekday-name-lang'.

2003-11-19  Tetsurou Okazaki  <okazaki@be.to>

	* wl-summary.el (wl-summary-prefetch-msg): Undo the last change.
	(wl-summary-mark-as-read-all): Ditto.
	(wl-summary-delete-messages-on-buffer): Ditto.
	(wl-summary-sync-update): Ditto.
	(wl-summary-mark-as-read-internal): Ditto.
	(wl-summary-mark-as-answered-internal): Ditto.
	(wl-summary-update-folder-info): Abolished.

2003-11-19  Hiroya Murata  <lapis-lazuli@pop06.odn.ne.jp>

	* wl-summary.el (wl-summary-mark-as-read-all): Use
	`wl-summary-update-folder-info' instead of
	`wl-folder-update-unread'.

2003-11-18  Tetsurou Okazaki  <okazaki@be.to>

	* wl-summary.el (wl-summary-update-folder-info): New function derived from
	`wl-summary-folder-info-update'.
	(wl-summary-delete-messages-on-buffer): Use `wl-summary-update-folder-info'
	instead of `wl-summary-folder-info-update'.
	(wl-summary-sync-update): Use `wl-summary-update-folder-info' instead of
	`wl-folder-set-folder-updated'.
	(wl-summary-mark-as-read-internal): Use `wl-summary-update-folder-info'
	instead of `wl-folder-update-unread'.
	(wl-summary-mark-as-answered-internal, wl-summary-prefetch-msg): Pass
	the value of `wl-summary-buffer-unread-count' for the second parameter of
	`wl-folder-update-unread'.

	* Version number is increased to 2.11.21.

2003-11-17  Tetsurou Okazaki  <okazaki@be.to>

	* wl-folder.el (wl-folder-entity-hashtb-set): Narrow the scope of
	a local variable.

2003-11-15  Hiroya Murata  <lapis-lazuli@pop06.odn.ne.jp>

	* wl-spam.el (wl-summary-mark-spam): Show message only if call
	interactively.

	* wl-summary.el (wl-summary-mark-as-important-internal): New
	internal function.
	(wl-summary-mark-as-important): Use it.
	(wl-summary-mark-as-unimportant): New function.
	(wl-summary-sync-marks): Follow the API change.

	* wl-score.el (wl-summary-score-update-all-lines): Ditto.

	* wl-mime.el (wl-summary-burst): Check target folder is writable.

2003-11-14  Tetsurou Okazaki  <okazaki@be.to>

	* wl-folder.el (wl-folder-update-unread): Re-indent.
	Narrow the scope of a local variable.

2003-11-12  Hiroya Murata  <lapis-lazuli@pop06.odn.ne.jp>

	* wl-addrmgr.el (wl-addrmgr-pickup-entry-list): New function.
	(wl-addrmgr-merge-entries): Ditto.
	(wl-addrmgr): Added to address entry which exists in draft buffer
	if no entry is in original.

2003-11-09  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-batch.el: New file.

2003-11-09  TAKAHASHI Kaoru  <kaoru@kaisei.org>

	* wl-vars.el (wl-use-semi): Remove unused variable.

2003-11-05  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-vars.el (wl-summary-new-cached-mark): Changed default value to
	"?".

2003-11-05  Hiroya Murata  <lapis-lazuli@pop06.odn.ne.jp>

	* wl-vars.el (wl-summary-new-uncached-mark): Renamed from
	wl-summary-new-mark.
	(wl-summary-new-cached-mark): New user option.
	(wl-summary-score-marks): Follow the change above.
	(wl-summary-auto-refile-skip-marks): Ditto.
	(wl-summary-incorporate-marks): Ditto.
	(wl-summary-expire-reserve-marks): Ditto.

	* wl-spam.el (wl-spam-auto-check-marks): Ditto.

	* wl-summary.el (wl-summary-detect-mark-position): Ditto.
	(wl-summary-persistent-mark-string): Distinguished between cached
	and uncached mark when the message is new.

2003-11-02  Hiroya Murata  <lapis-lazuli@pop06.odn.ne.jp>

	* wl-spam.el (wl-spam-domain): Renamed from
	`wl-spam-folder-guess-domain'.
	(wl-summary-exec-action-spam): Register as spam if domain of the
	source folder is good.
	(wl-summary-exec-action-refile-with-register): Register message if
	domain of the source folder is not undecided.

2003-10-31  Hiroya Murata  <lapis-lazuli@pop06.odn.ne.jp>

	* wl-summary.el (wl-summary-insert-thread): Fixed the logic to
	detect thread loop.

2003-10-27  Hiroya Murata  <lapis-lazuli@pop06.odn.ne.jp>

	* wl-spam.el (wl-spam-setup): Modify wl-summary-reserve-mark-list
	and wl-summary-skip-mark-list.

2003-10-26  Hiroya Murata  <lapis-lazuli@pop06.odn.ne.jp>

	* wl-spam.el (wl-summary-exec-action-spam): Fixed.

	* wl-vars.el (wl-summary-mark-action-list): Fixed type spec.

	* wl-spam.el (toplevel): Require wl-highlight.
	(wl-spam-auto-check-policy-alist): Abolish.
	(wl-spam-auto-check-folder-regexp-list): New user option.
	(wl-spam-auto-check-marks): Ditto.
	(wl-spam-mark-action-list): Ditto.
	(wl-highlight-summary-spam-face): New face.
	(wl-spam-auto-check-message-p): New function.
	(wl-spam-map-spam-messages): Fixed message.
	(wl-spam-register-spam-messages): Ditto.
	(wl-spam-register-good-messages): Ditto.
	(wl-summary-spam-map): Add and remove keybind.
	(wl-summary-target-mark-spam): Abolish.
	(wl-summary-refile-spam): Ditto.
	(wl-summary-test-spam): New function.
	(wl-summary-mark-spam): Ditto.
	(wl-summary-auto-check-spam): Follow the above change.
	(wl-summary-exec-action-spam): New function.
	(wl-summary-exec-action-refile-with-register): Fixed message.
	(wl-message-check-spam): New function.
	(wl-spam-setup): Ditto.
	(toplevel): Call it if this file is loaded interactivity.

	* Version number is increased to 2.11.20.

2003-10-25  Hiroya Murata  <lapis-lazuli@pop06.odn.ne.jp>

	* wl-spam.el (wl-spam-save-status): Call elmo-spam-save-status
	when new optional argument `force' is non nil or modified.

2003-10-21  Hiroya Murata  <lapis-lazuli@pop06.odn.ne.jp>

	* wl.el (toplevel): Require wl-spam when compile.
	(wl-save-status): Call wl-spam-save-status.

	* wl-spam.el (wl-spam-register-spam-messages): New function.
	(wl-spam-register-good-messages): Ditto.
	(wl-spam-save-status): Ditto.
	(wl-summary-mode-map): Bind
	wl-summary-target-mark-register-as-spam to "ms" and
	wl-summary-target-mark-register-as-good to "mn".
	(wl-summary-register-as-spam): Abolish optional argument; Use
	wl-spam-register-spam-messages.
	(wl-summary-register-as-spam-all): Use
	wl-spam-register-spam-messages.
	(wl-summary-register-as-good): Abolish optional argument; Use
	wl-spam-register-good-messages.
	(wl-summary-register-as-good-all): Use
	wl-spam-register-good-messages.
	(wl-summary-target-mark-register-as-spam): New funtion.
	(wl-summary-target-mark-register-as-good): Ditto.

2003-10-20  Hiroya Murata  <lapis-lazuli@pop06.odn.ne.jp>

	* wl-spam.el: New file.

2003-10-20  Hiroya Murata  <lapis-lazuli@pop06.odn.ne.jp>

	* wl-refile.el (wl-refile-guess): Added second argument `functions'.

	* wl-action.el (wl-auto-refile-guess-functions): New variable.
	(wl-summary-auto-refile): Call wl-refile-guess with
	wl-auto-refile-guess-functions instead of wl-refile-guess-by-rule.

2003-10-17  Hiroya Murata  <lapis-lazuli@pop06.odn.ne.jp>

	* wl-summary.el (wl-summary-pack-number): Call wl-summary-rescan
	with disable-thread argument non-nil.

2003-10-16  Hiroya Murata  <lapis-lazuli@pop06.odn.ne.jp>

	* wl-summary.el (wl-summary-rescan): Added optional argument
	disable-thread.
	(wl-summary-sync): Call wl-summary-rescan with argument
	disable-thread.
	(wl-summary-input-range): Added new range `rescan-thread'.

2003-10-16  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-util.el (wl-get-assoc-list-value): Fixed last change.

2003-10-16  Hiroya Murata  <lapis-lazuli@pop06.odn.ne.jp>

	* wl-summary.el (wl-thread-saved-entity-hashtb-internal): New
	internal variable.
	(wl-summary-rescan): Saved wl-thread-entity-hashtb; Bind
	wl-summary-search-parent-by-subject-regexp and
	wl-summary-divide-thread-when-subject-changed as nil.
	(wl-summary-insert-sequential): If entity is nil, nothing to do.
	(wl-summary-insert-thread): Search parent entity from
	wl-thread-saved-entity-hashtb-internal; Fixed logic to detect
	thread loop.

2003-10-15  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl.el (wl-check-environment): Don't check wl-draft-folder is file.

	* wl-vars.el (wl-folder-sync-range-alist): Changed default value.

	* wl-util.el (wl-require-update-all-folder-p): New function.
	(wl-get-assoc-list-value): Added `function' to match directive.
	(wl-collect-draft): Rewrite.

	* wl-summary.el (wl-summary-sync-update): Clear faces
	when both wl-summary-lazy-highlight and wl-summary-lazy-update-mark
	are non-nil.
	(wl-summary-get-sync-range): Call wl-get-assoc-list-value with match
	argument as function.
	(wl-summary-input-range): Ditto.

	* wl-folder.el (wl-draft-get-folder): New function.
	(wl-folder-get-elmo-folder): Consider draft folder.

	* wl-draft.el (wl-draft-buf-name, wl-draft-buffer-file-name): Abolish.
	(wl-draft-buffer-message-number): New buffer local variable.
	(wl-draft-folder-internal): New internal variable.
	(wl-draft-delete): Rewrite.
	(wl-draft-save): Ditto.
	(wl-draft-create-buffer): Use wl-draft-get-folder instead of
	wl-folder-get-elmo-folder.
	(wl-draft-config-info-operation): Ditto.
	(wl-jump-to-draft-folder): Ditto.
	(wl-draft-prepare-edit): Set up auto-save-file-name-transforms.
	(wl-draft-reedit): Rewrite.

	* Version number is increased to 2.11.19.
	
2003-10-09  Tetsurou Okazaki  <okazaki@be.to>

	* wl-summary.el (wl-summary-search-by-subject): Remove unused local
	variable.

2003-10-09  Hiroya Murata  <lapis-lazuli@pop06.odn.ne.jp>

	* wl-summary.el (wl-summary-prefetch-msg): Bind wl-message-entity;
	Use ignore-errors instead of unwind-protect.

2003-10-03  Tetsurou Okazaki  <okazaki@be.to>

	* wl-thread.el (wl-thread-delete-message): Rewrite the procedure
	for updating `wl-thread-entity-list'.

2003-10-02  Tetsurou Okazaki  <okazaki@be.to>

	* wl-thread.el (wl-thread-delete-message): Omit redundant nil
	parameter from calling `wl-thread-entity-get-older-brothers' and
	`wl-thread-entity-get-younger-brothers'.
	Replace nested `append' with a single one.

2003-10-02  Hiroya Murata  <lapis-lazuli@pop06.odn.ne.jp>

	* wl-summary.el (wl-summary-mode): Don't use the return value of
	`make-local-hook'.

2003-10-02  Tetsurou Okazaki  <okazaki@be.to>

	* wl-thread.el (wl-thread-entity-get-older-brothers): Use `let'
	instead of `let*'.
	(wl-thread-delete-message): Likewise.  Split and narrow the scope
	of local variables.

2003-10-01  Hiroya Murata  <lapis-lazuli@pop06.odn.ne.jp>

	* wl-summary.el (wl-summary-buffer-window-scroll-functions):
	Renamed from wl-summary-window-scroll-functions.
	(wl-summary-window-scroll-functions): Don't set to variable.
	(wl-summary-display-top): Use run-hooks.
	(wl-summary-display-bottom): Ditto.
	(wl-summary-toggle-disp-msg): Ditto.
	(wl-summary-mode): Set wl-summary-buffer-window-scroll-functions;
	Use it instead of wl-summary-window-scroll-functions.
	(wl-summary-goto-folder-subr): Don't call
	wl-summary-window-scroll-functions, use
	wl-summary-buffer-window-scroll-functions instead.

2003-09-30  Hiroya Murata  <lapis-lazuli@pop06.odn.ne.jp>

	* wl-summary.el (wl-summary-mode): Use make-local-hook instead of
	make-local-variable.

2003-09-29  Yuuichi Teranishi  <teranisi@ns.templewest.net>

	* wl-summary.el (wl-summary-update-mark-and-highlight-window): Call
	set-buffer-modified-p.
	(wl-summary-display-top): Call wl-summary-window-scroll-functions.
	(wl-summary-display-bottom): Ditto.
	(wl-summary-toggle-disp-msg): Ditto.

2003-09-29  Hiroya Murata  <lapis-lazuli@pop06.odn.ne.jp>

	* wl-score.el (wl-score-ov-entity-get): Treat extra field.

	* wl-summary.el (wl-summary-prefetch-msg): Fixed.
	(wl-summary-forward): Use elmo-message-entity-field instead of
	elmo-message-field.

	* wl-summary.el (wl-summary-update-mark-and-highlight-window): Fixed.

2003-09-28  Hiroya Murata  <lapis-lazuli@pop06.odn.ne.jp>

	* wl-summary.el (wl-summary-window-scroll-functions): No use
	`append'.

2003-09-28  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-summary.el (wl-summary-update-mark-and-highlight-window): New
	function.
	(wl-summary-window-scroll-functions): Call it when both
	wl-summary-lazy-highlight and wl-summary-lazy-update-mark are non-nil.
	(wl-summary-temp-mark): Added optional argument number.
	(wl-summary-message-mark): Added optional argument flag.
	(wl-summary-persistent-mark): Added optional argument number and flag.
	(wl-summary-update-persistent-mark): Ditto.
	(wl-summary-update-status-marks): Set "r" for interactive spec.

	* wl-highlight.el (wl-highlight-summary-current-line): Added optional
	argument number and flag.

	* wl-action.el (wl-summary-registered-temp-mark): 
	Do nothing when wl-summary-buffer-temp-mark-list is nil.

2003-09-28  Hiroya Murata  <lapis-lazuli@pop06.odn.ne.jp>

	* wl-summary.el (wl-summary-buffer-unsync-mark-number-list): New
	internal variable (buffer local).
	(wl-summary-window-scroll-functions): New function.
	(wl-summary-mode): Use it insteaf of wl-summary-lazy-highlight.
	(wl-summary-rescan): Set wl-summary-buffer-unsync-mark-number-list
	as nil.
	(wl-summary-update-status-marks): Added arguments beg, end and
	check.
	(wl-summary-update-mark-window): Use function.
	(wl-summary-sync-update): Follow the change above.
	(wl-summary-switch-to-clone-buffer): Copy
	wl-summary-buffer-unsync-mark-number-list.
	(wl-summary-goto-folder-subr): Set
	wl-summary-buffer-unsync-mark-number-list and
	use wl-summary-window-scroll-functions instead of
	wl-summary-lazy-highlight.

	* wl-vars.el (wl-summary-lazy-update-mark): New user option.

2003-09-27  Hiroya Murata  <lapis-lazuli@pop06.odn.ne.jp>

	* wl-summary.el (wl-summary-sync-update): Undo last chagne.

	* wl-summary.el (wl-summary-update-persistent-mark): Call
	wl-summary-set-message-modified.

	* wl-summary.el (wl-summary-sync-update): Don't call
	wl-summary-update-status-marks.

	* Version number is increased to 2.11.18.

2003-09-26  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-message.el (wl-message-prev-page): Use save-selected-window.
	(wl-message-next-page): Ditto.

2003-09-26  Tetsurou Okazaki  <okazaki@be.to>

	* wl-action.el (wl-summary-collect-numbers-region): Remove unused
	local variable.  Change the order of a collected list into the
	same as the specified range.  Remove nil from a collected list.

2003-09-26  Hiroya Murata  <lapis-lazuli@pop06.odn.ne.jp>

	* wl-summary.el (wl-summary-insert-headers): Set visible-only
	argument for elmo-folder-list-messages.

2003-09-24  Hiroya Murata  <lapis-lazuli@pop06.odn.ne.jp>

	* wl-score.el (wl-summary-score-update-all-lines): Follow the API
	change (wl-summary-count-unreads return a list instead of a cons
	cell).

2003-09-24  Tetsurou Okazaki  <okazaki@be.to>

	* wl-summary.el (wl-summary-delete-messages-on-buffer): Use
	`wl-summary-folder-info-update'.

2003-09-23  Hiroya Murata  <lapis-lazuli@pop06.odn.ne.jp>

	* wl-summary.el (wl-summary-set-message-modified): No use
	elmo-folder-set-message-modified and wl-summary-set-mark-modified.
	(wl-summary-set-mark-modified): Abolish.
	(wl-summary-mark-modified-p): Ditto.
	(wl-summary-save-view): Follow the change above.

	* wl-expire.el (wl-summary-expire): Likewise.

2003-09-22  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-summary.el (wl-summary-detect-mark-position): Use
	modb-entity-handler.
	(wl-summary-save-view-cache): Don't cause an error when dir is nil.

	* Version number is increased to 2.11.17.

2003-09-21  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-summary.el (wl-summary-overview-entity-compare-by-from): Decode
	entity field value.
	(wl-summary-prefetch-msg): Ditto.
	(wl-summary-print-message-with-ps-print): Ditto.

2003-09-21  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-summary.el (wl-summary-detect-mark-position): Use generic msgdb
	for dummy entity.
	(wl-summary-insert-thread): Use elmo-message-entity-field.
	(wl-summary-update-thread): Use elmo-message-entity-field and
	elmo-message-entity-number.
	(wl-summary-line-number):  Use elmo-message-entity-number.
	(wl-summary-line-size): Use elmo-message-entity-field.
	(wl-summary-line-subject): Ditto.
	(wl-summary-line-from): Ditto.
	(wl-summary-line-attached): Ditto.
	(wl-summary-create-line): Ditto.
	(wl-summary-create-line): Use elmo-message-entity-number.
	(wl-summary-print-message-with-ps-print): Use
	elmo-message-entity-field.

2003-09-21  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-summary.el (wl-summary-detect-mark-position): Follow the API
	change in elmo-msgdb-make-message-entity.
	(wl-summary-buffer-set-folder): Don't call
	wl-summary-detect-mark-position here.
	(wl-summary-rescan): Call elmo-message-entity-number.
	(wl-summary-sync-update): Ditto.
	(wl-summary-goto-folder-subr): Call wl-summary-detect-mark-position.

	* wl-score.el (wl-score-header-index): Redefine 2th element.
	(wl-score-overview-entity-get-extra): Abolish.
	(wl-score-ov-entity-get): Rewrite.
	(wl-score-string-index<, wl-score-string-func<): Abolish.
	(wl-score-string<): New function.
	(wl-score-string-sort): Use it.

	* wl-refile.el (wl-refile-guess-by-history): Use
	elmo-message-entity-field.
	(wl-refile-guess-by-from): Ditto.
	(wl-refile-guess-by-msgid): Ditto.

	* Version number is increased to 2.11.16.

2003-09-21  Yoichi NAKAYAMA  <yoichi@geiin.org>

	* wl-folder.el (wl-folder-confirm-existence): Don't call
	file-exists-p if msgdb-path is nil.
	* wl-summary.el, wl-draft.el, wl-action.el: Rename
	`wl-read-folder-hist' to `wl-read-folder-history'.

2003-09-20  TAKAHASHI Kaoru  <kaoru@kaisei.org>

	* wl-draft.el (wl-draft-kill): Use `yes-or-no-p' instead of
	`y-or-n-p'.

2003-09-19  Hiroya Murata  <lapis-lazuli@pop06.odn.ne.jp>

	* wl-score.el (wl-score-headers): Don't use
	elmo-folder-do-each-message-entity.

	* Version number is increased to 2.11.15.

2003-09-19  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-summary.el (wl-summary-delete-all-msgs): Use
	elmo-folder-move-messages instead of elmo-folder-delete-messages
	and elmo-folder-detach-messages.
	(wl-summary-sync-marks): Use elmo-folder-list-global-flag-messages.

	* wl-expire.el (wl-expire-delete): Ditto.
	(wl-expire-refile-with-copy-reserve-msg): Ditto.

2003-09-18  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-vars.el (wl-message-use-header-narrowing): New user option.
	(wl-message-header-narrowing-fields): Ditto.
	(wl-message-header-narrowing-lines): Ditto.
	(wl-message-header-narrowing-string): Ditto.

	* wl-summary.el (wl-summary-mode-map): Bind
	wl-summary-toggle-header-narrowing to "C-cC-f".
	(wl-summary-toggle-header-narrowing): New function.

	* wl-message.el (wl-message-buffer-create): Call
	wl-message-header-narrowing-setup.
	(wl-message-redisplay): Call wl-message-header-narrowing.
	(wl-message-header-narrowing): New function.
	(wl-message-header-narrowing-map): New keymap.
	(wl-message-header-narrowing-widen-map): New keymap.
	(wl-message-header-narrowing-again-at-mouse): New function.
	(wl-message-header-narrowing-1): Ditto.
	(wl-message-header-narrowing-widen-at-mouse): Ditto.
	(wl-message-header-narrowing-setup): Ditto.
	(wl-message-header-narrowing-toggle): Ditto.
	
	* wl-highlight.el (wl-message-header-narrowing-face): New face.

	* wl-vars.el (wl-folder-sync-range-alist): Set default range for
	'flag as all.
	(wl-use-flag-folder-help-echo): New user option.

	* wl-summary.el (wl-summary-detect-mark-position): Bind 
	wl-summary-highlight as nil.
	(wl-summary-set-mark-modified): Follow the API change.
	(wl-summary-mark-modified-p): Ditto.
	(wl-summary-mark-as-read-all): Ditto.
	(wl-summary-sync-marks): Don't call
	elmo-folder-list-messages-with-global-mark.
	(wl-summary-mark-as-read-internal): Follow the API change.
	(wl-summary-mark-as-answered-internal): Ditto.
	(wl-summary-mark-as-important): Cause an error when 'flag folder;
	Follow the API change.
	(wl-summary-create-line): Call with number argument.
	(wl-summary-reply): Follow the API change.

	* wl-highlight.el (wl-highlight-summary-line-flag-folder): New
	function.
	(wl-highlight-summary-line-string): Call it when
	wl-use-flag-folder-help-echo is non-nil.
	(wl-highlight-summary-current-line): Ditto.
	(elmo-flag-folder-referrer): Added autoload setting.

	* wl-draft.el (wl-draft-kill): Follow the API change.

	* Version number is increased to 2.11.14.
	
2003-09-17  Hiroya Murata  <lapis-lazuli@pop06.odn.ne.jp>

	* wl-draft.el (wl-draft-do-fcc): Follow the API change.

2003-09-15  Hiroya Murata  <lapis-lazuli@pop06.odn.ne.jp>

	* Version number is increased to 2.11.13.

2003-09-14  Hiroya Murata  <lapis-lazuli@pop06.odn.ne.jp>

	* wl-draft.el (wl-draft-previous-history-element): Fixed
	unbalanced parenthesis and bind unbound local variables.

2003-09-14  Yoichi NAKAYAMA  <yoichi@geiin.org>

	* wl-draft.el (wl-draft-previous-history-element): New function.
	(wl-draft-next-history-element): Ditto.
	* wl-e21.el, wl-xmas.el, wl-mule.el (wl-draft-key-setup): Bind
	them to M-p and M-n.

2003-09-14  Hiroya Murata  <lapis-lazuli@pop06.odn.ne.jp>

	* Version number is increased to 2.11.12.

2003-09-14  Yoichi NAKAYAMA  <yoichi@geiin.org>

	* wl-draft.el (wl-draft-hide): Select buffer-window.

2003-09-13  Mito  <mito@mxa.nes.nec.co.jp>

	* wl-summary.el (wl-summary-narrow-to-region): New function.
	(wl-summary-prefetch-region-no-mark, wl-summary-mark-as-read-region)
	(wl-summary-mark-as-unread-region, wl-summary-mark-as-important-region)
	(wl-summary-save-region): Use it.
	* wl-action.el (wl-summary-collect-numbers-region)
	(wl-summary-unmark-region, wl-summary-mark-region-subr): Ditto.

2003-09-13  Hiroya Murata  <lapis-lazuli@pop06.odn.ne.jp>

	* wl-folder.el (wl-folder-count-incorporates): Don't use
	`elmo-msgdb-mark-load'

	* Version number is increased to 2.11.11.

2003-09-13  Yoichi NAKAYAMA  <yoichi@geiin.org>

	* wl-draft.el (wl-draft-fcc-append-read-folder-hist): New variable.
	(wl-draft-do-fcc): Append fcc'ed folder to wl-read-folder-hist.

2003-09-06  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-mime.el (wl-draft-preview-message): Use `format' to print value.

2003-09-05  Hiroya Murata  <lapis-lazuli@pop06.odn.ne.jp>

	* Version number is increased to 2.11.10.

2003-09-04  Hiroya Murata  <lapis-lazuli@pop06.odn.ne.jp>

	* wl-mime.el (wl-draft-attribute-value): Fixed.

2003-09-03  Hiroya Murata  <lapis-lazuli@pop06.odn.ne.jp>

	* wl-util.el (wl-copy-local-variables): New function.

	* wl-mime.el (wl-draft-attribute-recipients): New function.
	(wl-draft-attribute-envelope-from): Ditto.
	(wl-draft-attribute-smtp-posting-server): Ditto.
	(wl-draft-attribute-smtp-posting-port): Ditto.
	(wl-draft-attribute-value): Ditto.
	(wl-draft-preview-message): Use it to get value for
	attributes. Reflect result of `wl-draft-config'.

	* wl-summary.el (wl-summary-target-mark-mark-as-read): Fixed typo
	and call `wl-summary-mark-as-read' before to call
	`wl-summary-unset-mark'.
	(wl-summary-target-mark-mark-as-unread): Likewise.
	(wl-summary-target-mark-mark-as-important): Don't bind mlist.

2003-09-02  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-mime.el (wl-draft-preview-message): Use actual value for
	attributes; Fix for small window.

2003-08-28  Hiroya Murata  <lapis-lazuli@pop06.odn.ne.jp>

	* wl-refile.el (wl-refile-get-field-value): Call
	`elmo-message-entity-field' with 3rd argument is non-nil.

2003-08-26  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-vars.el (wl-draft-preview-attributes): New user option.
	(wl-draft-preview-attributes-list): Ditto.
	(wl-draft-preview-attributes-buffer-lines): Ditto.
	(wl-draft-preview-attributes-buffer-name): Ditto.

	* wl-mime.el (wl-draft-preview-message): Display attributes.

2003-08-26  Hiroya Murata  <lapis-lazuli@pop06.odn.ne.jp>

	* wl-summary.el (wl-summary-detect-mark-position): Bind
	wl-summary-flag-priority-list to '(new).

2003-08-23  Hiroya Murata  <lapis-lazuli@pop06.odn.ne.jp>

	* wl-highlight.el (wl-highlight-summary-line-face-spec): New
	funtion.
	(wl-highlight-summary-line-string): Use it.
	(wl-highlight-summary-current-line): Ditto.

2003-08-23  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-summary.el (wl-summary-update-persistent-mark): Highlight the
	line even when the mark string is not changed.

	* wl-thread.el (wl-thread-update-line-on-buffer-sub): Follow the
	argument change in the wl-summary-create-line.
	(wl-thread-insert-entity-sub): Ditto.

	* wl-summary.el (wl-summary-detect-mark-position): Follow the
	argument change in the wl-summary-create-line.
	(wl-summary-insert-sequential): Ditto.
	(wl-summary-update-thread): Ditto.
	(wl-summary-persistent-mark-string): New inline function.
	(wl-summary-message-mark): Use it.
	(wl-summary-create-line): Abolish argument wl-persistent-mark
	and added wl-flags, wl-cached.

	* wl-highlight.el (wl-highlight-summary-line-string): Changed argument
	mark to flags.
	(wl-highlight-summary-current-line): Decide the face not by the 
	persistent mark but flags.

2003-08-22  Hiroya Murata  <lapis-lazuli@pop06.odn.ne.jp>

	* wl-vars.el (wl-summary-new-mark, wl-summary-important-mark,
	wl-summary-unread-uncached-mark, wl-summary-unread-cached-mark,
	wl-summary-read-uncached-mark): Revive.
	(wl-summary-answered-cached-mark,
	wl-summary-answered-uncached-mark): New user option.
	(wl-summary-score-marks): Follow the change above.
	(wl-summary-auto-refile-skip-marks): Ditto.
	(wl-summary-incorporate-marks): Ditto.
	(wl-summary-expire-reserve-marks): Ditto.
	(wl-summary-flag-priority-list): New user option.

	* wl-summary.el (wl-summary-sync-marks): Follow the variable name
	changes.
	(wl-summary-auto-select-msg-p): Use elmo-message-flagged-p instead
	of elmo-message-mark.
	(wl-summary-mark-as-read-internal): Ditto.
	(wl-summary-mark-as-answered): Ditto.
	(wl-summary-mark-as-important): Ditto.
	(wl-summary-redisplay-internal): Ditto.
	(wl-summary-redisplay-no-mime-internal): Ditto.
	(wl-summary-message-mark): New function.
	(wl-summary-insert-sequential): Use wl-summary-message-mark
	instead of elmo-message-mark.
	(wl-summary-update-thread): Ditto.
	(wl-summary-persistent-mark): Ditto.
	(wl-summary-cursor-move-surface): Use elmo-message-accessible-p
	instead of elmo-message-mark.

	* wl-thread.el (wl-thread-update-line-on-buffer-sub): Use
	wl-summary-message-mark instead of elmo-message-mark.
	(wl-thread-insert-entity-sub): Ditto.
	(wl-thread-get-children-msgs-uncached): Ditto.

	* wl-highlight.el (wl-highlight-summary-line-string): Follow the
	variable name changes.
	(wl-highlight-summary-current-line): Ditto.

	* wl-action.el (wl-summary-no-auto-refile-message-p): Use
	wl-summary-message-mark instead of elmo-message-mark.

	* wl-expire.el (wl-expire-message-p): Ditto.

	* wl-score.el (wl-score-headers): Ditto.

	* Version number is increased to 2.11.9.

	* wl-summary.el (wl-summary-buffer-msgdb): Abolish.
	(wl-summary-sync-update): Follow the change above.
	(wl-summary-switch-to-clone-buffer): Ditto.
	(wl-summary-open-folder): Ditto.

2003-08-20  Hiroya Murata  <lapis-lazuli@pop06.odn.ne.jp>

	* wl-summary.el (wl-summary-cursor-move-surface): Don't skip
	`elmo-msgdb-answered-cached-mark' when the folder is unplugged.

	* Version number is increased to 2.11.8.

	* wl-summary.el (wl-summary-buffer-msgdb): Abolish.

	* wl-expire.el (wl-expire-refile): Follow the API change on
	`elmo-folder-move-messages'.
	(wl-expire-refile-with-copy-reserve-msg): Ditto.

	* wl-action.el (wl-summary-move-mark-list-messages): Ditto.
	(wl-summary-exec-action-refile): Ditto.
	(wl-summary-exec-action-copy): Ditto.
	(wl-summary-no-auto-refile-message-p): No use
	`wl-summary-buffer-msgdb'.
	(wl-summary-auto-refile): Ditto.

2003-08-19  Yoichi NAKAYAMA  <yoichi@geiin.org>

	* wl-summary.el (wl-summary-sync): Fix regexp for last: and first:.

2003-08-19  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-summary.el (wl-summary-sync): Treat no-sync.

	* wl-vars.el (wl-folder-sync-range-alist): Removed first: and last:.
	(wl-default-sync-range): Ditto.

2003-08-18  Hiroya Murata  <lapis-lazuli@pop06.odn.ne.jp>

	* wl-refile.el (wl-refile-subject-learn): Call
	`elmo-message-entity-field' with 3rd argument is non-nil.
	(wl-refile-guess-by-subject): Use `elmo-message-entity-field'
	instead of `elmo-msgdb-overview-entity-get-subject'.

2003-08-12  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-summary.el (wl-summary-goto-folder-subr): Rescan if
	scan-type is rescan.
	(wl-summary-delete-all-temp-marks): Remove scored mark too when
	new optional argument force is non-nil.
	(wl-summary-save-view-cache): Call it with force argument non-nil.

	* wl-action.el (wl-summary-unset-mark): Added optional argument FORCE.

2003-08-12  Hiroya Murata  <lapis-lazuli@pop06.odn.ne.jp>

	* wl-action.el (wl-summary-print-argument): Fixed last change.

2003-08-11  Hiroya Murata  <lapis-lazuli@pop06.odn.ne.jp>

	* wl-summary.el (wl-summary-target-mark-mark-as-read): Fixed and
	simplified.
	(wl-summary-target-mark-mark-as-unread): Likewise.
	(wl-summary-target-mark-mark-as-important): Likewise.

2003-08-11  Yoichi NAKAYAMA  <yoichi@geiin.org>

	* wl-thread.el (wl-thread-msg-mark-as-important): Abolished.
	* wl-summary.el (wl-summary-mark-as-important): Arranged.
	(wl-summary-mark-as-important-region): Change accordingly.
	(wl-summary-target-mark-mark-as-important): Ditto.

2003-08-09  Hiroya Murata  <lapis-lazuli@pop06.odn.ne.jp>

	* wl-vars.el (wl-summary-print-argument-within-window): New variable.

	* wl-action.el (wl-summary-print-argument): Print argument to
	right side of window if `wl-summary-print-argument-within-window'
	is non-nil.

2003-08-09  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-action.el (wl-summary-set-mark): Use
	`wl-summary-message-visible-p' to check visibility of the message
	and jump to message only when the message line is visible and have
	different number; Call wl-summary-unset-mark with number argument.
	(wl-summary-unset-mark): 
	Use `wl-summary-message-visible-p'
	to check visibility of the message and jump to message only when
	the message line is visible and have different number;

2003-08-09  Hiroya Murata  <lapis-lazuli@pop06.odn.ne.jp>

	* Version number is increased to 2.11.7.

	* wl.el (wl-check-variables-2): Don't check wl-summary-line-format
	and wl-folder-summary-line-format.

	* wl-summary.el (wl-summary-message-visible-p): New inline function.
	(wl-summary-put-temp-mark): Rename from wl-summary-mark-line.
	(wl-summary-set-score-mark): Use it.
	(wl-summary-target-mark-mark-as-read): Ditto.
	(wl-summary-target-mark-mark-as-unread): Ditto.
	(wl-summary-target-mark-mark-as-important): Ditto.
	(wl-summary-target-mark-msgs): Simplified.
	(wl-summary-detect-mark-position): Fixed problem when
	summary-line-format no contain persisten/temp mark spec.
	(wl-summary-temp-mark): Ditto.
	(wl-summary-persistent-mark): Ditto.
	(wl-summary-update-persistent-mark): Ditto.

	* wl-action.el (wl-summary-set-mark): Ditto.
	(wl-summary-unset-mark): Ditto.
	All other related portions are changed.

2003-08-07  Yuuichi Teranishi  <teranisi@gohome.org>

	* Version number is increased to 2.11.6.

2003-08-05  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-util.el (wl-current-message-buffer): Define as function;
	Don't use the value of wl-messge-buffer.

	* wl-summary.el (wl-summary-redisplay-no-mime-internal): Update
	persistent mark.

	* wl-mime.el (wl-draft-yank-current-message-entity): If there's
	no current message, cause an error.

2003-08-03  Hiroya Murata  <lapis-lazuli@pop06.odn.ne.jp>

	* wl-summary.el (wl-summary-set-message-modified): Use
	elmo-folder-set-message-modified instead of
	elmo-folder-set-message-modified-internal.

2003-08-03  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-summary.el (wl-summary-sync): Call wl-summary-sync-marks
	interactively.
	(wl-summary-sync): nokill->entirely.
	(wl-summary-sync-marks): Fixed message.
	(wl-summary-input-range): Added mark, nokill->entirely.

	* wl-score.el (wl-summary-score-update-all-lines): Set expunged
	messages as read.

2003-08-02  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-summary.el (wl-summary-input-range): Abolish all-noscore and
	update-noscore.
	(wl-summary-sync): Follow the change above.

2003-08-02  Hiroya Murata  <lapis-lazuli@pop06.odn.ne.jp>

	* wl-action.el (wl-summary-target-mark-all): Use
	elmo-folder-list-messages.

2003-08-02  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-summary.el (wl-summary-rescan): Added argument disable-kill
	(wl-summary-rescan): Set wl-summary-scored as nil.
	(wl-summary-sync-force-update): Follow the change above.
	(wl-summary-sync): Ditto.
	(wl-summary-sync-update): Added argument disable-killed.
	(wl-summary-insert-headers): Set visible-only argument for
	elmo-folder-list-messages.
	(wl-summary-input-range): Added update-nokill, update-noscore,
	all-nokill, all-noscore and mark.

	* Version number is increased to 2.11.5.

	* wl-draft.el (wl-draft): Set buffer-undo-list as nil.

2003-08-01  Yoichi NAKAYAMA  <yoichi@geiin.org>

	* wl-summary.el (wl-summary-prefetch-msg): Update persistent mark.
	(wl-summary-prefetch-region-no-mark): Change accordingly.
	* wl-action.el (wl-summary-exec-action-prefetch): Ditto.

2003-07-31  Yoichi NAKAYAMA  <yoichi@geiin.org>

	* wl-address.el (wl-complete-field-to): Abolished.
	(wl-complete-address): Completion function for completing-read.
	* wl-action.el (wl-summary-get-resend-address): Use it.

	* wl-summary.el (wl-summary-update-persistent-mark): Renamed from
	wl-summary-update-mark and abolish unused argument.
	(wl-summary-prefetch-region-no-mark, wl-summary-mark-as-read-all)
	(wl-summary-delete-cache, wl-summary-resume-cache-status)
	(wl-summary-update-status-marks, wl-summary-mark-as-read-internal)
	(wl-summary-mark-as-important, wl-summary-redisplay-internal)
	(wl-summary-mark-as-answered-internal, wl-summary-reply): Use it.
	* wl-draft.el (wl-draft-kill): Ditto.

	* wl-summary.el: Remove unused binding of case-fold-search.
	(wl-summary-replace-status-marks): Abolished.

2003-07-29  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-action.el (wl-summary-set-mark): Cause an error when no message
	is specified or folder length is zero.

2003-07-29  Hiroya Murata  <lapis-lazuli@pop06.odn.ne.jp>

	* wl-expire.el (wl-folder-expire-current-entity): Specify folder type.
	(wl-folder-archive-current-entity): Ditto.

2003-07-28  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-summary.el (wl-summary-update-mark): Ignore errors while
	retrieving message mark.
	(wl-summary-redisplay-internal): Ditto.

	* wl-message.el (wl-message-buffer-display): Ignore errors while
	retrieving message-id field.

	* wl-expire.el (wl-summary-expire): Fixed 2nd argument for `wl-append'.
	(Reported by Shinichiro HIDA <shinichiro@stained-g.net>)
	(wl-expire-refile-with-copy-reserve-msg): Follow the change in the
	order of the arguments for `wl-expire-message-p'.
	(Reported by Shinichiro HIDA <shinichiro@stained-g.net>)

	* wl-summary.el (wl-summary-target-mark-reply-with-citation): 
	Check return value of wl-summary-reply.
	(wl-summary-reply): Recover window configuration when an error occured.

2003-07-27  Yoichi NAKAYAMA  <yoichi@geiin.org>

	* wl-summary.el (wl-summary-resend-message): Abolished, the
	feature is inherited by wl-summary-resend (put resend mark).

2003-07-27  Hiroya Murata  <lapis-lazuli@pop06.odn.ne.jp>

	* wl-summary.el (wl-summary-toggle-disp-msg): Set
	wl-message-buffer to nil when the message is hide.

2003-07-26  Hiroya Murata  <lapis-lazuli@pop06.odn.ne.jp>

	* .cvsignore: New file.

2003-07-26  Yoichi NAKAYAMA  <yoichi@geiin.org>

	* wl-action.el (wl-summary-action-docstring): Add more info.
	(wl-summary-target-mark, wl-summary-target-mark-region): Remove
	duplicate definition.
	(wl-summary-define-mark-action): Functions wl-summary-*-region
	keep current position.
	(wl-summary-unregister-target-mark): Store result to the variable.

2003-07-24  Yuuichi Teranishi  <teranisi@gohome.org>

	* Version number is increased to 2.11.4.

2003-07-24  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-summary.el (wl-summary-cleanup-temp-marks): Use
	wl-summary-delete-all-temp-marks.
	(wl-summary-delete-all-temp-marks-on-buffer): Abolish.

	* wl-action.el (wl-summary-set-mark): Changed terminology
	refile-destination -> action-argument.
	(wl-summary-unset-mark): Ditto.
	(wl-summary-remove-argument): Ditto.
	(wl-summary-print-argument): Ditto.

	* wl-thread.el (wl-thread-update-line-on-buffer-sub): Ditto.
	(wl-thread-remove-argument-region): Ditto.
	(wl-thread-print-argument-region): Ditto.
	(wl-thread-close): Ditto.
	(wl-thread-open): Ditto.

	* wl-highlight.el (wl-highlight-action-argument-face): Ditto.
	(wl-highlight-refile-destination-face is abolished)
	(wl-highlight-action-argument-string): Ditto.
	(wl-highlight-summary-current-line): Highlight action argument.

	* wl-highlight.el (wl-highlight-summary-deleted-face): Changed default
	color for light backgrounds.
	(wl-highlight-summary-answered-face): Ditto.

2003-07-22  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-summary.el (wl-summary-rescan): Use numbers in the msgdb.

	* wl-score.el (wl-summary-score-update-all-lines): Use
	wl-summary-set-mark.
	(wl-summary-score-update-all-lines): Kill expunged messages.

	* wl-expire.el (wl-expire-hide): Use elmo-folder-kill-messages.

2003-07-21  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-score.el (wl-summary-score-update-all-lines): Don't use msgdb
	directly.
	(wl-score-overview-entity-get-lines): Ditto.
	(wl-score-overview-entity-get-xref): Ditto.
	(wl-score-get-latest-msgs): Ditto.
	(wl-summary-rescore): Ditto.

	* wl-summary.el (wl-summary-mode-map): Bind wl-summary-mark-as-answered
	to "&".
	(wl-summary-mark-as-answered-internal): New inline function.
	(wl-summary-mark-as-answered): New function.
	(wl-summary-mark-as-unanswered): Ditto.
	(wl-summary-sync-marks): Modified for answered-mark synching.

2003-07-20  Hiroya Murata  <lapis-lazuli@pop06.odn.ne.jp>

	* wl-action.el (wl-summary-set-mark): Fixed last change.

2003-07-20  Yuuichi Teranishi  <teranisi@ns.templewest.net>

	* wl-summary.el (wl-summary-mark-as-read-internal): Fixed the
	behavior of wl-summary-unread-message-hook
	(Pointed out by akira yamada <akira@arika.org>).

2003-07-19  Hiroya Murata  <lapis-lazuli@pop06.odn.ne.jp>

	* wl-e21.el (wl-summary-toolbar): Follow the rename of
	wl-summary-delete.
	* wl-xmas.el (wl-summary-toolbar): Ditto.

	* wl-action.el (wl-summary-set-mark): Don't override current
	temp-mark.

	* wl-refile.el (wl-refile-get-field-value): Fixed and simplified.

2003-07-19  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-refile.el (wl-refile-learn): Don't use msgdb.
	(wl-refile-msgid-learn): Ditto.
	(wl-refile-get-field-value): Ditto.

	* wl-mime.el (wl-mime-combine-message/partial-pieces): Don't use msgdb.

	* wl-expire.el (wl-expire-message-p): Renamed from wl-expire-msg-p.
	(wl-expire-delete-reserved-messages): Renamed from
	wl-expire-reserve-marked-msgs-from-list.
	(wl-expire-delete): Removed argument `msgdb'.
	(wl-expire-refile): Ditto.
	(wl-expire-refile-with-copy-reserve-msg): Ditto.
	(wl-expire-archive-number-delete-old): Ditto; Use folder instead of
	mark-alist as argument.
	(wl-expire-archive-number1): Removed argument `msgdb'.
	(wl-expire-archive-number2): Ditto.
	(wl-expire-archive-date): Ditto.
	(wl-expire-localdir-date): Ditto.
	(wl-expire-hide): Ditto.
	(wl-archive-number1): Ditto.
	(wl-archive-number2): Ditto.
	(wl-archive-date): Ditto.
	(wl-archive-folder): Ditto.
	All other related portions are changed.

2003-07-19  Yoichi NAKAYAMA  <yoichi@geiin.org>

	* wl-draft.el (wl-draft-send-confirm): Change message. Now up/down
	mean move up and down. (suggested by Takashi Kawachi)

2003-07-18  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-acap.el (toplevel): Don't require un-define.

2003-07-18  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-thread.el (wl-thread-delete-message): Always update
	wl-summary-buffer-number-list.

	* wl-action.el (wl-summary-print-destination): 
	Do nothing when folder is nil.

2003-07-18  Hiroya Murata  <lapis-lazuli@pop06.odn.ne.jp>

	* wl-summary.el (wl-summary-prefetch-region-no-mark): Update
	persistent mark when prefetch is succeeded.

2003-07-17  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-expire.el (wl-expire-delete): Use elmo-folder-detach-messages
	instead of elmo-msgdb-delete-msgs.
	(wl-expire-refile-with-copy-reserve-msg): Ditto.
	(wl-expire-hide): Ditto.

	* wl-summary.el (wl-summary-delete-all-msgs): Ditto.

	* wl-thread.el (wl-thread-update-line-on-buffer-sub): Don't use
	elmo-msgdb interface.
	(wl-thread-get-exist-children): Likewise.
	(wl-thread-insert-message): Likewise.
	(wl-thread-msg-mark-as-important): Likewise.
	(wl-thread-insert-entity-sub): Likewise.
	(wl-thread-get-children-msgs-uncached): Likewise.

	* wl-summary.el (wl-summary-sync-all-init): Use elmo-folder-length.
	(wl-summary-prefetch-msg): Don't use elmo-msgdb interface.
	(wl-summary-sync-update): Likewise.
	(wl-summary-auto-select-msg-p): Likewise.
	(wl-summary-update-thread): Likewise.
	(wl-summary-mark-as-important): Likewise.
	(wl-summary-jump-to-msg-internal): Likewise.
	(wl-summary-redisplay-internal): Likewise.
	(wl-summary-print-message-with-ps-print): Likewise.
	(wl-summary-folder-info-update): Likewise.

	* wl-folder.el (wl-folder-check-one-entity):
	elmo-folder-count-flags instead of wl-summary-count-unread.

	* wl-draft.el (wl-draft-normal-send-func): Fixed last change.

	* wl-action.el (wl-summary-define-mark-action): Fixed region function.

	* wl-summary.el (wl-summary-set-message-modified): 
	Call wl-summary-set-mark-modified.
	(wl-summary-delete-messages-on-buffer): Call
	wl-folder-set-folder-updated instead of wl-folder-update-unread.
	(wl-summary-sync-update): Call elmo-folder-length instead of
	elmo-folder-messages.
	(wl-summary-insert-headers): Don't call
	elmo-folder-list-message-entities.

2003-07-17  Hiroya Murata  <lapis-lazuli@pop06.odn.ne.jp>

	* wl-action.el (wl-summary-define-mark-action): Call
	`wl-summary-set-mark' with argument `data'.
	(wl-summary-auto-refile): Fixed order of arguments when call
	`wl-summary-refile'.

2003-07-16  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-vars.el (wl-summary-mark-action-list): Define resend action.

	* wl-summary.el (wl-summary-mode-map): Bind resend action.

	* wl-highlight.el (wl-highlight-summary-disposed-face): New face
	(Renamed from wl-highlight-summary-deleted-face).
	(wl-highlight-summary-resend-face): New face.

	(wl-highlight-summary-deleted-face): Renamed from
	wl-highlight-summary-erased-face.

	* wl-address.el (wl-complete-field-to): Added optional argument prompt.

	* wl-action.el (wl-summary-get-resend-address): New function.
	(wl-summary-exec-action-resend): Ditto.
	(wl-summary-exec-action-resend-subr): Ditto.

	* w-thread.el (wl-thread-copy): Removed definition.
	(wl-thread-refile): Ditto.
	(wl-thread-delete): Ditto.
	(wl-thread-target-mark): Ditto.

	* wl-action.el (wl-summary-register-target-mark): Fixed argument.
	(wl-summary-target-mark-set-action): Fixed.
	(wl-summary-define-mark-action): Fixed quotation.
	(wl-summary-move-mark-list-messages): Display message.
	(wl-summary-define-mark-action): Define thread functions.
	(wl-summary-exec-action-refile): Changed message.
	(wl-summary-exec): Ditto.

2003-07-15  Mito  <mito@mxa.nes.nec.co.jp>
	
	* wl-summary.el (wl-summary-entity-info-msg): Don't replace '%' to
	'%%'.

2003-07-15  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl.el (toplevel): Require wl-action.
	(wl-init): Call wl-summary-define-mark-action.

	* wl-vars.el (wl-summary-mark-action-list): Changed specification.

	* wl-summary.el (wl-summary-mode-menu-spec): Follow the rename of
	wl-summary-delete and wl-summary-erase.
	(wl-summary-mode-map): Ditto.

	* wl-vars.el (wl-dispose-folder-alist): Renamed from
	wl-delete-folder-alist.

	* wl-summary.el (wl-summary-prefetch-region-no-mark): Use
	wl-summary-prefetch-msg instead of wl-summary-prefetch.
	(toplevel): Moved mark & action related functions to the wl-action.el.

	* wl-highlight.el (wl-highlight-summary-line-string): Follow the change
	in wl-summary-mark-action-list.
	(wl-highlight-summary-current-line): Ditto.

	* wl-draft.el (wl-draft-normal-send-func): Fixed bug for removing
	empty lines.

	* wl-action.el: New file. 

2003-07-14  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-summary.el (wl-summary-target-mark-replace): New function.
	(wl-summary-target-mark-prefetch): Use it.
	(wl-summary-target-mark-delete): Ditto.
	(toplevel): Rearranged definition order.
	(wl-summary-mode-map): Bind wl-summary-erase-region to "rD".
	(wl-summary-target-mark-erase): Rewrite.
	(wl-summary-erase-region): New function.
	(wl-summary-exec-action-erase): Changed message.
	(wl-summary-move-mark-list-messages): New function.
	(wl-summary-exec-action-delete): Use it.
	(wl-summary-exec-action-erase): Ditto.

	* wl-vars.el (wl-summary-reserve-mark-list): Added "d" and "i".
	(wl-summary-skip-mark-list): Added "d".

	* wl-summary.el (wl-summary-cursor-move-surface): Bind case-fold-search
	while searching.

	* wl-vars.el (wl-summary-mark-action-list): Moved from wl-summary.el
	and define using defcustom;
	Define 4th element as a face.
	
	* wl-summary.el (wl-summary-incorporate): Use 
	`wl-summary-prefetch-region-no-mark' instead of
	`wl-summary-prefetch-region'.
	(wl-summary-prefetch-region-no-mark): Revival of old
	`wl-summary-prefetch-region'.
	(wl-summary-mark-action-list): Moved to wl-vars.el

	* wl-highlight.el (wl-highlight-summary-current-line): Decide
	face according to the `wl-summary-mark-action-list'.
	(wl-highlight-summary-current-line): Ditto;
	Removed destination highlighting.

	* wl-highlight.el (wl-highlight-summary-prefetch-face): New face.
	(wl-highlight-summary-line-string): Highlight for "i" mark.
	(wl-highlight-summary-current-line): Ditto.

	* wl-thread.el (wl-thread-print-destination-region): Avoid error when
	no destination.

	* wl-summary.el (wl-summary-prefetch-msg): If cache file already
	exists,	just go ahead.
	(wl-summary-prefetch-region): Rewrite.
	(wl-summary-prefetch): Ditto.
	(wl-summary-mark-action-list): Define mark "i" and prefetch action.
	(wl-summary-exec-action-prefetch): New function.
	(wl-summary-target-mark-prefetch): Rewrite.

2003-07-13  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-highlight.el (wl-highlight-summary-erased-face): New face.
	(wl-highlight-summary-line-string): Added "d" and "D".
	(wl-highlight-summary-current-line): Ditto.

	* wl-thread.el (wl-thread-update-line-on-buffer-sub): Follow the change
	in wl-summary.el.
	(wl-thread-insert-entity-sub): Ditto.
	(wl-thread-remove-destination-region): Ditto.
	(wl-thread-print-destination-region): Ditto.

	* wl-summary.el (wl-summary-buffer-refile-list,
	wl-summary-buffer-delete-list,
	wl-summary-buffer-copy-list): Abolish.
	(wl-summary-buffer-temp-mark-list): New buffer local variable.
	All other related portions are changed.
	(wl-summary-mark-action-list): New variable.
	(wl-summary-set-mark): New function.
	(wl-summary-register-target-mark): Ditto.
	(wl-summary-unregister-target-mark): Ditto.
	(wl-summary-have-target-mark-p): Ditto.
	(wl-summary-register-temp-mark): Ditto.
	(wl-summary-unregister-temp-mark): Ditto.
	(wl-summary-registered-temp-mark): Ditto.
	(wl-summary-collect-temp-mark): Ditto.
	(wl-summary-unset-mark): Ditto.
	(wl-summary-set-target-mark): Ditto.
	(wl-summary-unset-target-mark): Ditto.
	(wl-summary-set-action-generic): Ditto.
	(wl-summary-unset-action-generic): Ditto.
	(wl-summary-exec-action-delete): Ditto.
	(wl-summary-exec-action-erase): Ditto.
	(wl-summary-set-action-refile): Ditto.
	(wl-summary-set-action-refile-subr): Ditto.
	(wl-summary-unset-action-refile): Ditto.
	(wl-summary-make-destination-numbers-list): Ditto.
	(wl-summary-exec-action-refile): Ditto.
	(wl-summary-set-action-copy): Ditto.
	(wl-summary-unset-action-copy): Ditto.
	(wl-summary-exec-action-copy): Ditto.
	(wl-summary-collect-numbers-region): Ditto.
	(wl-summary-delete): Rewrite.
	(wl-summary-erase): Ditto.
	(wl-summary-remove-destination): Ditto.
	(wl-summary-exec): Ditto.
	(wl-summary-exec-region): Ditto.
	(wl-summary-target-mark-erase): Ditto.
	(wl-summary-refile): Ditto.
	(wl-summary-copy): Ditto.
	(wl-summary-unmark): Ditto.
	(wl-summary-delete-all-mark): Ditto.
	(wl-summary-mark-line): Don't highlight.
	(wl-summary-target-mark-delete): Use wl-summary-register-temp-mark.
	(wl-summary-target-mark-refile-subr): Rewrite.

	(wl-summary-copy-prev-destination): Abolish.

2003-07-12  Yoichi NAKAYAMA  <yoichi@geiin.org>

	* wl-vars.el (wl-thread-indent-level, wl-thread-*-str): Choose
	default values along the value of wl-on-mule.
	(from Tatsuya Kinoshita <tats@vega.ocn.ne.jp> [wl-en:421])
	* wl-vars.el (wl-highlight-thread-indent-string-regexp): Remove.
	It is not used anywhere.

2003-06-16  Yoichi NAKAYAMA  <yoichi@geiin.org>

	* wl-summary.el (wl-summary-print-destination): Keep position.
	(wl-summary-cursor-move-surface): Keep horizontal position.

2003-05-30  Yoichi NAKAYAMA  <yoichi@geiin.org>

	* wl-draft.el (wl-draft-send-mail-with-smtp): Catch quitting and
	write sendlog.

2003-05-28  Yoichi NAKAYAMA  <yoichi@geiin.org>

	* wl-summary.el (wl-summary-goto-folder-subr): Don't restrict
	`wl-summary-highlight'.

2003-05-26  Yoichi NAKAYAMA  <yoichi@geiin.org>

	* wl-highlight.el (wl-highlight-summary-current-line): Remove
	trivial condition for temp-mark.

2003-05-24  Yoichi NAKAYAMA  <yoichi@geiin.org>

	* wl-message.el (wl-message-buffer-cache-add): Create new buffer
	when it hits killed buffer.

2003-05-12  Yoichi NAKAYAMA  <yoichi@geiin.org>

	* wl-draft.el, wl-expire.el, wl-mime.el, wl-summary.el, wl-util.el
	* wl-news.el.in: `message' and `error' take format string.

2003-05-11  Yoichi NAKAYAMA  <yoichi@geiin.org>

	* wl-folder (wl-folder-insert-entity): Display a message,
	`...done', when the work finish.
	(from Tatsuya Kinoshita <tats@vega.ocn.ne.jp> [wl:10866])

2003-05-04  Hiroya Murata  <lapis-lazuli@pop06.odn.ne.jp>

	* wl-message.el (wl-message-redisplay): Remove unused local
	variables (Reported by NAKAJIMA Mikio <minakaji@namazu.org>).

2003-04-30  Yoichi NAKAYAMA  <yoichi@geiin.org>

	* wl-summary.el (wl-summary-replace-status-marks): Disable
	interactive use.
	(wl-summary-reedit): Check message existence at first.
	(wl-summary-mark-line): Fix doc, return value is indefinite.

	* wl-highlight.el (wl-highlight-message): Arranged.

	* wl-highlight.el (wl-highlight-summary-current-line): Abolish
	unused 1st and 2nd arguments. Abolish 3rd argument `temp-too' and
	check temp-mark by wl-summary-temp-mark always.
	(wl-highlight-summary): Change accordingly.
	* wl-summary.el (wl-summary-mark-as-read-all)
	(wl-summary-delete-cache, wl-summary-set-score-mark)
	(wl-summary-mark-as-unread, wl-summary-unmark)
	(wl-summary-mark-line, wl-summary-mark-as-read)
	(wl-summary-mark-as-important): Ditto.

	* wl-highlight.el (wl-highlight-summary-window): Re-calculate the
	end of the window if possible.
	* wl-summary.el (wl-summary-sync-update): Support lazy
	highlighting.
	(wl-summary-toggle-disp-msg): Ditto.

2003-04-09  Yoichi NAKAYAMA  <yoichi@geiin.org>

	* wl-util.el (wl-as-coding-system): Define for non-mule too.

2003-04-05  Hiroya Murata  <lapis-lazuli@pop06.odn.ne.jp>

	* wl-summary.el (wl-summary-mark-as-important): Fixed the last
	change.

2003-04-02  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-summary.el (wl-summary-rescan): Follow the changes in wl-score
	API.
	(wl-summary-sync-update): Ditto.

	* wl-score.el (wl-score-get-score-alist): Changed argument.
	(wl-summary-rescore-msgs): Likewise.
	(wl-summary-score-headers): Likewise.
	(wl-score-headers): Likewise;
	Use elmo-folder-do-each-message-entity, etc.
	(wl-summary-score-effect): Follow the changes above.
	(wl-summary-rescore): Ditto.
	(wl-score-get-latest-msgs): Follow the changes in elmo-msgdb API.
	(wl-score-get-overview): Abolish.

	* wl-summary.el (wl-summary-default-from): Follow the API change in
	elmo-msgdb.
	(wl-summary-count-unread): Ditto.
	(wl-summary-detect-mark-position): Ditto.
	(wl-summary-overview-entity-compare-by-date): Ditto.
	(wl-summary-overview-entity-compare-by-number): Ditto.
	(wl-summary-overview-entity-compare-by-from): Ditto.
	(wl-summary-overview-entity-compare-by-subject): Ditto.
	(wl-summary-get-list-info): Ditto.
	(wl-summary-rescan): Ditto.
	(wl-summary-jump-to-msg-by-message-id): Ditto.
	(wl-summary-sync-update): Ditto; Removed comment.
	(wl-summary-insert-thread-entity): Renamed to wl-summary-insert-thread.
	(wl-summary-insert-message): Use wl-summary-insert
	(wl-summary-insert-sequential): Changed argument msgdb to folder.
	(wl-summary-insert-headers): Changed argument overview to folder.
	(wl-summary-search-by-subject): Likewise.
	(wl-summary-insert-thread): Renamed from 
	wl-summary-insert-thread-entity and changed argument msgdb to folder.

	* wl-folder.el (wl-folder-check-one-entity): Treat elmo-imap4-bye-error
	too.

	* wl-fldmgr.el (wl-add-entity-sub): Use elmo-string-member instead of
	wl-string-member.

2003-03-25  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-draft.el (wl-draft-do-fcc): Follow the changes in
	elmo-folder-append-buffer.
	(wl-draft-queue-append): Likewise.

	* wl-mime.el (wl-message-delete-current-part): Ditto.
	(wl-summary-burst-subr): Ditto.

	* wl-news.el.in (wl-news-send-news): Ditto.

2003-03-24  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-summary.el (wl-summary-mark-as-read-internal): New inline
	function.
	(wl-summary-mark-as-read, wl-summary-mark-as-unread): Use it.
	(wl-summary-update-mark): Enclose with save-excursion.
	(wl-summary-mark-as-read-internal): Fixed last change.
	(wl-summary-mark-as-important): Use 3rd argument of
	elmo-folder-unmark-important, elmo-folder-mark-as-important;
	Don't use elmo-msgdb-set-mark.
	(wl-summary-redisplay-internal): If msgdb flag is already read,
	just update the mark on buffer.

2003-03-30  Yoichi NAKAYAMA  <yoichi@geiin.org>

	* wl-fldmgr.el (wl-fldmgr-delete): Move confirmation to elmo side,
	cut visible folder when elmo-folder-delete returns non-nil value.

2003-03-30  Yoichi NAKAYAMA  <yoichi@geiin.org>

	* wl-draft.el (wl-draft-send-confirm): Display more info (advised
	by Kenichi OKADA <okada@opaopa.org>).

2003-03-28  Yoichi NAKAYAMA  <yoichi@geiin.org>

	* wl-folder.el (wl-folder-open-all): Fix to get proper entity.

2003-03-19  Yoichi NAKAYAMA  <yoichi@geiin.org>

	* wl-fldmgr.el (wl-fldmgr-sort, wl-fldmgr-access-display-all):
	Fixed the last change, search group entity by its real name.
	(Thanks to: KOBAYASHI Shinji)

2003-03-12  Yoichi NAKAYAMA  <yoichi@geiin.org>

	* wl-fldmgr.el (wl-fldmgr-rename,wl-fldmgr-sort)
	(wl-fldmgr-access-display-all): Don't refer visible name.
	* wl-expire.el (wl-folder-archive-current-entity)
	(wl-folder-expire-current-entity): Ditto.
	* wl-folder.el (wl-folder-jump-to-current-entity)
	(wl-folder-update-recursive-current-entity,wl-folder-next-unsync)
	(wl-folder-open-folder-sub,wl-folder-open-all)
	(wl-folder-write-current-folder): Ditto.
	(wl-folder-insert-entity): Don't use petname for normal group.
	* wl-fldmgr.el (wl-fldmgr-insert-folders-buffer): car of the name
	is the real name.
	* wl-folder.el (wl-folder-folder-name, wl-folder-entity-name):
	Abolished.

2003-03-06  Kenichi OKADA  <okada@opaopa.org>

	* wl-draft.el (wl-draft-create-buffer): Add
	`wl-summary-reply-with-citation'

2003-03-02  Jeremy Shaw  <jeremy.shaw@lindows.com>

	* wl-draft.el (wl-draft-reply): Fixed.

2003-02-28  Yoichi NAKAYAMA  <yoichi@eken.phys.nagoya-u.ac.jp>

	* wl-draft.el (wl-draft-send-confirm): Rewritten. Invoke preview
	when `wl-draft-send-confirm-with-preview' is non-nil.
	You can scroll up/down by j/k.
	(wl-draft-send-confirm-with-preview): New variable (default=t).

2003-02-26  Yoichi NAKAYAMA  <yoichi@eken.phys.nagoya-u.ac.jp>

	* wl-fldmgr.el (wl-fldmgr-folders-header): Add more comment.
	(wl-fldmgr-save-folders): Fix comment.

2003-02-18  Yoichi NAKAYAMA  <yoichi@eken.phys.nagoya-u.ac.jp>

	* wl-folder.el (wl-folder-update-recursive-current-entity): Fix
	along the last change in `wl-folder-buffer-group-p'.

2003-02-17  Yoichi NAKAYAMA  <yoichi@eken.phys.nagoya-u.ac.jp>

	* wl-folder.el (wl-folder-buffer-search-group): Ignore non-group
	folder.

	* wl-vars.el (wl-delete-folder-alist): Add shimbun folder to
	the default value.

	* wl-mime.el (wl-summary-burst): Update summary only when target
	folder equals current folder.

2003-02-16  Yoichi NAKAYAMA  <yoichi@eken.phys.nagoya-u.ac.jp>

	* wl-thread.el (wl-thread-set-parent): Reconstruct number-list.

2003-02-14  Yoichi NAKAYAMA  <yoichi@eken.phys.nagoya-u.ac.jp>

	* wl-vars.el (wl-folder-hierarchy-access-folders): Change default
	value.

2003-02-14  Katsumi Yamaoka  <yamaoka@jpl.org>

	* wl-xmas.el (wl-xmas-highlight-folder-group-line): Use
	`map-extents' instead of `extent-at' repeatedly.
	(wl-highlight-folder-current-line): Ditto.

	* wl-highlight.el: Remove useless dummy functions.

2003-02-14  Yoichi NAKAYAMA  <yoichi@eken.phys.nagoya-u.ac.jp>

	* wl-folder.el (wl-folder-buffer-group-p): Rewritten.
	(wl-folder-put-folder-property): New function to put text property.
	(wl-folder-jump-to-current-entity, wl-folder-entity-assign-id)
	(wl-folder-insert-entity, wl-folder-update-diff-line)
	(wl-folder-update-diff-line, wl-folder-pick): Change accordingly.
	* wl-e21.el, wl-xmas.el, wl-mule.el
	(wl-highlight-folder-current-line): Ditto.
	* wl-fldmgr.el (wl-fldmgr-get-path-from-buffer, wl-fldmgr-cut)
	(wl-fldmgr-copy-region, wl-fldmgr-copy, wl-fldmgr-delete)
	(wl-fldmgr-rename, wl-fldmgr-sort, wl-fldmgr-unsubscribe)
	(wl-fldmgr-access-display-all, wl-fldmgr-set-petname): Ditto.

2003-02-14  Yoichi NAKAYAMA  <yoichi@eken.phys.nagoya-u.ac.jp>

	* Version number is increased to 2.11.3.

2003-02-13  Yoichi NAKAYAMA  <yoichi@eken.phys.nagoya-u.ac.jp>

	* wl-summary.el (wl-summary-mark-as-read): Run hook within dolist.
	Resume current-buffer since it is assumed by remaining tasks.

2003-02-12  Yoichi NAKAYAMA  <yoichi@eken.phys.nagoya-u.ac.jp>

	* wl-folder.el (wl-folder-complete-folder-candidate): New variable.
	(wl-folder-completion-function): Abolished.
	(wl-folder-complete-folder): New function.
	(wl-folder-complete-filter-condition): Ditto.
	* wl-summary.el (wl-summary-read-folder): Change accordingly.
	* wl-fldmgr.el (wl-fldmgr-add): Ditto.

2003-02-11  Yoichi NAKAYAMA  <yoichi@eken.phys.nagoya-u.ac.jp>

	* wl-draft.el (wl-draft-send-confirm): New function.
	(wl-draft-send): Use it.

	* wl-summary.el (wl-summary-jump-to-msg-by-message-id): Bind
	cursor-in-echo-area while confirming.

	* wl-summary.el (wl-summary-virtual): Call wl-summary-virtual-hook.

	* wl-summary.el (wl-summary-jump-to-msg-by-message-id): Force
	searching via nntp if wl-summary-search-via-nntp is 'force.
	Otherwise, invoke searching in nntp folder only.
	* wl-vars.el (wl-summary-search-via-nntp): Change accordingly.

	* wl-draft.el (wl-draft-remove-text-plain-tag): Specify subtype
	explicitly for mime-make-text-tag.

2003-02-10  TAKAHASHI Kaoru  <kaoru@kaisei.org>

	* wl-draft.el (wl-draft-remove-text-plain-tag): Use
	`mime-make-text-tag' instead of `mime-create-tag'.

2003-02-10  Yoichi NAKAYAMA  <yoichi@eken.phys.nagoya-u.ac.jp>

	* wl-fldmgr.el (wl-fldmgr-rename): Do nothing on the last line.
	(wl-fldmgr-add-completion-subr): Rewrite conditional.

2003-02-08  Yoichi NAKAYAMA  <yoichi@eken.phys.nagoya-u.ac.jp>

	* wl-score.el (wl-score-save): Bind print-length and print-level.
	(wl-score-pretty-print): Ditto.
	(wl-score-edit-insert-header-entry): Ditto.

	* wl-draft.el (wl-draft-send): Remove duplicate "Bcc" and add
	"From" entry to be treated with wl-draft-eword-encode-address-list.
	* wl-mime.el (wl-draft-preview-message): Ditto.

	* wl-summary.el (wl-summary-mark-as-read): Take list of numbers.
	(wl-summary-mark-as-unread): Ditto.
	(wl-summary-mark-as-read-region): Change accordingly.
	(wl-summary-mark-as-unread-region): Ditto.
	(wl-summary-target-mark-mark-as-read): Ditto.
	(wl-summary-target-mark-mark-as-unread): Ditto.

2003-02-08  Yoichi NAKAYAMA  <yoichi@eken.phys.nagoya-u.ac.jp>

	* Version number is increased to 2.11.2.

2003-01-29  Yoichi NAKAYAMA  <yoichi@eken.phys.nagoya-u.ac.jp>

	* wl-news.el.in (wl-news-previous-version-save): Bind
	print-length and print-level.
	* wl-thread.el (wl-thread-save-entities): Ditto.
	(wl-thread-save-top-list): Bind print-length.

2003-01-28  Yoichi NAKAYAMA  <yoichi@eken.phys.nagoya-u.ac.jp>

	* wl-highlight.el (wl-highlight-summary-line-string): Use
	wl-summary-score-below-mark, wl-summary-score-over-mark.
	(wl-highlight-summary-current-line): Ditto.

2003-01-27  Yoichi NAKAYAMA  <yoichi@eken.phys.nagoya-u.ac.jp>

	* wl-draft.el (wl-draft-insert-from-field): Encode wl-from and
	insert it.

2003-01-21  Kenichi OKADA  <okada@opaopa.org>

	* wl-vars.el (wl-message-id-use-wl-from): Change defalut to t.

2003-01-20  Yoichi NAKAYAMA  <yoichi@eken.phys.nagoya-u.ac.jp>

	* wl-mime.el (wl-message-delete-current-part): Avoid error on
	message without msgid.
	Rewrite with elmo-folder-move-messages.
	Set wl-message-buffer to nil.

	* wl-summary.el (wl-summary-erase-subr): New function. Use
	elmo-folder-move-messages.
	(wl-summary-erase): Call it.
	(wl-summary-target-mark-erase): Ditto.

2003-01-14  Yoichi NAKAYAMA  <yoichi@eken.phys.nagoya-u.ac.jp>

	* wl-summary.el (wl-summary-exec-subr): Unset wl-message-buffer if
	it is not up-tp-date.

2003-01-12  Yoichi NAKAYAMA  <yoichi@eken.phys.nagoya-u.ac.jp>

	* wl-folder.el (wl-folder-empty-trash): Set and show up summary
	buffer after calling `wl-summary-goto-folder-subr' without the
	argument `interactive'.
	(wl-folder-set-current-entity-id): Enclose by save-current-buffer.

2003-01-12  TAKAHASHI Kaoru  <kaoru@kaisei.org>

	* wl-draft.el (wl-draft-remove-text-plain-tag): Use
	`mime-create-tag'. Use `string=' instead of `looking-at'.

2003-01-11  Yoichi NAKAYAMA  <yoichi@eken.phys.nagoya-u.ac.jp>

	* wl-news.el.in (wl-news-send-news): Add 3rd argument `folder'
	to avoid compile warning.

	* wl-summary.el (wl-summary-goto-folder-subr): Fix logic: set
	entity-id when folder is given.
	* wl-folder.el (wl-folder-set-current-entity-id): Don't use
	save-excursion, use save-selected-window instead.
	Select folder buffer window if exists.
	(To correct behavior with wl-folder-move-cur-folder.)

2003-01-10  Masahiro Murata  <muse@ba2.so-net.ne.jp>

	* wl-draft.el (wl-draft-reedit): Avoid error on Meadow [wl:11209].

2003-01-06  Mito  <mito@mxa.nes.nec.co.jp>

	* wl-summary.el (wl-summary-line-list-info): Use %f to make
	list-count instead of %d.

2003-01-06  Yoichi NAKAYAMA  <yoichi@eken.phys.nagoya-u.ac.jp>

	* wl-news.el.in (wl-news-buffer-oldest-version): New local variable.
	(wl-news): Set it.
	(wl-news-append-to-folder): Use it.

	* wl-news.el.in (wl-news-send-news): Append to specified folder
	instead of wl-default-folder.
	(wl-news-append-to-folder): Show error message with specified folder.

	* wl-vars.el: Follow "Left Margin Convention" in Emacs Manual.
		In most major modes, Emacs assumes that any opening
		delimiter found at the left margin is the start of a
		top-level definition, or defun. Therefore, *never put an
		opening delimiter at the left margin unless it should have
		that significance.*

	* wl-draft.el (wl-draft-reply): List in r-list can contain function.

2003-01-05  NAKAJIMA Mikio  <minakaji@osaka.email.ne.jp>

	* wl-draft.el (wl-draft-self-reply-p): Add doc string.

2003-01-01  TAKAHASHI Kaoru  <kaoru@kaisei.org>

	* wl-demo.el (wl-demo-copyright-notice): Add 2003.

2002-12-31  Ron Isaacson  <Ron.Isaacson@morganstanley.com>

	* wl-summary.el (wl-summary-mark-collect): Revive missing return
	for sequential numbering case.

2002-12-25  Yoichi NAKAYAMA  <yoichi@eken.phys.nagoya-u.ac.jp>

	* wl-vars.el (wl-draft-reply-with-argument-list): Change default
	value.
	(wl-draft-reply-without-argument-list): Ditto.
	(wl-draft-reply-myself-with-argument-list): Abolish.
	(wl-draft-reply-myself-without-argument-list): Ditto.
	* wl-draft.el (wl-draft-self-reply-p): New function.
	(wl-draft-reply-list-symbol): Merge into `wl-draft-reply'.

2002-12-24  Yoichi NAKAYAMA  <yoichi@eken.phys.nagoya-u.ac.jp>

	* wl-e21.el (toplevel): Do not set wl-folder-mode-map.
	(avoid error for the case without byte-compiling)

2002-12-23  Kenichi OKADA  <okada@opaopa.org>

	* wl-news.el.in (wl-news-append-to-folder): New function.
	(wl-news-exit): Rewrite.
	(wl-news-discard-and-mail): Merge to `wl-news-exit'.

2002-12-22  Kenichi OKADA  <okada@opaopa.org>

	* wl-draft.el (wl-draft-reply-position): New function.
	(wl-draft-reply-position): Fix.
	* wl-summary.el (wl-summary-reply): Use `wl-draft-reply-position'.
	(wl-summary-target-mark-reply-with-citation): Ditto.
	(wl-summary-reply-with-citation): Ditto.
	* wl-vars.el (wl-draft-reply-default-position): New variable.

2002-12-22  Kenichi OKADA  <okada@opaopa.org>

	* wl-draft.el (wl-draft-send): Preview when interactive send.

2002-12-22  Kenichi OKADA  <okada@opaopa.org>

	* wl-draft.el (wl-draft-reply): Set default position.
	* wl-summary.el (wl-summary-reply): Ditto.
	(wl-summary-reply-with-citation): Ditto.
	(wl-summary-target-mark-reply-with-citation): Ditto.

2002-12-21  Yoichi NAKAYAMA  <yoichi@eken.phys.nagoya-u.ac.jp>

	* wl-news.el.in (wl-news-lang): Set default value according to
	current-language-environment.
	(wl-news-append-news): Do nothing when news-list is nil.

2002-12-21  Kenichi OKADA  <okada@opaopa.org>

	* wl-news.el.in (wl-news-mode-map): Add new keybind.
	(wl-news): Change message.
	(wl-news-exit): Check buffer.
	(wl-news-force-exit): New function.
	(wl-news-show-all): New function.
	(wl-news-discard-and-exit): Fix.

2002-12-21  Yoichi NAKAYAMA  <yoichi@eken.phys.nagoya-u.ac.jp>

	* wl-vars.el (wl-summary-weekday-name-lang): Set default value
	according to current-language-environment.

	* wl-news.el.in (wl-news): If arg, show all NEWS after
	wl-news-default-previous-version.

2002-12-21  Kenichi OKADA  <okada@opaopa.org>

	* wl-news.el.in (wl-news-check): Rewritten.
	(wl-news-previous-version-load): Change data type.
	(wl-news-previous-version-save): Change data type.
	(wl-news-append-news): Add return value.
	(wl-news-check-news): New function.
	(wl-news-already-current-p): New function.
	(wl-news-send-news): Rewritten.
	(wl-news-mode-map): Add new keybind.
	(wl-news): Rewritten.
	(wl-news-exit): Rewritten.
	(wl-news-discard-and-mail): New function.
	(wl-news-send-to-address): Abolished.
	* wl.el (wl-init): Delete a message.

2002-12-21  Kenichi OKADA  <okada@opaopa.org>

	* wl-news.el.in (wl-news-exit): Update previous version.
	* wl.el (wl-folder-mode-menu-spec): Add 'Wanderlust NEWS'.

2002-12-21  Kenichi OKADA  <okada@opaopa.org>

	* wl-news.el.in (wl-news): Add `delete-other-windows'.

2002-12-21  Kenichi OKADA  <okada@opaopa.org>

	* wl-news.el.in (wl-news): New function.
	(wl-news-mode): New function.
	(wl-news-next-line): New function.
	(wl-news-next-page): New function.
	(wl-news-exit): New function.
	(wl-news-buf-name): New variable.
	(wl-news-mode-map): New variable.
	(wl-news-winconf): New variable.
	(wl-news-append-news): Add an option.

2002-12-20  Kenichi OKADA  <okada@opaopa.org>

	* wl-news.el.in (wl-news-send-news): Add 'Date' header.

2002-12-20  Yoichi NAKAYAMA  <yoichi@eken.phys.nagoya-u.ac.jp>

	* wl-news.el.in (wl-news-send-to-address): New variable.
	(wl-news-send-news): Use it.
	(wl-news-check): Call wl-news-send-news if wl-news-send-to-address.
	Return updating status.
	* wl.el (wl-init): Show message when wl-news-check returns non-nil.

2002-12-20  Kenichi OKADA  <okada@opaopa.org>

	* wl-news.el.in (wl-news-send-news): Delete
	Organization and X-Face.

2002-12-20  Kenichi OKADA  <okada@opaopa.org>

	* wl-news.el.in (wl-news-check): Fix for `wl-news-lang'.
	(wl-news-append-news): New function.
	(wl-news-send-news): New function.

2002-12-20  Kenichi OKADA  <okada@opaopa.org>

	* Version number is increased to 2.11.1.

2002-12-19  Kenichi OKADA  <okada@opaopa.org>

	* wl-news.el.in : New file.

2002-12-19  Kenichi OKADA  <okada@opaopa.org>

	* wl-vars.el (wl-draft-reply-with-argument-list): Change
	default value.
	(wl-draft-reply-without-argument-list): Ditto.

2002-12-19  Kenichi OKADA  <okada@opaopa.org>

	* wl-vars.el (wl-message-buffer-prefetch-depth): Change default value.
	(wl-message-buffer-prefetch-idle-time): Ditto.
	(wl-message-buffer-prefetch-folder-type-list): Ditto.

2002-12-13  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-thread.el (wl-thread-insert-message): Use
	wl-summary-max-thread-depth.

	* wl-summary.el (wl-summary-insert-thread-entity): Refined
	loop detection.

	* wl-message.el (wl-message-buffer-display): Back to the first page
	when cache is hit.

2002-12-12  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-vars.el (wl-summary-max-thread-depth): New user option.

	* wl-summary.el (wl-summary-insert-thread-entity):
	If the thread depth is reached to wl-summary-max-thread-depth,
	divide the thread.

2002-12-08  Kenichi OKADA  <okada@opaopa.org>

	* wl-draft.el (wl-draft-send-mail-with-smtp): Fix logic
	for elmo-remove-passwd.

2002-12-04  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-folder.el (wl-folder-sync-entity): Fixed problem when the
	folder is sticky.
	(wl-folder-mark-as-read-all-entity): Ditto.
	(wl-folder-prefetch-entity): Ditto.

2002-12-04  Yasutaka SHINDOH  <ring@fan.gr.jp>

	* wl-demo.el (wl-demo-icon-name): Cope with Medow.

2002-12-03  Yoichi NAKAYAMA  <yoichi@eken.phys.nagoya-u.ac.jp>

	* wl-summary.el (wl-summary-target-mark-erase): Simplify.
	Delete messages on buffer for unplugged operation.
	(wl-summary-erase): Ditto.

2002-11-25  Yoichi NAKAYAMA  <yoichi@eken.phys.nagoya-u.ac.jp>

	* wl-vars.el (wl-summary-search-parent-by-subject-regexp): It can
	take nil so as not to search parent by subject.

2002-11-20  Yoichi NAKAYAMA  <yoichi@eken.phys.nagoya-u.ac.jp>

	* wl-folder.el (wl-folder-get-prev-folder): Ignore nemacs.
	(wl-folder-get-next-folder): Ditto.
	(wl-folder-get-path): Ditto.

2002-11-17  Yoichi NAKAYAMA  <yoichi@eken.phys.nagoya-u.ac.jp>

	* wl-mime.el (wl-message-verify-pgp-nonmime): With arg, ask coding
	system and encode the region with it before verifying.

2002-11-15  Yoichi NAKAYAMA  <yoichi@eken.phys.nagoya-u.ac.jp>

	* wl-mime.el (wl-message-verify-pgp-nonmime): Encode by the coding
	system of the echo buffer before decoding.

2002-11-14  Yoichi NAKAYAMA  <yoichi@eken.phys.nagoya-u.ac.jp>

	* wl-mime.el (wl-message-verify-pgp-nonmime): Verify sign in the
	original contents.

2002-11-13  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-util.el (wl-biff-check-folder): Call elmo-pop3-get-session
	with argument 'any-exists.

2002-11-13  Yoichi NAKAYAMA  <yoichi@eken.phys.nagoya-u.ac.jp>

	* wl-mime.el (wl-message-decrypt-pgp-nonmime): Fix the last change.
	Use `wl-cs-autoconv'.

2002-11-12  Yoichi NAKAYAMA  <yoichi@eken.phys.nagoya-u.ac.jp>

	* wl-mime.el (wl-message-decrypt-pgp-nonmime): Decode PGP output
	by `mime-view-automatic-conversion'.

	* wl-mime.el (wl-message-decrypt-pgp-nonmime): New function.
	(wl-message-verify-pgp-nonmime): Ditto.
	* wl-e21.el, wl-mule.el, wl-xmas.el (wl-message-define-keymap):
	Bind them to C-c:d and C-c:v respectively.

	Merge following code by Teranishi-san from [wl-en:00167].
	* wl-mime.el (wl-mime-preview-application/pgp): New function.
	(wl-mime-preview-application/pgp-encrypted): Ditto.
	(wl-mime-setup): Add entry.

2002-11-10  Yoichi NAKAYAMA  <yoichi@eken.phys.nagoya-u.ac.jp>

	* wl-summary.el (wl-summary-target-mark-erase): New function.
	Bind it to "mD".

2002-11-09  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-vars.el (wl-draft-write-file-function): Fix.
	(wl-draft-reedit-hook): Changed default value.

	* wl-draft.el (wl-draft-edit-string): Set cursor point for
	wl-draft-reedit-hook.
	(wl-draft-remove-text-plain-tag): New function.
	(wl-draft-reedit): Set cursor point for wl-draft-reedit-hook.

	* wl-vars.el (wl-draft-write-file-function): New user option.

	* wl-draft.el (wl-draft-prepare-edit): Use it for
	local-write-file-hooks.
	(wl-draft-reedit): Ditto; use exact match for text/plain tag.

	* wl-draft.el (wl-draft-create-buffer): Cosmetic fix.
	(wl-draft-insert-mail-header-separator): Return the body beginning
	point.
	(wl-draft-reedit): Remove the mime-edit tag if the first part is
	text/plain.
	(wl-draft-reedit): Fixed argument for wl-draft-buffer-style.

2002-11-08  Yoichi NAKAYAMA  <yoichi@eken.phys.nagoya-u.ac.jp>

	* wl-summary.el (wl-summary-erase): New function to erase message
	without moving it to trash. Bind to "D".

	* wl-draft.el (wl-user-agent-compose): Set wl-draft-buffer-style
	as `keep' unless switch-function.

2002-11-07  Yoichi NAKAYAMA  <yoichi@eken.phys.nagoya-u.ac.jp>

	* wl-draft.el (wl-draft-create-buffer): Rewrite the part to hide
	message buffer by using `wl-summary-toggle-disp-msg'.
	* wl-summary.el (wl-summary-resend-bounced-mail): Hide message
	buffer window.
	(wl-summary-supresedes-message): Ditto.

	* wl-summary.el (wl-summary-reedit): Hide message buffer window.
	Do not delete other windows.
	* wl-draft.el (wl-draft-edit-string): Do not delete other windows.
	(wl-draft-reedit): Switch buffer with `wl-draft-buffer-style'.
	(wl-draft-create-buffer): Set reply-or-forward also for target
	mark commands.

2002-11-07  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-draft.el (wl-user-agent-compose): Delete special case for
	switch-to-buffer-other-window.

	* wl-summary.el (wl-summary-reply): Don't treat switch buffer here.
	(wl-summary-forward): Ditto.

	* wl-vars.el (wl-draft-buffer-style): Added choice of keep and
	function.
	(wl-draft-buffer-style): New use option.

	* wl-draft.el (wl-draft-create-buffer): Abolish argument `full'.
	(wl-draft): Follow the change above.
	(wl-draft-create-buffer): Use wl-draft-reply-buffer-style and
	wl-draft-buffer-style.
	(wl-user-agent-compose): Bind wl-draft-buffer-style with
	switch-function.

2002-11-01  Tomotaka SUWA  <cooper@saitama.fujimic.fujisankei-g.co.jp>

	* wl-address.el (wl-address-make-completion-entry): Extracted from
	`wl-address-make-completion-list'.
	(wl-address-enable-strict-loading): New variable.
	(wl-address-make-completion-list): Revive petname duplication
	inquiry, and enable it if `wl-address-enable-strict-loading'.
	(Note: this should be fixed in future. Ref: [wl:10773],[wl:10455])

2002-10-29  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-message.el (wl-message-get-original-buffer): Avoid
	'Selecting deleted buffer' error when original buffer is killed.

2002-10-28  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-summary.el (wl-summary-next-message): Use
	elmo-message-accessible-p instead of elmo-message-cached-p.

2002-10-27  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-util.el (wl-regexp-opt): Define as an alias for elmo-regexp-opt.

	* wl-thread.el (wl-thread-open-all-unread): Use
	elmo-folder-list-flagged instead of
	elmo-folder-list-messages-mark-match.

	* wl-summary.el (wl-summary-sync-marks): Use elmo-folder-list-flagged
	instead of elmo-folder-list-messages-mark-match.
	(wl-summary-move-spec-alist): New variable.
	(wl-summary-move-spec-plugged-alist,
	wl-summary-move-spec-unplugged-alist): Abolish.
	(wl-summary-next-message): Follow the change above.
	(wl-summary-save-view-cache): Call wl-summary-delete-all-temp-marks
	with 'no-msg' argument.

	* wl-message.el (wl-message-buffer-prefetch-move-spec-alist): New
	variable.
	(wl-message-buffer-prefetch-move-spec-plugged-alist,
	wl-message-buffer-prefetch-move-spec-unplugged-alist): Abolish.
	(wl-message-buffer-prefetch-get-next): Follow the change above.

2002-10-26  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-version.el (wl-version): Changed codename.

	* Version number is increased to 2.11.0.

2002-10-24  Hiroya Murata  <lapis-lazuli@pop06.odn.ne.jp>

	* wl-draft.el (wl-draft-reply-saved-variables): New constant.
	(wl-draft-reply): Append `wl-draft-reply-saved-variables' to
	`wl-draft-config-variables'.
	(wl-draft-kill): Fixed problem when the draft is reedit.

2002-10-24  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-draft.el (wl-draft-highlight-and-recenter): Restore
	buffer-modified status (Thanks to
	Tomotaka SUWA <cooper@saitama.fujimic.fujisankei-g.co.jp>).

2002-10-22  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-util.el (wl-region-exists-p): New function.

	* wl-mime.el (wl-draft-yank-current-message-entity): Use it;
	Remove defvars for byte-compile warnings.

2002-10-22  Hiroya Murata  <lapis-lazuli@pop06.odn.ne.jp>

	* wl-mime.el (toplevel): Fixed last change; use defvar instead of
	defvar-maybe. Removed unused bind.

2002-10-21  Yoichi NAKAYAMA  <yoichi@eken.phys.nagoya-u.ac.jp>

	* wl-draft.el (wl-draft-forward): If wl-draft-use-frame, select
	summary buffer window before creating new frame.
	(wl-draft-reply): Ditto.

2002-10-21  Hiroya Murata  <lapis-lazuli@pop06.odn.ne.jp>

	* wl-mime.el (toplevel): Avoid byte-compile warnings.

2002-10-21  Yoichi NAKAYAMA  <yoichi@eken.phys.nagoya-u.ac.jp>

	* wl-mime.el (wl-draft-yank-current-message-entity): Fix logic.

2002-10-18  Hiroya Murata  <lapis-lazuli@pop06.odn.ne.jp>

	* wl-mime.el (wl-message-delete-current-part): Use `delete-region'
	instead of `kill-region'.

2002-10-18  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-highlight.el (wl-highlight-summary-answered-face): New face.
	(wl-highlight-summary-line-string): Use it.
	(wl-highlight-summary-current-line): Ditto.

	* wl-mime.el (wl-message-delete-current-part): Check the class of
	mime-entity.

	* wl-draft.el (wl-draft-reedit): Set wl-draft-parent-folder.

	* wl-summary.el (wl-summary-make-number-list): Initialize.
	(wl-summary-update-mark): New function.
	(wl-summary-reply): Put `answered' mark on the message.
	(wl-summary-reply): Set `number' argument to wl-draft-reply.

	* wl-draft.el (wl-draft-parent-number): New buffer local variable.
	(wl-draft-reply): Added optional argument `number';
	Set wl-draft-parent-number.
	(wl-draft-kill): Delete answered mark if it is a reply.

2002-10-18  Yoichi NAKAYAMA  <yoichi@eken.phys.nagoya-u.ac.jp>

	* wl-mime.el (wl-mime-preview-follow-current-region): New function
	that originates in mime-preview-follow-current-entity.
	(wl-draft-yank-current-message-entity): Use it if region is active.

	* wl-mime.el (wl-message-delete-current-part): Remove restriction.
	* wl-e21.el (wl-message-define-keymap): Bind "D" for
	`wl-message-delete-current-part'.
	* wl-mule.el (wl-message-define-keymap): Ditto.
	* wl-xmas.el (wl-message-define-keymap): Ditto.

2002-10-16  Yoichi NAKAYAMA  <yoichi@eken.phys.nagoya-u.ac.jp>

	* wl-mime.el (wl-message-delete-current-part): New function.
	(wl-mime-node-id-to-string): Ditto.

	* wl-mime.el (wl-message-delete-current-part): Use existing
	original buffer which corresponds current mime-view buffer.
	(fetched buffer might have different structure, possibly)

	* wl-mime.el (wl-message-delete-current-part): Quit if the
	message content differs from the actual message.

2002-10-12  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-summary.el (wl-summary-insert-headers): Put alike hash in reverse
	order.
	(wl-summary-search-by-subject): Search parent message from tail;
	Check the existence of the parent message on the current thread tree.
	(wl-summary-update-thread): Check whether the line is inserted.

2002-10-10  Yoichi NAKAYAMA  <yoichi@eken.phys.nagoya-u.ac.jp>

	* wl-vars.el (wl-summary-line-format): Undo last change.
	* wl-summary.el (wl-summary-print-destination): Do not put
	invisible property when `wl-summary-width' is nil.
	(wl-summary-line-subject-minimum-length): Abolished.
	(wl-summary-line-subject): Ditto.

2002-10-09  Yoichi NAKAYAMA  <yoichi@eken.phys.nagoya-u.ac.jp>

	* wl-vars.el (wl-summary-line-format): Change default value.
	(wl-summary-subject-length-limit): Abolished.
	* wl-summary.el (wl-summary-line-subject): Ditto.

2002-10-09  Hiroya Murata  <lapis-lazuli@pop06.odn.ne.jp>

	* wl-template.el (wl-template-select): Added optional argument.
	If optional argument is specified, reverse
	`wl-template-visible-select'.

2002-10-06  Yoichi NAKAYAMA  <yoichi@eken.phys.nagoya-u.ac.jp>

	* wl-mime.el (wl-summary-burst): Get elmo folder correctly.
	Take prefix argument to force asking the destination folder.

2002-09-26  Hiroya Murata  <lapis-lazuli@pop06.odn.ne.jp>

	* wl-summary.el (wl-summary-prefetch-msg): If mark is changed,
	count and update status.

2002-09-24  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-summary.el (wl-summary-redisplay-internal): If
	`elmo-message-use-cache-p' is non-nil, call `elmo-message-set-cached'
	after fetching.

2002-09-24  Hiroya Murata  <lapis-lazuli@pop06.odn.ne.jp>

	* wl-summary.el (wl-summary-mark-as-read-all): Bind new-mark.
	(wl-summary-mark-as-read): Don't call elmo-message-set-cached.

	* wl-vars.el (toplevel): Require 'elmo-msgdb.

2002-09-20  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-summary.el (wl-summary-buffer-mark-modified): Abolish
	(All other related portions are changed).
	(wl-summary-mark-as-read-all): Rewrite.

2002-09-19  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-summary.el (wl-summary-sync-marks): Set no-modeline argument of
	`wl-summary-mark-as-read'.
	(wl-summary-mark-as-unread): Rewrite.
	(wl-summary-mark-as-read): Added no-modeline argument.
	(wl-summary-resume-cache-status): Rewrite.
	(wl-summary-exec-subr): Remove unused local variable.

2002-09-23  Yoichi NAKAYAMA  <yoichi@eken.phys.nagoya-u.ac.jp>

	* wl-summary.el (wl-summary-cursor-move-surface): Add missing
	logic to call `wl-summary-buffer-prev-folder-function'.
	(pointed out by Kazuhiro NISHIYAMA [mhc:01644])

2002-09-18  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-draft.el (wl-draft-reply): Avoid error when buf and summary-buf
	is nil.

2002-09-17  Yoichi NAKAYAMA  <yoichi@eken.phys.nagoya-u.ac.jp>

	* wl-mime.el (wl-mime-decrypt-application/pgp-encrypted): New
	function, a wrapper for `mime-decrypt-application/pgp-encrypted'.
	(wl-mime-setup): Add its entry.

2002-09-17  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-summary.el (wl-summary-prefetch-msg): Use elmo-message-set-cached.
	(wl-summary-delete-cache): Likewise.
	(wl-summary-mark-as-read): Rewrite.

2002-09-16  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-folder.el (wl-folder-check-one-entity): Follow the API change on
	`wl-summary-count-unread'.

	* wl-summary.el (wl-summary-sync-marks): Treat global-mark here.

	* wl-version.el (wl-version): Set codename for `elmo-mark' branch.

2002-09-13  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-vars.el (wl-summary-unread-mark, wl-summary-important-mark,
	wl-summary-new-mark, wl-summary-unread-uncached-mark,
	wl-summary-unread-cached-mark, wl-summary-read-uncached-mark):
	Renamed to the elmo-msgdb-*-mark.
	(wl-summary-score-marks): Follow the change above.
	(wl-summary-auto-refile-skip-marks): Ditto.
	(wl-summary-incorporate-marks): Ditto.
	(wl-summary-expire-reserve-marks): Ditto.

	* wl-thread.el (wl-thread-open-all-unread): Follow the variable name
	changes.
	(wl-thread-insert-top): Changed updating message.

	* wl-summary.el (wl-summary-buffer-answered-count): New buffer local
	variable.
	(wl-summary-count-unread): Count answered marks.
	(wl-summary-rescan): Call wl-summary-insert-message instead of
	wl-summary-append-message-func-internal.
	(wl-summary-rescan): Don't call wl-summary-make-number-list.
	(wl-summary-prefetch-msg): Follow the variable name changes.
	(wl-summary-prefetch-region): Ditto.
	(wl-summary-mark-as-read-all): Follow the API changes;
	Don't call elmo-folder-replace-marks.
	(wl-summary-delete-cache): Follow the variable name changes.
	(wl-summary-resume-cache-status): Ditto.
	(wl-summary-update-status-marks): New function.
	(wl-summary-insert-message): New function.
	(wl-summary-sync-marks): Follow the variable name changes.
	(wl-summary-sync-update): Synchronize to the msgdb, too;
	Changed update messages.
	(wl-summary-make-number-list): Rewrite.
	(wl-summary-insert-sequential): Update wl-summary-buffer-number-list.
	(wl-summary-mark-as-unread): Follow the API changes.
	(wl-summary-exec-subr): Follow the variable name changes.
	(wl-summary-mark-as-read): Ditto.
	(wl-summary-move-spec-plugged-alist): Ditto.
	(wl-summary-move-spec-unplugged-alist): Ditto.
	(wl-summary-cursor-move-surface): Ditto.

	* wl-highlight.el (wl-highlight-summary-line-string): Follow the
	variable name changes.
	(wl-highlight-summary-current-line): Ditto.

	* wl-expire.el (wl-expire-refile): Follow the API change in
	elmo-folder-move-messages.
	(wl-expire-refile-with-copy-reserve-msg): Ditto.
	(wl-summary-archive): Use elmo-folder-msgdb instead of
	elmo-msgdb-load.

2002-09-13  Yoichi NAKAYAMA  <yoichi@eken.phys.nagoya-u.ac.jp>

	* wl-mime.el (wl-draft-preview-message): Restore the position
	before evaluating wl-draft-send-hook in preview buffer.

2002-09-12  Yoichi NAKAYAMA  <yoichi@eken.phys.nagoya-u.ac.jp>

	* wl-addrmgr.el (wl-addrmgr-apply-exec): Call wl-draft interactively
	when it creates new draft buffer.

	* wl-folder.el (wl-folder-flush-queue): Call elmo-dop-queue-flush
	without argument.

	* wl-draft.el (wl-draft-config-sub-eval-insert): New function.
	Evaluate content and if the value is string, insert it.
	(wl-draft-config-sub-body,wl-draft-config-sub-top,
	wl-draft-config-sub-bottom,wl-draft-config-sub-header,
	wl-draft-config-sub-header-top,wl-draft-config-sub-part-top,
	wl-draft-config-sub-part-bottom): Use it.

	* wl-summary.el (wl-summary-cleanup-temp-marks): Ask execution
	with the folder name. The question was unintelligible when it is
	called from wl-save-status.

2002-09-11  Yoichi NAKAYAMA  <yoichi@eken.phys.nagoya-u.ac.jp>

	* wl-summary.el (wl-summary-save-view-cache): Avoid error on
	xemacs without mule (`mime-charset-to-coding-system' in mcs-ltn1
	cannot take second argument).

2002-09-05  Yoichi NAKAYAMA  <yoichi@eken.phys.nagoya-u.ac.jp>

	* wl-summary.el (wl-summary-line-attached): Bind case-fold-search
	as t. Since type and subtype are not case sensitive (RFC 2045).

2002-09-04  Yoichi NAKAYAMA  <yoichi@eken.phys.nagoya-u.ac.jp>

	* wl-vars.el (wl-message-mode-line-format): New variable.
	(wl-message-mode-line-format-spec-alist): Ditto.
	* wl-message.el (wl-message-buffer-mode-line-formatter): Ditto.
	(wl-message-redisplay): Use wl-message-mode-line-format.

2002-09-04  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-mime.el (wl-draft-preview-message): Bind wl-draft-parent-folder.

2002-09-03  Yoichi NAKAYAMA  <yoichi@eken.phys.nagoya-u.ac.jp>

	* wl-summary.el (wl-summary-default-from): Write description.

2002-09-03  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-vars.el (wl-ldap-objectclass): Abolish.

	* wl-address.el (wl-ldap-search-attribute-type-list): Added 'email'.
	(wl-ldap-make-filter): Removed condition for objectclass.
	(wl-ldap-make-matched-value-list): Remove meaningless process.
	(wl-ldap-alias-safe-string): Changed regexp for space/tab matching.
	(wl-address-ldap-search): Don't add `*' to `pat' string;
	use ignore-errors; added `email';
	use `ldap-default-host' if non-nil and `wl-ldap-server'is nil;
	use `ldap-default-port' if non-nil and `wl-ldap-port' is nil;
	use `ldap-default-base' if non-nil and `wl-ldap-base' is nil.


2002-09-02  Yoichi NAKAYAMA  <yoichi@eken.phys.nagoya-u.ac.jp>

	* wl-draft.el (wl-draft-parent-folder): Write description.
	* wl-vars.el (wl-draft-config-alist): Refer `wl-draft-parent-folder'

2002-09-02  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-draft.el (wl-draft-create-buffer): Set `wl-draft-parent-folder'
	as "" (zero-length string) if no parent.
	(wl-draft-hide): Fixed logic for wl-draft-use-frame.

2002-08-27  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-address.el (wl-address-make-completion-list): Skip duplication
	checking.
	(wl-address-make-address-list): use `cons' and `nreverse' instead of
	`append'.

2002-08-26  TAKAHASHI Kaoru  <kaoru@kaisei.org>

	* wl-draft.el (wl-draft-insert-x-face-field): Use `goto-char'
	instead of `beginning-of-buffer'.

2002-08-22  Katsumi Yamaoka  <yamaoka@jpl.org>

	* wl-xmas.el (wl-message-wheel-down): Fix parentheses.

2002-08-22  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-xmas.el, wl-mule.el, wl-e21.el (wl-message-wheel-up):
	Refer wl-message-buffer-name.
	(wl-message-wheel-down): Ditto.

2002-08-21  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-vars.el (wl-message-buffer-name): New user option.

	* wl-summary.el (wl-summary-read-folder): Use wl-folder-entity-hashtb
	directly instead of making alist dinamically.

	* wl-message.el (wl-message-buffer-cache-name): Abolish.
	(wl-message-buffer-create): Use wl-message-buffer-name instead of
	wl-message-buffer-cache-name.
	(wl-message-buffer-cache-clean-up): Ditto.

	* wl-folder.el (wl-folder-set-entity-info): Use elmo-string.

	* Version number is increased to 2.9.15.

2002-08-06  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-vars.el (wl-summary-default-view-alist): New user option.

	* wl-summary.el (wl-summary-goto-folder-subr): Use it.

	* wl-draft.el (wl-draft-make-mail-followup-to): Ignore case
	while deleting address.
	(wl-draft-delete-myself-from-cc): Ditto.

	* wl-fldmgr.el (wl-fldmgr-sort): Added optional argument.
	If optional argument is specified, reverse sort order.

	* wl-draft.el (wl-draft-get-fcc-list): Allow multiple Fcc folders.

2002-07-24  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-thread.el (wl-thread-insert-message): Return parent number if
	exists.
	(wl-thread-update-indent-string-region): Use
	wl-thread-update-line-on-buffer-sub instead of
	wl-thread-update-line-on-buffer.

2002-07-23  KAMO Tomoyuki  <kamo@i-manage.co.jp>

	* wl-folder.el (wl-folder-open-all): Call wl-highlight-folder-path.
	(wl-folder-close-all): Ditto.

2002-07-09  KAMO Tomoyuki  <kamo@i-manage.co.jp>

	* wl-summary.el (wl-summary-get-list-info): Process delivered-to:
	and mailing-list:.
	(wl-summary-overview-entity-compare-by-list-info): Treat empty field
	value.
	(wl-summary-line-list-info): Print mailing-list name even when 
	list-number is empty.

2002-07-18  Yoichi NAKAYAMA  <yoichi@eken.phys.nagoya-u.ac.jp>

	* wl-draft.el (wl-draft-edit-string): Don't set buffer-read-only.

	* wl-draft.el (wl-draft-confirm): Abolished since not used.
	(wl-draft-open-file): Ditto.
	(wl-draft-random-alphabet): Ditto.

	* wl-summary.el (wl-summary-mode-map): Remove already abolished
	bindings.

2002-07-14  Yoichi NAKAYAMA  <yoichi@eken.phys.nagoya-u.ac.jp>

	* wl-draft.el (wl-draft-config-exec): Fixed docstring.
	* wl-vars.el (wl-draft-config-alist): Ditto.

2002-07-12  Yuuichi Teranishi  <teranisi@gohome.org>

	* Version number is increased to 2.9.14.

	* wl.el (wl): Don't set wl-init as nil when error occured while
	auto-checking folders.

	* wl-util.el (wl-expand-newtext): Re-define as an alias for
	`elmo-expand-newtext'.

2002-07-11  Yoichi NAKAYAMA  <yoichi@eken.phys.nagoya-u.ac.jp>

	* wl-folder.el (wl-folder-goto-folder-subr): Keep value of
	`this-command' so that `wl-folder-goto-folder' contained in
	`wl-summary-keep-cursor-command' work.

2002-07-10  Yoichi NAKAYAMA  <yoichi@eken.phys.nagoya-u.ac.jp>

	* wl-summary.el (wl-summary-jump-to-parent-message): Keep
	message buffer displaying state.

2002-07-05  Yoichi NAKAYAMA  <yoichi@eken.phys.nagoya-u.ac.jp>

	* wl-vars.el (wl-summary-default-view): New variable to	specify
	default value for `wl-summary-buffer-view' instead of using
	set-default.
	* wl-summary.el (wl-summary-goto-folder-subr): Ditto.

2002-07-03  Yoichi NAKAYAMA  <yoichi@eken.phys.nagoya-u.ac.jp>

	* wl-summary.el (wl-summary-resend-bounced-mail): Loosen regexp.

	* wl-vars.el (wl-rejected-letter-start): Add pattern for qmail.

2002-07-01  Akihiro MOTOKI  <amotoki@dd.iij4u.or.jp>

	* wl-vars.el (wl-forward-subject-prefix): New variable.
	* wl-draft.el (wl-draft-forward): Use it.

2002-06-21  Yoichi NAKAYAMA  <yoichi@eken.phys.nagoya-u.ac.jp>

	* wl-message.el (wl-message-prev-page): When it is called without
	lines argument, scroll down by wl-message-scroll-amount lines.
	(wl-message-next-page): Ditto.
	* wl-vars.el (wl-message-scroll-amount): Change default value
	to preserve current behavior.

2002-06-20  Hiroya Murata  <lapis-lazuli@pop06.odn.ne.jp>

	* wl-summary.el (wl-summary-prefetch-msg): Bind
	`wl-message-entity' to call `wl-summary-from-function'.

2002-06-19  Yoichi NAKAYAMA  <yoichi@eken.phys.nagoya-u.ac.jp>

	* wl-message.el (wl-message-buffer-create): Run
	wl-message-buffer-created-hook.

2002-06-19  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-summary.el (wl-summary-sort-specs): New variable.
	(wl-summary-default-sort-spec): Ditto.
	(wl-summary-sort): Rewrite.
	(wl-summary-sort-by-list-info): New function.

2002-06-18  KAMO Tomoyuki  <kamo@i-manage.co.jp>

	* wl-summary.el (wl-summary-get-list-info): New function.
	(wl-summary-sort): Rewrite.
	(wl-summary-line-list-info): Ditto.
	(wl-summary-line-list-count): Ditto.
	(wl-summary-refile-region): Fixed docstring.

2002-06-17  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-summary.el (wl-summary-read-folder): Use copy-sequence 
	`wl-folder-entity-hashtb' as completion table.

2002-06-14  Katsumi Yamaoka  <yamaoka@jpl.org>

	* wl-draft.el (wl-draft-beginning-of-line): Set zmacs-region-stays
	only when this command is called interactively; silence the byte-
	compiler.

2002-06-14  TAKAHASHI Kaoru  <kaoru@kaisei.org>

	* wl-draft.el (wl-draft-beginning-of-line): Keep the region
	active in XEmacs.

2002-06-13  KAMO Tomoyuki  <kamo@i-manage.co.jp>

	* wl-draft.el (wl-draft-beginning-of-line): Treat the header with
	plural lines.

2002-06-11  Yoichi NAKAYAMA  <yoichi@eken.phys.nagoya-u.ac.jp>

	* wl-draft.el (wl-draft-beginning-of-line): Move to the beginning
	of current line when the cursor is on the header name.
	(preserve behavior to move to b.o.h. and b.o.l. mutually)

2002-06-06  KAMO Tomoyuki  <kamo@i-manage.co.jp>

	* wl-util.el (wl-read-directory-name): Return displayed directory
	as the default value also on XEmacs.

2002-05-30  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-summary.el (wl-summary-line-list-count): Use ".0f" for ml-count
	formatting.

2002-05-26  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-highlight.el (wl-highlight-summary): Added optional `lazy'
	argument and when it is non-nil, check face property before
	highlighting for each line.
	(wl-highlight-summary-window): Set it.

2002-05-22  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-vars.el (wl-draft-disable-bcc-for-mime-bcc): New user option.
	(wl-draft-disable-fcc-for-mime-bcc): Ditto.

	* wl-draft.el (wl-draft-deduce-address-list): Disable bcc while
	mime-bcc if wl-draft-disable-bcc-for-mime-bcc is non-nil.
	(wl-draft-get-fcc-list): Likewise.

2002-05-21  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-thread.el (wl-thread-indent-regexp): Abolished.
	(wl-thread-entity-cur): Ditto.
	* wl-summary.el (wl-summary-buffer-set-folder): Removed
	wl-thread-indent-regexp	setting.
	(wl-summary-sync-update): Removed wl-thread-entity-cur setting.

	* wl-summary.el (wl-summary-display-top): Highlight summary window when
	wl-summary-lazy-highlight.
	(wl-summary-display-bottom): Ditto.

	* wl-thread.el (wl-thread-open-close): Likewise.

	* wl-draft.el (wl-draft-do-mime-bcc): Decode field body of original
	from and subject;
	Bind wl-draft-use-frame;
	Enclose with save-window-excursion;
	Use wl-draft-create-buffer instead of with-temp-buffer;
	Use wl-draft-prepare-edit;
	Use insert-buffer instead of wl-draft-yank-from-mail-reply-buffer;
	Use wl-draft-send instead of wl-draft-raw-send.

2002-05-20  Yoichi NAKAYAMA  <yoichi@eken.phys.nagoya-u.ac.jp>

	* wl-draft.el (wl-draft-do-mime-bcc): Preserve original from instead
	of using wl-from.

2002-05-20  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-draft.el (wl-draft-do-mime-bcc): Use generate-new-buffer and
	insert-buffer instead of clone-buffer.
	(wl-draft-doing-mime-bcc): New variable.
	(wl-draft-do-mime-bcc): Bind wl-draft-doing-mime-bcc to avoid
	infinite loop.
	(wl-draft-do-mime-bcc): Use wl-from for From field value.

	* wl-vars.el (wl-draft-mime-bcc-field-name): New user option.
	(wl-draft-mime-bcc-body): Ditto.

	* wl-draft.el (wl-draft-setup): Setup wl-draft-mime-bcc-field-name.
	(wl-message-mail-p): Added wl-draft-mime-bcc-field-name.
	(wl-draft-dispatch-message): Call wl-draft-mime-bcc-field and
	wl-draft-do-mime-bcc.
	(wl-draft-mime-bcc-field): New function.
	(wl-draft-do-mime-bcc): Ditto.

	* wl-address.el (wl-address-complete-header-list): New variable.
	(wl-address-complete-header-regexp): Changed default value.

	* Version number is increased to 2.9.13.

2002-05-19  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-summary.el (wl-summary-mark-as-read): Set msgdb mark only when
	it is differed.

2002-05-18  Hiroya Murata  <lapis-lazuli@pop06.odn.ne.jp>

	* wl-summary.el (wl-summary-line-list-info): Rewrite.
	(wl-summary-line-list-count): Ditto.

2002-05-18  Kenichi OKADA  <okada@opaopa.org>

	* wl-vars.el (wl-nntp-posting-config-alist): New variable.
	(wl-nntp-posting-function): New variable.
	* wl-draft.el (wl-draft-elmo-nntp-send): Change for
	`wl-nntp-posting-config-alist'.

2002-05-17  Yoichi NAKAYAMA  <yoichi@eken.phys.nagoya-u.ac.jp>

	* wl-draft.el (wl-draft-send-mail-with-smtp): Remove staff for older
	FLIM.

2002-05-16  Tatsuya Kinoshita  <tats@iris.ne.jp>

	* wl-summary.el (wl-summary-target-mark-refile-sub):
	Remove a nuisance funcall.

2002-05-16  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-address.el (wl-complete-field-body): Bind `completion-ignore-case'
	as t for `try-completion'.

2002-05-15  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-summary.el (wl-summary-default-from): Use
	wl-address-header-extract-address instead of
	std11-extract-address-components.
	(wl-summary-simple-from): Ditto.
	(wl-summary-goto-folder-subr): Check wl-summary-cache-use.
	(wl-summary-insert-headers): Show message.
	(wl-summary-create-line): Set 4th argument of wl-set-string-width
	for whole line.
	(wl-summary-default-from): Revert last change.
	(wl-summary-simple-from): Ditto.
	(wl-summary-mark-as-read): Argument rearrangement and re-written.
	(wl-summary-mark-as-read-region): Follow the change above.
	(wl-summary-sync-marks): Ditto.
	(wl-summary-target-mark-mark-as-read): Ditto.
	(wl-summary-redisplay-internal): Ditto.
	(wl-summary-redisplay-no-mime-internal): Ditto.
	(wl-summary-redisplay-all-header): Ditto.
	(wl-summary-mark-as-read): Removed argument `cached';
	Use current cache status to set cache mark.
	(wl-summary-redisplay-internal): Follow the change above.
	(wl-summary-redisplay-no-mime-internal): Ditto.
	(wl-summary-redisplay-all-header): Ditto.

	* wl-score.el (wl-summary-score-update-all-lines): Ditto.

	* wl-util.el (wl-set-string-width): Added 4th argument ignore-invalid;
	Don't call itself recursively (Adviced by Yamaoka-san).

2002-05-14  Yoichi NAKAYAMA  <yoichi@eken.phys.nagoya-u.ac.jp>

	* wl-summary.el (wl-summary-save-view-cache): In temporary buffer,
	bind wl-summary-highlight as nil to avoid error caused by missing
	local variables.

2002-05-14  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-vars.el (wl-invalid-character-message): New user option.

	* wl-util.el (wl-set-string-width): If truncated string-width is
	larger than specified width, use `wl-invalid-character-message'.

2002-05-14  KAMO Tomoyuki  <kamo@i-manage.co.jp>

	* wl-summary.el (wl-summary-prefetch-msg): 
	If wl-prefetch-confirm is nil and arg is non-nil, do prefetch.

2002-05-11  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-vars.el (wl-summary-check-line-format): New user option.
	(wl-summary-line-format-file): Ditto.

	* wl-summary.el (wl-summary-buffer-line-format): New buffer local
	variable.
	(wl-summary-buffer-set-folder): Set wl-summary-buffer-line-format.
	(wl-summary-goto-folder-subr): Use `wl-summary-line-format-changed-p'
	and `wl-summary-view-old-p' to check whether do a rescan or not.
	(wl-summary-view-old-p): New function.
	(wl-summary-line-format-changed-p): Ditto.
	(wl-summary-line-format-save): Ditto.
	(wl-summary-save-view-cache): Call `wl-summary-line-format-save'.

	* wl-util.el (wl-set-string-width): Avoid using negative number
	for make-string.

2002-05-10  Hiroya Murata  <lapis-lazuli@pop06.odn.ne.jp>

	* wl-summary.el (wl-summary-line-list-info): Revised format of the
	return value.

	* wl-util.el (wl-set-string-width): Added optional argument
	`padding' (All other related portions are changed).
	(wl-line-parse-format): If the first letter of column number is
	`0', zero-padding the result (ex: "%05l").

	* wl-summary.el (wl-summary-line-list-count): Fixed parenthesis.

2002-05-10  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-summary.el (wl-summary-delete-messages-on-buffer): Fix for
	sequential summary view.

2002-05-10  Katsumi Yamaoka  <yamaoka@jpl.org>

	* wl-summary.el (wl-summary-save-view-cache): Use a base codesys
	if it doesn't have a -unix version.

2002-05-10  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-summary.el (wl-summary-jump-to-msg): Fix.

2002-05-09  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-draft.el (wl-draft-create-contents): Treat 'Body field as draft
	content.
	(wl-draft): Follow the change above.

	* wl-vars.el (wl-summary-line-format-spec-alist): Added @.

	* wl.el (wl-check-variables-2): Check whether wl-summary-line-format
	and wl-folder-summary-line-format-alist contain %T and %P.

	* wl-vars.el (wl-summary-mode-line-format-spec-alist): New variable.
	(wl-summary-mode-line-format): New user option.
	(wl-summary-line-format-spec-alist): Added l, T, P, n.
	(wl-summary-line-format): Changed default value.
	(wl-summary-lazy-highlight): Changed default value.

	* wl-thread.el (wl-thread-update-line-on-buffer-sub): Follow the
	change in wl-summary-create-line.
	(wl-thread-insert-entity-sub): Ditto.

	* wl-summary.el (wl-summary-buffer-folder-indicator): Abolished.
	(wl-summary-buffer-unread-status): Ditto.
	(wl-summary-buffer-temp-mark-column): New buffer-local variable.
	(wl-summary-buffer-persistent-mark-column): Ditto.
	(wl-summary-buffer-mode-line-formatter): Ditto.
	(wl-summary-buffer-mode-line): Ditto.
	(wl-summary-message-regexp): Abolished.
	(All other related portions are changed.)
	(wl-summary-detect-mark-position): New function.
	(wl-summary-buffer-set-folder): Setup
	wl-summary-buffer-mode-line-formatter.
	(wl-summary-mode): Setup selective-display;
	Setup pre-idle-hook when xemacs.
	(wl-summary-update-modeline): Rewrite.
	(wl-summary-jump-to-msg): Define as function;
	Changed regexp for searching messages.
	(wl-summary-message-number): Rewrite.
	(wl-summary-goto-folder-subr): Decode with `unix' EOL;
	Do rescan when old type summary cache.
	(wl-summary-goto-folder-subr): Call sit-for to rehighlight on XEmacs.
	(wl-summary-remove-destination): Use '\r' to detect EOL.
	(wl-summary-print-destination): Ditto.
	(wl-summary-temp-mark): New inline function.
	(wl-summary-persistent-mark): Ditto.
	(wl-summary-line-number): New function.
	(wl-summary-line-list-info): Renamed from wl-summary-line-list-info.
	(wl-summary-line-list-count): New function.
	(wl-summary-create-line): Added argument persistent-mark.
	(All other related portions are changed)
	(wl-summary-create-line): Insert '\r'.
	(wl-summary-save-view-cache): Encode whth `unix' EOL.
	(wl-summary-cursor-move-surface): New inline function.
	(wl-summary-prev): Use it.
	(wl-summary-next): Ditto.

	* wl-highlight.el (wl-highlight-summary-current-line): Don't use
	wl-summary-message-regexp.
	(wl-highlight-summary): Delete progress message.
	(wl-highlight-summary-window): Do highlight only when wl-summary-mode.

	* Version number is increased to 2.9.12.

2002-05-08  Yoichi NAKAYAMA  <yoichi@eken.phys.nagoya-u.ac.jp>

	* wl-summary.el (wl-summary-line-subject-minimum-length): New
	variable (nil: no minimum).
	(wl-summary-line-subject): Add some spaces after subject by
	wl-summary-line-subject-minimum-length.

2002-05-08  Hiroya Murata  <lapis-lazuli@pop06.odn.ne.jp>

	* wl-vars.el (wl-summary-line-format-spec-alist): Redefined `c'
	and removed `F'.
	(wl-folder-summary-line-format-alist): Fixed docstring (Follow the
	change above).

2002-05-07  Yoichi NAKAYAMA  <yoichi@eken.phys.nagoya-u.ac.jp>

	* wl-summary.el (wl-summary-line-list-count): Reverted.
	(example setting in samples/*/dot.wl is also updated)

2002-05-07  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-vars.el (wl-summary-line-format-spec-alist): Added '~'.

	* wl-util.el (wl-line-parse-format): Set up wl-line-string.

	* wl-vars.el (wl-summary-line-format): Addes some description to the
	docstring.

	* wl-summary.el (wl-summary-line-open-bracket): Abolished.
	(wl-summary-line-close-bracket): Ditto.
	(wl-summary-line-children-number): Ditto.
	(wl-summary-line-thread-indent): Ditto.
	(wl-summary-line-children-and-from): Ditto.

	* wl-vars.el (wl-summary-line-format-spec-alist): Redefine '[', ']',
	't', 'c', 'F' and added 'C'.

	* wl-util.el (wl-set-string-width): Accept negative value.
	(wl-line-parse-format): Added "%number(" and "%)".

2002-05-07  Yoichi NAKAYAMA  <yoichi@eken.phys.nagoya-u.ac.jp>

	* wl-summary.el (wl-summary-line-list-count): Change format of the
	return value.

2002-05-03  Daiki Ueno  <ueno@unixuser.org>

	* wl-draft.el (wl-draft-beginning-of-line): New command imported
	from the recent message.el.
	(wl-draft-point-in-header-p): Ditto.
	* wl-mule.el (wl-draft-mode-map): Bind "\C-a" to
	wl-draft-beginning-of-line.
	* wl-e21.el (wl-draft-mode-map): Ditto.
	* wl-xmas.el (wl-draft-mode-map): Ditto.

	* wl-folder.el: Sort macrodefs by dependencies.

2002-05-03  Yuuichi Teranishi  <teranisi@ns.templewest.net>

	* wl-summary.el (wl-summary-prev): Fixed regexp.
	(wl-summary-next): Ditto.

2002-05-02  Yoichi NAKAYAMA  <yoichi@eken.phys.nagoya-u.ac.jp>

	* wl-summary.el (wl-summary-line-day-of-week): Ignore error.

2002-05-02  Yuuichi Teranishi  <teranisi@ns.templewest.net>

	* wl-summary.el (wl-summary-create-line): Bind variable `entity'
	for backward compatibility.

2002-05-02  Yoichi NAKAYAMA  <yoichi@eken.phys.nagoya-u.ac.jp>

	* wl-summary.el (wl-summary-line-list-count): New function, merged
	from my-wl-summary-subject-func-ml in samples/*/dot.wl.
	* wl-vars.el (wl-summary-line-format-spec-alist): Add entry for
	list counts.

2002-05-02  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-summary.el (wl-summary-create-line): Ignore errors while
	timezone-fix-time.

	* wl-acap.el (wl-acap-create-folder-entity): Bind unbound variable.

	* wl-summary.el (wl-summary-sync-update): Ditto.
	(wl-summary-default-from): Use wl-message-entity
	instead of entity.

	* wl-summary.el (wl-summary-create-line): Fix.

	* wl-vars.el (wl-summary-line-format-spec-alist): New variable.
	(wl-summary-line-format): New user option.
	(wl-folder-summary-line-format-alist): Ditto.
	(wl-summary-from-width): Abolished.

	* wl-util.el (toplevel): Require 'bytecomp.
	(wl-line-parse-format): New function.
	(wl-line-formatter-setup): New macro.

	* wl-summary.el (wl-summary-buffer-number-regexp): Abolished.
	(wl-summary-buffer-line-formatter): New buffer local variable.
	(wl-summary-switch-to-clone-buffer): Follow the change above.
	(wl-summary-message-regexp): Fix.
	(wl-summary-from-func-internal): Abolished.
	(wl-summary-subject-func-internal): Ditto.
	(wl-summary-subject-filter-func-internal): Ditto.
	(All other related portions are changed.)
	(wl-summary-buffer-set-folder):
	Set up wl-summary-buffer-number-column and 
	wl-summary-buffer-line-formatter
	(All other related portions are changed.)
	(wl-summary-buffer-number-column-detect): Abolished.
	(All other related portions are changed.)
	(wl-summary-delete-all-status-marks-on-buffer): Removed.
	(wl-summary-delete-all-temp-marks-on-buffer): Use
	wl-summary-message-regexp instead of wl-summary-buffer-number-regexp.
	(wl-summary-target-mark-delete): Ditto.
	(wl-summary-target-mark-refile-subr): Ditto.
	(wl-summary-target-mark-mark-as-read): Ditto.
	(wl-summary-target-mark-mark-as-unread): Ditto.
	(wl-summary-target-mark-mark-as-important): Ditto.
	(wl-summary-target-mark-save): Ditto.
	(wl-summary-replace-status-marks): Renamed from
	wl-summary-set-status-marks-on-buffer;
	Use wl-summary-message-regexp instead of
	wl-summary-buffer-number-regexp.
	(wl-summary-sync-update): Follow the change above.
	(wl-summary-goto-previous-message-beginning): New function.
	(wl-summary-mark-as-unread): Use it.
	(wl-summary-mark-as-important): Ditto.
	(wl-summary-line-formatter): New variable.
	(wl-summary-line-year): New function.
	(wl-summary-line-day): Ditto.
	(wl-summary-line-day-of-week): Ditto.
	(wl-summary-line-hour): Ditto.
	(wl-summary-line-minute): Ditto.
	(wl-summary-line-open-bracket): Ditto.
	(wl-summary-line-close-bracket): Ditto.
	(wl-summary-line-children-number): Ditto.
	(wl-summary-line-thread-indent): Ditto.
	(wl-summary-line-size): Ditto.
	(wl-summary-line-subject): Ditto.
	(wl-summary-line-from): Ditto.
	(wl-summary-line-children-and-from): Ditto.
	(wl-summary-create-line): Rewritten.
	(wl-summary-format-date): Abolished.

	* wl-highlight.el (wl-highlight-summary-current-line): Use
	wl-summary-message-regexp instead of wl-summary-buffer-number-regexp;
	Use thread structure to detect thread top message.

	* wl-draft.el (wl-default-draft-cite): Don't use
	wl-summary-from-func-internal.

	* wl-refile.el (wl-refile-subject-learn): Don't use
	wl-summary-subject-filter-func-internal.
	(wl-refile-guess-by-subject): Ditto.

	* wl-e21.el (wl-e21-toolbar-configurations): Changed default
	parameters.

	* wl-thread.el (wl-thread-update-indent-string-region):
	Use wl-thread-update-line-on-buffer instead of
	wl-thread-update-indent-string.
	(wl-thread-update-children-number): Redefine using
	wl-thread-update-line-on-buffer.
	(wl-thread-update-indent-string): Abolished.

        * Version number is increased to 2.9.11.

2002-05-01  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-e21.el (wl-modeline-biff-state-on): Put risky-local-variable
	property for wl-modeline-biff-state-on,	wl-modeline-biff-state-off,
	wl-modeline-plug-state-on and wl-modeline-plug-state-off.

	* wl-folder.el (wl-folder-buffer-search-entity): Bind case-fold-search
	as nil.

	* wl-thread.el (wl-thread-open-all-unread): Use 
	elmo-folder-list-messages-mark-match.
	(wl-thread-insert-message): Removed argument `mark-alist'.
	(wl-thread-msg-mark-as-important): Use elmo-msgdb-get-mark and
	elmo-msgdb-set-mark.
	(wl-thread-get-children-msgs-uncached): Likewise.
	(wl-thread-get-exist-children): Added argument include-self.
	(wl-thread-delete-message): Follow the change above.

	* wl-summary.el (wl-summary-count-unread): Removed argument.
	(wl-summary-rescan): Follow the change above.
	(wl-summary-mark-as-read-region): Ditto
	(wl-summary-mark-as-unread-region): Ditto.
	(wl-summary-delete-messages-on-buffer): Ditto.
	(wl-summary-sync-update): Ditto.
	(wl-summary-switch-to-clone-buffer): Ditto.
	(wl-summary-goto-folder-subr): Ditto.
	(wl-summary-target-mark-mark-as-read): Ditto.
	(wl-summary-target-mark-mark-as-unread): Ditto.
	(wl-summary-target-mark-mark-as-important): Ditto.
	(wl-summary-insert-thread-entity): Removed argument `mark-alist'.
	(wl-summary-update-thread): Removed argument `mark-alist'.
	(wl-summary-sync-marks): Use elmo-folder-list-messages-mark-match.
	(wl-summary-mark-as-read-all): Use elmo-folder-replace-marks.
	(wl-summary-resume-cache-status): Likewise.
	(wl-summary-prefetch-msg): Use elmo-msgdb-get-mark and
	elmo-msgdb-set-mark.
	(wl-summary-mark-as-read-all): Likewise.
	(wl-summary-delete-cache): Ditto.
	(wl-summary-auto-select-msg-p): Ditto.
	(wl-summary-mark-as-unread): Ditto.
	(wl-summary-no-auto-refile-message-p): Ditto.
	(wl-summary-mark-as-read): Ditto.
	(wl-summary-mark-as-important): Ditto.
	(wl-summary-auto-refile): Follow the change above.
	(wl-summary-delete-all-marks): Removed.
	(wl-summary-resume-marks-and-highlight): Ditto.
	(wl-summary-resume-marks): Ditto.
	(wl-summary-delete-important-msgs-from-list): Ditto.
	(wl-summary-delete-canceled-msgs-from-list): Ditto.

	* wl-folder.el (wl-folder-check-one-entity): Removed argument for
	wl-summary-count-unread.

	* wl-score.el (wl-summary-score-update-all-lines): Ditto.
	(wl-summary-score-update-all-lines): Use
	elmo-msgdb-set-mark.

2002-04-30  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-summary.el (wl-summary-summary-line-already-exists-p): Abolished.
	(wl-summary-insert-sequential): Renamed from wl-summary-insert-summary.
	(wl-summary-create-line): Renamed from
	wl-summary-overview-create-summary-line;
	Argument rearrangement.
	(wl-summary-update-thread): Follow the change above.

	* wl-thread.el (wl-thread-update-line-on-buffer-sub): Likewise.
	(wl-thread-insert-entity-sub): Likewise.

	* wl-summary.el (wl-summary-append-message-func-internal): Removed
	argument `overview', `mark-alist' and added `msgdb'.

	* wl-thread.el (wl-thread-insert-message): Remove argument `overview'.

	* wl-summary.el (wl-summary-insert-summary): Changed argument.
	(wl-summary-rescan): Follow the change above.
	(wl-summary-sync-update): Ditto.
	(wl-summary-insert-thread-entity): Ditto;
	Don't use `let*' in every while loop;
	Detect infinite loop of threads.
	(wl-summary-update-thread): Removed argument `overview'.

	* wl-thread.el (wl-thread-insert-message): Ditto.

	* Version number is increased to 2.9.10.

	* wl-message.el (wl-message-redisplay): Ignore errors while
	wl-message-redisplay-hook.

2002-04-27  Yoichi NAKAYAMA  <yoichi@eken.phys.nagoya-u.ac.jp>

	* wl-draft.el (wl-draft-mimic-kill-buffer): Don't save draft.

2002-04-23  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl.el (wl): inhibit-quit while wl-folder.

2002-04-19  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-draft.el (wl-default-draft-cite): Bind elmo-mime-charset
	while msgdb access.

2002-04-17  Hiroya Murata  <lapis-lazuli@pop06.odn.ne.jp>

	* wl-summary.el (wl-summary-auto-refile): Don't stop mark process
	even if no folder is not created.

2002-04-16  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-vars.el (wl-folder-mime-charset-alist): Added @2ch.

	* wl-summary.el (wl-summary-goto-top-of-current-thread): New
	implementation.
	(wl-summary-target-mark-thread): Ditto.

	* wl-message.el (wl-message-display-internal): Bind elmo-mime-charset.

2002-04-12  TAKAHASHI Kaoru  <kaoru@kaisei.org>

	* wl-util.el (wl-display-bytes): Remove unused function.

2002-04-11  Yoichi NAKAYAMA  <yoichi@eken.phys.nagoya-u.ac.jp>

	* wl.el (wl-check-environment): Cause error when wl-from is nil,
	seems critical one (partially reverse the change in 2002/03/17).

2002-04-09  Yoichi NAKAYAMA  <yoichi@eken.phys.nagoya-u.ac.jp>

	* wl-util.el (wl-sendlog-time): Merge into wl-draft-write-sendlog.
	* wl-draft.el (wl-draft-write-sendlog): Ditto.

2002-04-03  Hiroya Murata  <lapis-lazuli@pop06.odn.ne.jp>

	* wl-summary.el (wl-summary-refile-subr): Cause an error if FOLDER
	is not writable.
	(wl-summary-sync-update): Call `wl-folder-confirm-existence' with
	plugged status instead of `'force' as 2nd argument.

	* wl-folder.el (wl-folder-create-subr): Cause an error if FOLDER
	is not creatable.

	* Version number is increased to 2.9.9.

2002-04-03  Kenichi OKADA  <okada@opaopa.org>

	* wl-summary.el (wl-summary-suspend): New function.

2002-04-03  Kenichi OKADA  <okada@opaopa.org>

	* wl.el (wl): Do not check variables if check is nil.
	* wl-utils.el (wl-collect-draft): New function.
	* wl-folder.el (wl-folder-suspend): Put summary buffers
	and draft buffers at the end of buffer list.
	* wl-draft.el (wl-jump-to-draft-folder): Use `wl-collect-draft'.

2002-04-02  Hiroya Murata  <lapis-lazuli@pop06.odn.ne.jp>

	* wl-message.el (wl-message-buffer-prefetch-get-next): Use while
	loop instead of recursive call.

	* wl-addrmgr.el (wl-addrmgr-quit-yes): Call get-buffer-window with
	2nd argument.

2002-03-24  Yoichi NAKAYAMA  <yoichi@eken.phys.nagoya-u.ac.jp>

	* wl-draft.el (wl-draft-create-contents): Don't take neither
	(function . args) nor (string . something) any more.

	* wl-version.el (wl-generate-user-agent-string): Return string
	without header symbol.
	* wl-draft.el (wl-draft-default-headers): Use it.

	* wl-draft.el (wl-draft-trim-ccs): Renamed from
	`wl-draft-insert-ccs' and return field value instead of inserting
	the header. Abolish cc argument.
	* wl-draft.el (wl-draft-default-headers): Use it for Bcc and Fcc.

	* wl-draft.el (wl-draft-default-headers): Use cons with symbol car
	rather than one with string car.

	* wl-vars.el (wl-draft-additional-header-alist): New variable.
	* wl-draft.el (wl-draft-create-contents): Add it after the default
	headers.

	* wl-draft.el (wl-draft-create-contents): For the case of
	(symbol-or-string . function) insert header only when the function
	returns string value.

2002-03-21  Yoichi NAKAYAMA  <yoichi@eken.phys.nagoya-u.ac.jp>

	* wl-vars.el (wl-draft-fields): "FCC" -> "Fcc".
	* wl-address.el (wl-folder-complete-header-regexp): Ditto.

2002-03-20  Yoichi NAKAYAMA  <yoichi@eken.phys.nagoya-u.ac.jp>

	* wl.el (wl-check-environment): Don't check Message-ID when
	`wl-insert-message-id' is nil.
	Revive checking if `wl-message-id-domain' contains "@".

2002-03-19  Yoichi NAKAYAMA  <yoichi@eken.phys.nagoya-u.ac.jp>

	* wl.el (wl-check-environment): Merge examination for "@" at
	inappropriate position into the first string-match.

	* wl-summary.el (wl-summary-target-mark-print): New function.
	(wl-summary-pipe-message-subr): Extracted from
	`wl-summary-pipe-message'.
	(wl-summary-target-mark-pipe): New function.
	(wl-summary-mode-map): Bind `wl-summary-target-mark-print' and
	`wl-summary-target-mark-pipe'.

2002-03-18  Yoichi NAKAYAMA  <yoichi@eken.phys.nagoya-u.ac.jp>

	* wl.el (wl-check-environment): Rewrite around Message-ID check.

2002-03-17  Yoichi NAKAYAMA  <yoichi@eken.phys.nagoya-u.ac.jp>

	* wl.el (wl-check-environment): Use elmo-warning instead of
	error for non-critical ones.
	Remove trash folder check.
	(wl): Don't ignore error in wl-check-environment.

	* wl-summary.el (wl-summary-get-delete-folder): Add trash folder
	check, which is moved from `wl-check-environment'.
	(Adviced by Teranishi-san [X-Mail-Count: 9661])

2002-03-17  Yoichi NAKAYAMA  <yoichi@eken.phys.nagoya-u.ac.jp>

	* wl-summary.el (wl-summary-write-current-folder): If it cannot
	guess anything, call wl-summary-write.
	(wl-summary-write): Create draft with blank To field.
	* wl-draft.el (wl-draft): Undo unnecessary part of the last change.

2002-03-17  Yoichi NAKAYAMA  <yoichi@eken.phys.nagoya-u.ac.jp>

	* wl-draft.el (wl-draft): Call wl-draft-create-buffer with the
	argument full as well for wl-folder-write-current-folder.
	If wl-*-write-current-folder cannot guess addressee, add blank
	To header.
	Rewrite condition for positioning cursor.

2002-03-15  Yoichi NAKAYAMA  <yoichi@eken.phys.nagoya-u.ac.jp>

	* wl-folder.el (wl-folder-jump-to-next-summary): If the window of
	summary buffer is present, use it.
	(wl-folder-jump-to-previous-summary): Ditto.

2002-03-13  Yoichi NAKAYAMA  <yoichi@eken.phys.nagoya-u.ac.jp>

	* wl-draft.el (wl-draft-create-contents): Fix docstring.

	* wl-summary.el (wl-summary-mode-map): Exchange bindings for
	wl-summary-previous-buffer and wl-summary-next-buffer.

	* wl-folder.el (wl-folder-mode-map): Bind
	wl-folder-jump-to-next-summary and wl-folder-jump-to-previous-summary.
	(wl-folder-jump-to-next-summary): New function.
	(wl-folder-jump-to-previous-summary): Ditto.

	* wl-draft.el (wl-draft): Rearranged.

2002-03-12  Yoichi NAKAYAMA  <yoichi@eken.phys.nagoya-u.ac.jp>

	* wl-draft.el (wl-draft-create-contents): Treat symbol as a name
	of header.
	(wl-draft): Collect arguments for the header as header-alist.
	(wl-draft-forward): Arrange arguments for wl-draft.
	(wl-draft-reply): Ditto.
	(wl-draft-edit-string): Ditto.
	* wl-summary.el (wl-summary-write): Ditto.
	(wl-summary-write-current-folder): Ditto.

	* Version number is increased to 2.9.8.

2002-03-11  Yoichi NAKAYAMA  <yoichi@eken.phys.nagoya-u.ac.jp>

	* wl-xmas.el (wl-draft-overload-menubar): Add menu properly.

	* wl-mule.el (wl-draft-overload-menubar): Taken from wl-e21.el.

	* wl-summary.el (wl-summary-write-current-folder): Call wl-draft
	even if the guess failed.

	* wl-e21.el (wl-folder-toolbar): Remove "Guess" icon.
	(wl-summary-toolbar): Remove "Guess" icon and use "New" icon for
	wl-summary-write-current-folder.
	* wl-xmas.el: Ditto.

2002-03-11  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-summary.el (wl-summary-next-page): Force display message if
	message is not displayed yet.
	(wl-summary-prev-page): Ditto.

2002-03-11  J.ANirNtme Marant <jerome.marant@free.fr>

	* wl-folder.el (wl-folder-mode-menu-spec): Fixed typo.

2002-03-10  Yoichi NAKAYAMA  <yoichi@eken.phys.nagoya-u.ac.jp>

	* wl-e21.el (wl-draft-overload-menubar): Use define-key-after to
	add "Preview Message" and "Save Draft and Exit".

2002-03-10  Yoichi NAKAYAMA  <yoichi@eken.phys.nagoya-u.ac.jp>

	* wl-addrmgr.el (wl-addrmgr-quit-yes): Put cursor on draft buffer
	if addrmgr is called from draft in splitted window.

	* wl-e21.el (wl-draft-overload-menubar): Undo last change.
	* wl-mule.el: Ditto.
	* wl-xmas.el: Ditto.

2002-03-09  Yoichi NAKAYAMA  <yoichi@eken.phys.nagoya-u.ac.jp>

	* wl-folder.el (wl-folder-mode-menu-spec): Fix docstring.

	* wl-e21.el (wl-folder-toolbar): Add "Go to draft folder" entry.
	* wl-xmas.el (wl-folder-toolbar): Ditto.

2002-03-08  Yoichi NAKAYAMA  <yoichi@eken.phys.nagoya-u.ac.jp>

	* wl-e21.el (wl-draft-overload-menubar): Add wl-draft-preview-message
	and wl-draft-save-and-exit.
	(wl-draft-toolbar): Add wl-draft-save-and-exit.
	* wl-xmas.el: Ditto.
	* wl-mule.el: Ditto.

	* wl-folder.el (wl-folder-goto-draft-folder): New function.
	(wl-folder-mode-menu-spec): Add wl-folder-goto-draft-folder entry.

2002-03-08  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-summary.el (wl-summary-save-view-cache): Clone temporal mark
	lists for saving buffer.

2002-03-07  Yoichi NAKAYAMA  <yoichi@eken.phys.nagoya-u.ac.jp>

	* wl-draft.el (wl-draft): Abolish summary-buf argument and use
	parent-folder argument instead of it.
	(wl-draft-create-buffer): Ditto.
	(wl-draft-forward): Ditto.
	(wl-draft-reply): Ditto.
	* wl-summary.el (wl-summary-write): Ditto.
	(wl-summary-write-current-folder): Ditto.

	* wl-draft.el (wl-draft-create-buffer): If called by W (Folder),
	don't set wl-draft-buffer-cur-summary-buffer so as to go back to
	Folder buffer after composing.

2002-03-07  Katsumi Yamaoka  <yamaoka@jpl.org>

	* wl-draft.el (wl-draft-insert-x-face-field-here): Strip X-Face
	header if the file `wl-x-face-file' already contains it.

2002-03-06  Yoichi NAKAYAMA  <yoichi@eken.phys.nagoya-u.ac.jp>

	* wl-folder.el (wl-folder-mode-menu-spec): Add "Write for current
	folder" entry.
	* wl-summary.el (wl-summary-mode-menu-spec): Ditto.
	* wl-e21.el (wl-folder-toolbar): Ditto.
	* wl-xmas.el (wl-folder-toolbar): Ditto.

2002-03-05  Yoichi NAKAYAMA  <yoichi@eken.phys.nagoya-u.ac.jp>

	* wl-folder.el (wl-folder-goto-folder-sticky): Simply call
	wl-folder-goto-folder with sticky argument.
	(wl-folder-mode-map): Bind wl-folder-goto-folder-sticky to "G".

2002-03-05  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-summary.el (wl-summary-mode-map): Bind wl-summary-next-buffer
	and wl-summary-previous-buffer.
	(wl-summary-next-buffer): New function.
	(wl-summary-previous-buffer): Ditto.

2002-03-05  Yoichi NAKAYAMA  <yoichi@eken.phys.nagoya-u.ac.jp>

	* wl-folder.el (wl-folder-mode-map): Bind [(shift return)] for
	wl-folder-jump-to-current-entity-with-arg.
	(wl-folder-jump-to-current-entity-with-arg): Simply call with arg
	`wl-folder-jump-to-current-entity'.
	* wl-summary.el (wl-summary-mode-map): Bind "G" for
	`wl-summary-goto-folder-sticky'.
	(wl-summary-goto-folder-sticky): Simply call with the sticky arg
	`wl-summary-goto-folder'.
	(wl-summary-goto-folder-subr): Add 7th argument force-exit.
	Unless force-exit, do not clean temp. marks for sticky summary.
	(wl-summary-goto-folder): Now the prefix argument means force-exit.

2002-03-05  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-summary.el (wl-summary-mark-as-important): Refetch if cache is
	not entire.

2002-03-04  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-summary.el (wl-summary-mode-map): Bind wl-summary-save-status
	to `C-x C-s'.
	(wl-summary-save-status): New command.
	(wl-summary-exit): Don't clean-up temp marks when sticky.
	(Applied patch from Nakayama-san [wl: 09548])
	(wl-summary-delete-all-temp-marks): Added optional argument no-msg;
	Do nothing when no mark data.
	(wl-summary-save-view-cache): Copy local variables to the temp buffer;
	Call `wl-summary-delete-all-temp-marks' before saving.

2002-03-04  Mito  <mito@mxa.nes.nec.co.jp>

	* wl-mime.el (wl-mime-save-content): Don't save if answered "no".

2002-02-28  Yoichi NAKAYAMA  <yoichi@eken.phys.nagoya-u.ac.jp>

	* wl.el (wl-check-environment): Also cause error when (system-name)
	returns "localhost.localdomain". (Although it doesn't affect because
	of condition-case, see change in 2002-01-23 by Teranisi-san.)

2002-02-26  Yoichi NAKAYAMA  <yoichi@eken.phys.nagoya-u.ac.jp>

	* wl-folder.el (wl-folder-update-newest): Use wl-string-match-member
	instead of wl-match-member with wl-folder-hierarchy-access-folders.

	* wl-vars.el (wl-folder-hierarchy-access-folders): Change default
	value.

2002-02-24  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-draft.el (wl-draft-reply): If r-to-list is a function, call it;
	Likewise r-cc-list and r-ng-list.

2002-02-20  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-draft.el (wl-draft-send): Use mime-header-encode-method-alist
	only if it is bound as variable.

	* wl-mime.el (wl-draft-preview-message): Ditto.

2002-02-19  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-message.el (wl-message-add-buttons-to-header): Eliminated
	needless `goto-char'.

	* wl-summary.el (wl-summary-set-message-buffer-or-redisplay): Call
	`wl-summary-redisplay-no-mime-internal' instead of
	`wl-summary-redisplay-no-mime'.
	(wl-summary-redisplay-no-mime): Changed argument;
	Call `wl-summary-redisplay-no-mime-internal'.

	* wl-mime.el (wl-draft-preview-message): Bind
	`mime-header-encode-method-alist' locally.

	* wl-draft.el (wl-draft-eword-encode-address-list): New function.
	(wl-draft-std11-parse-addresses): Added the first address check.
	(wl-draft-send): Bind `mime-header-encode-method-alist' locally.

	* Version number is increased to 2.9.7.

2002-02-16  Kenichi OKADA  <okada@opaopa.org>

	* wl-draft.el (wl-draft-send-mail-with-smtp): Check error.

2002-02-15  Daiki Ueno  <ueno@unixuser.org>

	* wl-demo.el (wl-demo-insert-image): Don't touch the specifiers
	related to scrollbar support, if there is no such a feature
	compiled in.

2002-02-11  Hiroya Murata  <lapis-lazuli@pop06.odn.ne.jp>

	* wl-message.el (wl-message-buffer-prefetch-next): Don't call
	`wl-message-buffer-prefetch-get-next' if FOLDER is not a target
	for prefetch.

2002-02-07  Kenichi OKADA  <okada@opaopa.org>

	* wl-summary.el (wl-summary-pick): Fix for no match.

2002-02-01  Kenichi OKADA  <okada@opaopa.org>

	* wl-draft.el (wl-draft-save):
	Override `mime-header-encode-method-alist'.

2002-02-01  Kenichi OKADA  <okada@opaopa.org>

	* wl-folder.el (wl-folder-pick): New function.
	Define key as "?".

2002-02-01  Kenichi OKADA  <okada@opaopa.org>

	* wl-draft.el (wl-draft-send-mail-with-pop-before-smtp):
	Fix for unplugged.

2002-02-01  Kenichi OKADA  <okada@opaopa.org>

	* wl-folder.el (wl-folder-virtual): New function.
	Define key as "V".

2002-02-01  Kenichi OKADA  <okada@opaopa.org>

	* wl-fldmgr.el (wl-fldmgr-make-filter): Make filter folder of
	multi folder if entity is group.

2002-02-01  Kenichi OKADA  <okada@opaopa.org>

	* wl-message.el (wl-message-buffer-prefetch-debug): Default value
	is nil.

2002-02-01  Kenichi OKADA  <okada@opaopa.org>

	* wl-summary.el (wl-summary-pick): Fix for killed messages.
	(wl-summary-target-mark-msgs): Return the number of marked messages.

2002-01-26  ARISAWA Akihiro  <ari@mbf.sphere.ne.jp>

	* wl-summary.el (wl-summary-sync): Fixed problem when "last:" or
	"first:" is specified.

2002-01-25  Yoichi NAKAYAMA  <yoichi@eken.phys.nagoya-u.ac.jp>

	* wl-vars.el (wl-from): Use return value of function
	user-full-name instead of the variable user-full-name since
	XEmacs-20.4 doesn't set this variable.

2002-01-25  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl.el (wl-other-frame): If wl-folder-use-frame is non-nil,
	call `wl' directly.

2002-01-25  pf21 GOTO_Toshiya <goto.toshiya@canon.co.jp>

	* wl-draft.el (wl-draft-reedit): Removed duplicated
	switch-to-buffers.

2002-01-25  Katsumi Yamaoka  <yamaoka@jpl.org>

	* wl.el (wl-other-frame): Removed garbages.

2002-01-25  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-e21.el (wl-draft-key-setup): Don't bind C-x C-s

	* wl-xmas.el (wl-draft-key-setup): Ditto.

	* wl-mule.el (wl-draft-key-setup): Ditto.

	* wl-draft.el (wl-draft-create-buffer): Don't clear buffer-file-name.
	(wl-draft-reedit): Ditto.
	(wl-draft-prepare-edit): Add `wl-draft-save' to
	`local-write-file-hooks'.
	(wl-draft-prepare-edit): Call clear-visited-file-modtime.
	(wl-draft-reedit): Set buffer-file-name.
	(wl-draft-reedit): Add `wl-draft-save' to `local-write-file-hooks'.


	* wl.el (wl-exit): If wl-delete-startup-frame-function is non-nil,
	call it.
	(wl-delete-startup-frame-function): New variable.
	(wl-other-frame): New function
	(Original was written by Yamaoka san [wl: 09239]).

	* wl-folder.el (wl-folder): Set up `wl-delete-startup-frame-function'
	if `wl-folder-use-frame'.

2002-01-24  Kenichi OKADA  <okada@opaopa.org>

	* wl-message.el (wl-message-buffer-prefetch-p): Check plugged.

2002-01-24  Kenichi OKADA  <okada@opaopa.org>

	* wl-message.el (wl-message-buffer-prefetch-move-spec-plugged-alist):
	New variable.
	(wl-message-buffer-prefetch-move-spec-unplugged-alist): New variable.
	(wl-message-buffer-prefetch-get-next): Use them.
	* wl-demo.el (wl-demo-copyright-notice): Add 2002.

2002-01-24  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-summary.el (wl-summary-reedit): Don't enclose wl-draft-reedit
	with unwind-protect.

	* wl-draft.el (wl-draft-reedit): Rewrite.
	(wl-jump-to-draft-buffer): Don't use `buffer-file-name'.
	(wl-draft-save): Insert header separator if it does not exist;
	Removed condition-case.

	* wl-summary.el (wl-summary-reedit): Revert last change.

	* wl-draft.el (wl-draft-save): Rewrite.
	(wl-draft-create-buffer): Set buffer-file-name as nil.

	* wl-summary.el (wl-summary-reedit): Don't care about draft folder.

	* wl-thread.el (wl-thread-get-depth-of-current-line): Rewrite.

	* wl-vars.el (wl-summary-no-mime-folder-list): Changed default value to
	nil.

2002-01-24  Kenichi OKADA  <okada@opaopa.org>

	* wl-message.el (wl-message-buffer-prefetch): Require `count'.
	If count is nil, do not prefetch.
	(wl-message-buffer-prefetch-next): Next.

2002-01-24  Kenichi OKADA  <okada@opaopa.org>

	* wl-draft.el (wl-draft-prepare-edit): Use `wl-draft-save'.

2002-01-24  Kenichi OKADA  <okada@opaopa.org>

	* wl-draft.el (wl-draft-insert-mail-header-separator): Use
	`delete-backward-char'
	(wl-draft-prepare-edit): Check major-mode.
	(wl-draft-decode-header): Rewrite.
	(wl-draft): Fix.

2002-01-24  Kenichi OKADA  <okada@opaopa.org>

	* wl-message.el (wl-message-buffer-prefetch-subr): Fix.

2002-01-23  Kenichi OKADA  <okada@opaopa.org>

	* wl-message.el (wl-message-buffer-prefetch-p): Check size.
	(wl-message-buffer-prefetch-get-next): Remove size checking.
	(wl-message-buffer-prefetch): call `wl-message-buffer-prefetch-p'.

2002-01-23  Kenichi OKADA  <okada@opaopa.org>

	* wl-draft.el (wl-draft-decode-body): Remove `debug'.
	(wl-draft-default-headers): Fix.

2002-01-23  Yoichi NAKAYAMA  <yoichi@eken.phys.nagoya-u.ac.jp>

	* wl-draft.el (wl-draft-default-headers): Insert return value of
	`wl-generate-mailer-string-function'.

2002-01-23  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-draft.el (wl-draft-decode-body): Give an argument for delete-char.
	(wl-draft-insert-mail-header-separator): Ditto.

	* wl.el (wl): Enclose `wl-check-environment' with `condition-case'
	again (Reverted the change on 2002-01-17 by OKADA san).

2002-01-23  Kenichi OKADA  <okada@opaopa.org>

	* wl-draft.el (wl-draft): Rewrite.
	(wl-draft-create-buffer): New function.
	(wl-draft-create-contents): Ditto.
	(wl-draft-prepare-edit): Ditto.
	(wl-draft-decode-header): Ditto.
	(wl-draft-decode-body): Ditto.
	(wl-draft-check-new-line): Ditto.
	(wl-draft-default-headers): Ditto.
	(wl-draft-insert-mail-header-separator): Ditto.

2002-01-23  Kenichi OKADA  <okada@opaopa.org>

	* Version number is increased to 2.9.6.

2002-01-23  Kenichi OKADA  <okada@opaopa.org>

	* wl-draft.el (wl-draft-delete-field): Optional argument.
	(wl-draft-delete-fields): Ditto.

2002-01-23  Kenichi OKADA  <okada@opaopa.org>

	* wl-message.el (toplevel): Eliminated byte-compile warning.
	for `itimer-function', `delete-timer' and `itimer-list'.

2002-01-23  Kenichi OKADA  <okada@opaopa.org>

	* wl-vars.el (wl-message-buffer-prefetch-threshold): New variable.
	* wl-message.el (wl-message-buffer-prefetch-get-next): Use
	`wl-message-buffer-prefetch-threshold'.
	* wl-summary.el (wl-summary-redisplay-internal): Remove
	the check of `wl-message-buffer-prefetch-depth'.

2002-01-23  Kenichi OKADA  <okada@opaopa.org>

	* wl-message.el (wl-message-buffer-prefetch-get-next): Check the
	size of article.
	(wl-message-buffer-prefetch-subr): Remove size check.

2002-01-22  Yoichi NAKAYAMA  <yoichi@eken.phys.nagoya-u.ac.jp>

	* wl-vars.el (wl-plugged): Make customizable.

2002-01-22  Kenichi OKADA  <okada@opaopa.org>

	* wl-message.el (wl-message-buffer-prefetch-clear-timer): New function.
	(wl-message-buffer-prefetch-set-timer): New function.
	(wl-message-buffer-prefetch-get-next): New function.
	(wl-message-buffer-prefetch): New function.
	(wl-message-buffer-prefetch-next): Rewrite.
	(wl-message-buffer-prefetch-subr): Rewrite.
	* wl-vars.el (wl-auto-prefetch-first): New variable.
	* wl-summary.el (wl-summary-goto-folder-subr): Call
	`wl-message-buffer-prefetch' if `wl-auto-prefetch-first' is non-nil.

2002-01-22  Kenichi OKADA  <okada@opaopa.org>

	* wl-score.el (wl-summary-score-update-all-lines): Do not call
	`wl-summary-unread-message-hook'.

2002-01-22  Kenichi OKADA  <okada@opaopa.org>

	* wl-summary.el (wl-summary-input-range): New range `cache-status'.
	(wl-summary-sync): Call `wl-summary-resume-cache-status'
	if range is `cache-status'.

2002-01-22  Kenichi OKADA  <okada@opaopa.org>

	* wl-message.el (wl-message-buffer-prefetch-subr):
	Improve debug message.

2002-01-22  Kenichi OKADA  <okada@opaopa.org>

	* wl-draft.el (wl-draft-send-mail-with-smtp): run-hook
	`wl-mail-send-pre-hook'.
	(wl-draft-send-mail-with-qmail): Ditto.
	(wl-draft-normal-send-func): Delete `wl-mail-send-pre-hook'.

2002-01-22  Kenichi OKADA  <okada@opaopa.org>

	* wl-message.el (wl-message-buffer-prefetch-subr):
	Fix for cancel-function-timers bug.
	(wl-message-buffer-prefetch-debug): Default value is t.

2002-01-22  Kenichi OKADA  <okada@opaopa.org>

	* wl-message.el (wl-message-buffer-prefetch-next): Rewrite.
	(wl-message-buffer-prefetch-subr): Rewrite.
	Rename from `wl-message-buffer-prefetch'.

2002-01-21  Yoichi NAKAYAMA  <yoichi@eken.phys.nagoya-u.ac.jp>

	* wl-vars.el (wl-draft-cite-function): Moved from `wl-draft.el'.
	(wl-default-draft-cite-decorate-author): Ditto.

	* wl-draft.el (wl-draft-cite-function): Removed.
	(wl-default-draft-cite-decorate-author): Ditto.

2002-01-21  Yoichi NAKAYAMA  <yoichi@eken.phys.nagoya-u.ac.jp>

	* wl-draft.el (wl-default-draft-cite-decorate-author): New variable.
	(wl-default-draft-cite): Do not arrange author name if the value of
	`wl-default-draft-cite-decorate-author' is nil.

2002-01-21  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-mime.el (wl-mime-save-content): Use `message' instead of `error'.

	* wl-folder.el (wl-folder-check-one-entity): Don't care
	`elmo-folder-use-flag-p'.

2002-01-21  Kenichi OKADA  <okada@opaopa.org>

	* wl-folder (wl-folder-check-one-entity): Fix
	problem if unread is nil.

2002-01-19  Yoichi NAKAYAMA  <yoichi@eken.phys.nagoya-u.ac.jp>

	* wl-address.el (wl-address-make-completion-list): Check whether
	the address is a group list.
	* wl-addrmgr.el (wl-addrmgr-mark-check): Ditto.

2002-01-19  Hiroya Murata  <lapis-lazuli@pop06.odn.ne.jp>

	* wl-folder.el (wl-folder-check-one-entity): Fixed problem;
	The number of the messages of new and unread does not count
	correctly.

	* wl-summary.el (wl-summary-count-unread): Changed to return
	`(new . unread)' instead of total.
	(wl-summary-sync-update): Follow the change above.

	* wl-score.el (wl-summary-score-update-all-lines): Likewise.

2002-01-19  Yoichi NAKAYAMA  <yoichi@eken.phys.nagoya-u.ac.jp>

	* wl-address.el (wl-address-make-completion-list): Do not enclose
	address by " <" and ">" if associated realname is "".
	* wl-addrmgr.el (wl-addrmgr-mark-check): Ditto.
	This is against the promblem with group list in .addresses pointed
	out by Tomotaka SUWA <cooper@saitama.fujimic.fujisankei-g.co.jp>.

2002-01-19  Yoichi NAKAYAMA  <yoichi@eken.phys.nagoya-u.ac.jp>

	* wl-draft.el (wl-draft-write-sendlog): The first argument of
	message is a format control string.
	* wl-expire.el (wl-expire-append-log): Ditto.
	* wl-mime.el (wl-summary-burst-subr): Ditto.
	* wl-mule.el (wl-face-spec-set-match-display): Ditto.
	* wl-summary.el (wl-summary-edit-addresses-subr): Ditto.

2002-01-19  Kenichi OKADA  <okada@opaopa.org>

	* wl-vars.el (wl-message-buffer-prefetch-depth): Default is 3.
	wl.el (wl-check-variables): Rename from `wl-check-type'.
	(wl-check-variables-alist): Rename from `wl-check-type-variables'.
	(wl-check-variables-2): New function.
	(wl): Call `wl-check-variables-2'.

2002-01-19  Yoichi NAKAYAMA  <yoichi@eken.phys.nagoya-u.ac.jp>

	* wl-fldmgr.el (wl-fldmgr-rename): Fixed around message appear
	after renaming folder in access group.

2002-01-19  Kenichi OKADA  <okada@opaopa.org>

	* wl-vars.el (wl-message-buffer-prefetch-depth): New variable.
	(wl-message-buffer-prefetch-idle-time): Moved from `wl-message.el'
	* wl-message.el (wl-message-buffer-prefetch-next): Rewrite.
	(wl-message-buffer-prefetch): Rewrite.
	(wl-message-buffer-prefetch-idle-time): Removed.
	* wl-summary.el (wl-summary-redisplay-internal):
	Prepare prefetch with `wl-message-buffer-prefetch-depth'.
	Error check for `wl-message-buffer-prefetch-depht'.

2002-01-19  Kenichi OKADA  <okada@opaopa.org>

	* Version number is increased to 2.9.5.
	* wl-summary.el (wl-summary-prefetch-msg): Fix for buffer-cache.

2002-01-19  Kenichi OKADA  <okada@opaopa.org>

	* wl-vars.el (wl-fldmgr-allow-rename-access-group): New variable.
	* wl-fldmgr.el (wl-fldmgr-rename): Allow rename for access group.
	Based on the patch written by
	Yoichi NAKAYAMA <yoichi@eken.phys.nagoya-u.ac.jp>

2002-01-18  Kenichi OKADA  <okada@opaopa.org>

	* wl-draft.el (wl-draft-raw-send): Fix for
	`wl-news-send-pre-hook'

2002-01-17  Kenichi OKADA  <okada@opaopa.org>

	* wl-utils.el (wl-message-id-function): New variable.
	* wl-draft.el (wl-draft-insert-required-fields):
	Use `wl-message-id-function'.

2002-01-17  Kenichi OKADA  <okada@opaopa.org>

	* wl-vars.el (wl-message-id-use-wl-from): New variable.
	* wl-utils.el (wl-draft-make-message-id-string):
	Use `wl-from' for domain part of Message-ID
	if `wl-message-id-use-wl-from' if non-nil.
	* wl.el (wl-check-environment): Fix for `wl-message-id-use-wl-from'

2002-01-17  Kenichi OKADA  <okada@opaopa.org>

	* wl.el (wl): Call `wl-check-type'
	Do not 'condition-case'.

2002-01-17  Kenichi OKADA  <okada@opaopa.org>

	* wl.el (wl-check-type): New function.
	(wl-check-type-variables): New variable.

2002-01-17  Kenichi OKADA  <okada@opaopa.org>

	* wl-vars.el (wl-pop-before-smtp-authenticate-type): Fix.

2002-01-17  Kenichi OKADA  <okada@opaopa.org>

	* wl-draft.el (wl-smtp-password-key): New function.
	(wl-smtp-extension-bind): Use `wl-smtp-password-key'
	(wl-draft-send-mail-with-smtp): Ditto.
	(wl-draft-send-mail-with-pop-before-smtp): Fix.

2002-01-12  Kenichi OKADA  <okada@opaopa.org>

	* wl-vars.el (wl-unique-id-suffix): Move from `wl-utils.el'
	* wl-utils.el (wl-unique-id-suffix): Remove.

2002-01-07  Kenichi OKADA  <okada@opaopa.org>

	* Version number is increased to 2.9.4.

2002-01-06  Kenichi OKADA  <okada@opaopa.org>

	* wl-utils.el (wl-unique-id-suffix): New variable.
	(wl-unique-id): Use `wl-unique-id-suffix'

2002-01-06  Hiroya Murata  <lapis-lazuli@pop06.odn.ne.jp>

	* wl-summary.el (wl-summary-pick): Use `elmo-folder-search'
	instead of `elmo-msgdb-search'.

	* Version number is increased to 2.9.3.

2002-01-05  OKAZAKI Tetsurou  <okazaki@be.to>

	* wl-summary.el (wl-summary-refile-subr): Remove `interactive'.

2001-12-29  Kenichi OKADA  <okada@opaopa.org>

	* wl-draft.el (wl-sent-message-queued): New buffer-local variable.
	(wl-draft-dispatch-message): Changed for send-later.
	(wl-draft-queue-flush): Ditto.
	(wl-draft): Clear `wl-sent-message-queued'.
	(wl-draft-reedit): Ditto.
	(wl-draft-queue-info-operation): Added `wl-sent-message-queued'
	* wl-vars.el (wl-draft-force-queuing): New variable.
	(wl-draft-force-queuing-mail): New variable.
	(wl-draft-force-queuing-news): New variable.

2001-12-24  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-draft.el (wl-draft-hide): Removed `interactive'.
	(Pointed out by YAMASHITA Junji <ysjj@unixuser.org>)

2001-12-23  Hiroya Murata  <lapis-lazuli@pop06.odn.ne.jp>

	* Version number is increased to 2.9.2.

2001-12-21  Katsumi Yamaoka  <yamaoka@jpl.org>

	* wl-draft.el (wl-draft-elide-region): New user command.
	* wl-vars.el (wl-draft-elide-ellipsis): New user option.

	* wl-e21.el (wl-draft-key-setup): Bind the key `C-c C-d' to the
	command `wl-draft-elide-region'.
	* wl-mule.el: Ditto.
	* wl-xmas.el: Ditto.

2001-12-20  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-util.el (wl-biff-check-folder): Fix for non-pop3 folders.
	(wl-biff-check-folder-async): Removed needless let.

2001-12-19  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-util.el (wl-biff-check-folders): Set `no-cache' argument of
	wl-folder-get-elmo-folder.
	(wl-biff-check-folder): Set `biff' argument of
	`wl-folder-check-one-entity'.
	(wl-biff-check-folder-async): Setup `biff' slot of folder.

	* wl-folder.el (wl-folder-get-elmo-folder): Added `no-cache' argument.
	(wl-folder-check-one-entity): Added `biff' argument;
	Setup `biff' slot of folder.

	* Version number is increased to 2.9.1.

2001-12-18  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-fldmgr.el (wl-fldmgr-add-completion-all-completions): Removed
	comment out and fixed.
	(wl-fldmgr-add-completion-subr): Ditto.

	* wl-summary.el (wl-summary-exit): Changed order of saving summary view
	and msgdb.

	* wl.el (wl-toggle-plugged): Save summary view.

2001-12-17  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-summary.el (wl-summary-open-folder): Bind `elmo-mime-charset'.

2001-12-17  Hiroya Murata  <lapis-lazuli@pop06.odn.ne.jp>

	* wl-addrmgr.el (wl-addrmgr-mode): Fixed docstring.

2001-12-17  Katsumi Yamaoka  <yamaoka@jpl.org>

	* wl-e21.el (wl-e21-toolbar-configurations): Replace
	`auto-resize-tool-bar' to `auto-resize-tool-bars'.  Pavel Janik
	<Pavel@Janik.cz> has realized this in the emacs-w3m list.

	* wl-demo.el (wl-demo-insert-image): Retry to read *.img file only
	if it was failed.
	(wl-demo): Disable undo in the demo buffer.

2001-12-15  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-version.el (wl-version): Changed codename.

	* Version number is increased to 2.9.0.

2001-12-14  Takuo KITAME <kitame@northeye.org>

	* wl-acap.el (wl-acap-init): Fixed `y-or-n-p' prompts.
	* wl-folder.el (wl-folder-sync-current-entity, wl-folder-create-subr)
	(wl-folder-mark-as-read-all-current-entity): Ditto.

2001-12-13  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-vars.el (wl-from-width): Define as obsolete variable.
	(wl-subject-length-limit): Ditto.

	* wl.el (wl-plugged-dop-queue-status): Shrink queue list.

	* wl-expire.el (wl-folder-expire-entity): Follow the last change on
	wl-summary-save-view.

	* wl.el (wl-save-status): Ditto.
	(Pointed out by MAKINO Takashi <makino@cyber.office.ne.jp>)

	* wl-summary.el (wl-summary-save-view): Removed unused argument.
	(wl-summary-exit): Follow the change above.
	(wl-summary-goto-folder-subr): Ditto.

	* wl-folder.el (wl-folder-create-subr): Don't use
	`elmo-folder-creatable-p'.

2001-12-12  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-demo.el (wl-demo-icon-name): Use X'mas logo on Dec 25 too.

2001-12-12  Katsumi Yamaoka  <yamaoka@jpl.org>

	* wl-demo.el (wl-demo-image-type-alist): Add bitmap, prefer xbm
	rather than bitmap on Emacs 21.
	(wl-demo-insert-image): Decode bitmap data line by line when Emacs
	21 is running (cf. mule-ja:08245); make Emacs 21 use BITMAP-MULE
	for xbm if the new redisplay engine is not available.

2001-12-11  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-folder.el (wl-folder-init-hook): New hook.
	(wl-folder-init): Run `wl-folder-init-hook'.

2001-12-11  Katsumi Yamaoka  <yamaoka@jpl.org>

	* wl-demo.el (wl-demo-insert-image): Fixed the face name for xbm.

2001-12-11  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-acap.el (wl-acap-cache-filename): New variable.
	(wl-acap-exit): Resume elmo-msgdb-directory only if it is preserved.
	(wl-acap-init): Use cache if no ACAP server found.

2001-12-11  TAKAHASHI Kaoru  <kaoru@kaisei.org>

	* wl-acap.el (wl-acap-original-msgdb-directory): Renamed from
	`wl-acap-original-msgdb-dir'.

	* wl-vars.el (wl-icon-directory): Renamed from `wl-icon-dir'.
	(wl-score-files-directory): Renamed from `wl-score-files-dir'.

	* wl-mime.el (wl-mime-save-directory): Renamed from
	`wl-mime-save-dir'.

2001-12-11  Katsumi Yamaoka  <yamaoka@jpl.org>

	* wl-vars.el (wl-icon-dir): Fixed the docstring.

	* wl-demo.el: Require `path-util'.
	(wl-demo-bitmap-mule-available-p): New internal variable.
	(wl-demo-image-type-alist): Use it; don't require `bitmap', use
	`module-installed-p' instead.
	(wl-demo-insert-image): Use *.img file for a bitmap image.
	(wl-demo): Don't call the ascii demo recursively.

2001-12-11  TAKAHASHI Kaoru  <kaoru@kaisei.org>

	* Version number is increased to 2.7.7.

2001-12-11  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl.el (wl-exit): Eliminated byte-compile warning.

2001-12-10  Hiroya Murata  <lapis-lazuli@pop06.odn.ne.jp>

	* wl-vars.el (wl-summary-update-confirm-threshold): Defined as
	obsolete variable using `elmo-define-obsolete-variable'.
	(wl-fetch-confirm-threshold): Ditto.
	(wl-cache-prefetch-folder-type-list): Ditto.
	(wl-cache-prefetch-folder-list): Ditto.

2001-12-10  Katsumi Yamaoka  <yamaoka@jpl.org>

	* wl-demo.el: Rewrote to make it read a logo file at the run-time.
	(wl-demo-icon-name): Use Xmas logo at the end of the year.
	(wl-demo-insert-image): New function.
	(wl-demo-insert-text): New function.
	(wl-demo-image-type-alist): Redefine as a function.
	(wl-demo): Use `wl-demo-insert-image' and `wl-demo-insert-text'.
	(wl-demo-with-temp-file-buffer): Removed.
	(wl-logo-xpm): Removed.
	(wl-logo-xbm): Removed.
	(wl-logo-bitmap): Removed.

2001-10-30  Nishimoto Masaki <nishimoto@gaju.org>

	* wl-expire.el (wl-expire-localdir-date-folder-name-fmt): New variable.
	(wl-expire-localdir-get-folder-function): New user option.
	(wl-expire-localdir-get-folder): New function.
	(wl-expire-localdir-date): Ditto.

2001-12-10  TAKAHASHI Kaoru  <kaoru@kaisei.org>

	* wl-folder.el (wl-folder-check-one-entity): Fixed car of return
	value.  Refactoring `wl-folder-notify-deleted' is nil case.
	Fixed unread number mismatch when all-unread < unread.

2001-12-08  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-vars.el (wl-summary-update-confirm-threshold): Abolished.
	(wl-fetch-confirm-threshold): Ditto.

	* wl-summary.el (wl-summary-confirm-appends): Removed.
	(wl-summary-sync-update): Don't refer
	`wl-summary-update-confirm-threshold' (It is now abolished).

	* wl-message.el (wl-message-display-internal): Don't refer
	`wl-fetch-confirm-threshold' (It is now abolished).

2001-12-07  Katsumi Yamaoka  <yamaoka@jpl.org>

	* wl-demo.el (wl-logo-xpm): Use Xmas logo temporally.

2001-12-07  Yoichi NAKAYAMA  <yoichi@eken.phys.nagoya-u.ac.jp>

	* wl-vars.el (wl-summary-from-width): Rename from wl-from-width.
	(wl-summary-subject-length-limit): Rename from wl-subject-length-limit.
	Change default value to nil.
	(wl-summary-indent-length-limit): The value can be nil, nil means
	unlimited.

	* wl-summary.el: Don't set limit for indent length if the value of
	wl-summary-indent-length-limit is nil.
	If the value of wl-summary-width is nil, it means only that the	width
	of summary is unlimited (nil doesn't mean that the indent length is
	unlimited).

	* wl-thread.el: Ditto.

2001-12-06  Hiroshi Tsutsui  <tsutsui@easter.kuee.kyoto-u.ac.jp>

	* wl-vars.el (wl-summary-update-confirm-threshold): The value can
	be nil,	nil means never confirm.
	* wl-summary.el (wl-summary-confirm-appends): Ditto.

2001-12-06  Yoichi NAKAYAMA  <yoichi@eken.phys.nagoya-u.ac.jp>

	* wl-vars.el (wl-subject-length-limit): This value can be nil (nil
	means unlimited).

2001-12-05  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-draft.el (wl-draft-write-sendlog): Use `write-region-as-binary';
	Use `with-temp-buffer'.

2001-12-02  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-folder.el (wl-folder-get-entity-id): Ignore nemacs (rewrite
	with new backquote style).
	(wl-folder-get-entity-from-buffer): Ditto.

2001-12-02  Hiroya Murata  <lapis-lazuli@pop06.odn.ne.jp>

	* wl-version.el (nemacs-version): Eliminated.
	(wl-extended-emacs-version2): Ignore nemacs.
	(wl-extended-emacs-version3): Ditto.

2001-11-30  Tatsuya Kinoshita  <tats@iris.ne.jp>

	* wl-vars.el (wl-draft-add-references): Set default value as nil.
	(wl-draft-add-in-reply-to): New variable.
	* wl-draft.el (wl-draft-add-references, wl-draft-add-in-reply-to):
	Divided from `wl-draft-add-references'; add support `In-Reply-To'.
	(wl-draft-yank-from-mail-reply-buffer): Use
	`wl-draft-add-in-reply-to'.
	(wl-draft-insert-current-message): Ditto.

2001-12-01  Hiroya Murata  <lapis-lazuli@pop06.odn.ne.jp>

	* wl-vars.el (wl-folder-process-duplicates-alist): Fixed
	typo (kill->hide).
	(wl-message-buffer-prefetch-folder-type-list): Added elements
	`mark' and `cache' instead of `internal'.

2001-11-30  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-acap.el (wl-acap-init): If initialization via ACAP is interrupted,
	resume msgdb directory.

2001-11-28  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl.el (wl-exit): Call `wl-acap-exit'.

	* wl-summary.el (wl-summary-message-string): New function.
	(wl-summary-reedit): Use it.
	(wl-summary-resend-bounced-mail): Remove needless let.
	(wl-summary-supersedes-message): Ditto.
	(wl-summary-save): Ditto.

	* wl-acap.el (wl-acap-original-msgdb-dir): New variable.
	(wl-acap-init): Set it.
	(wl-acap-exit): New function.

2001-11-26  TAKAHASHI Kaoru  <kaoru@kaisei.org>

	* wl.el (wl-init): Revert (require 'mime-setup). move from
	toplevel.

2001-11-24  TAKAHASHI Kaoru  <kaoru@kaisei.org>

	* wl-summary.el (wl-summary-write-current-folder): Remove unused
	local variables.  Add error when guess function return invalid
	value.

2001-11-23  TAKAHASHI Kaoru  <kaoru@kaisei.org>

	* wl-folder.el (wl-folder-guess-mailing-list-by-refile-rule):
	Change local variable name.
	(wl-folder-guess-mailing-list-by-folder-name): Ditto.
	(wl-folder-get-newsgroups): Return nil when non-news folder.
	* wl-summary.el (wl-summary-write-current-folder): State through
	when guess-list return nil.
	(wl-summary-write-current-folder-functions): Fixed docstring.

	* wl.el (wl-exit): Changed confirm message.

	* wl.el (wl-init): (require 'mime-setup) move to toplevel.
	* wl-draft.el (wl-draft): Remove verbose `featurep'.

	* wl-e21.el: Removed kludge for Emacs 21 prerelease versions.

2001-11-23  Hiroya Murata  <lapis-lazuli@pop06.odn.ne.jp>

	* wl-vars.el (wl-message-buffer-prefetch-folder-type-list): New
	user option (Renamed from wl-cache-prefetch-folder-type-list).
	(wl-message-buffer-prefetch-folder-list): New user option (Renamed
	from wl-cache-prefetch-folder-list).

	* wl-message.el (wl-message-buffer-prefetch-folder-type-list):
	Move to wl-vars.el.
	(wl-message-buffer-prefetch-p): Changed to enable
	`wl-message-buffer-prefetch-folder-list'.

	* wl-summary.el (wl-summary-target-mark-prefetch): Added argument
	`ignore-cache'.

2001-11-23  Kenichi OKADA  <okada@opaopa.org>

	* wl-draft.el (wl-draft-config-sub-func-alist): Added
	`part-top' and `part-bottom'.
	(wl-draft-config-sub-part-top): New function.
	(wl-draft-config-sub-part-bottom): New function.

2001-11-20  Yoichi NAKAYAMA  <yoichi@eken.phys.nagoya-u.ac.jp>

	* wl-draft.el (wl-draft-reply): Call wl-draft with parent folder.

2001-11-19  Kenichi OKADA  <okada@opaopa.org>

	* wl-folder.el (wl-folder-get-newsgroups): Fix.

2001-11-19  Yoichi NAKAYAMA  <yoichi@eken.phys.nagoya-u.ac.jp>

	* wl-draft.el (wl-draft): Added 14th argument `parent-folder'.

	* wl-summary.el (wl-summary-write): Call wl-draft with 14th argument.
	(wl-summary-write-current-folder): Ditto.

2001-11-19  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-folder.el (wl-folder-get-newsgroups): Use
	`elmo-folder-newsgroups'.

2001-11-18  Kenichi OKADA  <okada@opaopa.org>

	* wl-draft.el (wl-draft-config-sub-header-top): New fucntion.
	(wl-draft-config-sub-func-alist): Added `wl-draft-config-sub-header-top'.
	`wl-draft-config-sub-header-bottom'.

2001-11-14  TAKAHASHI Kaoru  <kaoru@kaisei.org>

	* wl-folder.el (wl-folder-get-newsgroups): Fixed probrem when
	localnews folder.

2001-11-12  Yoichi NAKAYAMA  <yoichi@eken.phys.nagoya-u.ac.jp>

	* wl-summary.el (wl-summary-mode): Undo last change.

	* wl-folder.el (wl-folder-mode): Ditto.

2001-11-09  Yoichi NAKAYAMA  <yoichi@eken.phys.nagoya-u.ac.jp>

	* wl-summary.el (wl-summary-mode): Locally set
	truncate-partial-window-width to nil.
	(for XEmacs)

	* wl-folder.el (wl-folder-mode): Ditto.

2001-11-09  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-util.el (wl-set-string-width) [Emacs]: New implementation.

2001-11-08  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-util.el (wl-biff-check-folder-async-callback): Fixed unread
	number.

	* wl-folder.el (wl-folder-check-one-entity): Use `new' value of diff.

	* wl-util.el (wl-biff-check-folder-async-callback): Ditto.

	* Version number is increased to 2.7.6.

2001-11-05  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-summary.el (wl-summary-insert-summary): Renamed dummy argument.

2001-11-01  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-summary.el (wl-summary-sync-update): Enclose network
	related portion with `unwind-protect'.

2001-10-31  Hiroya Murata  <lapis-lazuli@pop06.odn.ne.jp>

	* wl-fldmgr.el (wl-fldmgr-add): Fixed problem when `name' is list.

2001-10-29  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-message.el (wl-message-add-buttons-to-body): Exchenged 3rd and 4th
	element.
	* wl-vars.el (wl-message-body-button-alist): Ditto.

	* wl-vars.el (wl-message-body-button-alist): Set 4th element as the
	max match length.
	(Pointed out by Akihiro MOTOKI <amotoki@dd.iij4u.or.jp>.)

	* wl-message.el (wl-message-add-buttons-to-body): Use 3rd element value
	for the max match length;
	Use 4th element value for the button string regexp group.

	* wl-acap.el (wl-acap-find-acap-service): If multiple ACAP server
	candidate exists, prompt to select.

2001-10-15  NAKAJIMA Mikio  <minakaji@osaka.email.ne.jp>

	* wl-summary.el (wl-summary-jump-to-msg): Search before
	calibration point by `beginning-of-line'.

2001-10-11  Yoichi NAKAYAMA  <yoichi@eken.phys.nagoya-u.ac.jp>

	* wl-fldmgr.el (wl-fldmgr-make-group): Check folder name only
	for access group.

2001-10-11  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-message.el (wl-message-display-internal): Bind
	`default-mime-charset'.

	* wl-fldmgr.el (wl-fldmgr-make-group): Check folder name error.

	* wl-draft.el (wl-draft-reply): Decode newsgroup field.

	* Version number is increased to 2.7.5.

2001-10-10  Hiroya Murata  <lapis-lazuli@pop06.odn.ne.jp>

	* wl-expire.el (wl-summary-archive): Fixed;
	Use `elmo-folder-name-internal'.

2001-10-08  Hiroya Murata  <lapis-lazuli@pop06.odn.ne.jp>

	* wl-expire.el (wl-expire-refile): Remove ALL and DONE arguments
	from `elmo-folder-move-messages' caller.
	(wl-expire-refile-with-copy-reserve-msg): Ditto.

	* wl-summary.el (wl-summary-exec-subr): Likewise (All other
	related portions are changed).

2001-10-06  Hiroya Murata  <lapis-lazuli@pop06.odn.ne.jp>

	* wl-summary.el (wl-summary-exec-subr): Setup and clear progress
	counter.

2001-10-05  Yoichi NAKAYAMA  <yoichi@eken.phys.nagoya-u.ac.jp>

	* wl-draft.el (wl-draft): Make truncate-partial-width-windows
	buffer local and set it to nil.

	* wl-message.el (wl-message-redisplay): Ditto.

2001-10-03  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-summary.el (wl-summary-mark-as-important): If message is
	already cached, set messag as read, otherwise encache and mark as read.

2001-10-02  Yoichi NAKAYAMA  <yoichi@eken.phys.nagoya-u.ac.jp>

	* wl-summary.el (wl-summary-jump-to-current-message): Don't go to
	point-min.

2001-10-02  Katsumi Yamaoka  <yamaoka@jpl.org>

	* wl-xmas.el (wl-message-define-keymap): Return a keymap.
	* wl-mule.el (wl-message-define-keymap): Fixed parenthesis; return
	a keymap.

2001-10-02  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-e21.el (wl-message-define-keymap): Don't set widget-keymap as
	parent.

	* wl-mule.el (wl-message-define-keymap): Ditto.

	* wl-xmas.el (wl-message-define-keymap): Fixed parenthesis.

	* wl-xmas.el (wl-message-display-internal-hook): Define.
	(wl-xmas-setup-message-toolbar): Define as function.
	(wl-setup-message): Define as alias for wl-xmas-setup-message-toolbar.
	(wl-message-overload-functions): Abolished.
	(wl-message-define-keymap): New function.

	* wl-vars.el (wl-message-display-internal-hook): New variable.
	(wl-message-header-button-alist): New variable (Renamed from
	wl-highlight-message-header-button-alist).
	(wl-message-body-button-alist): Ditto.

	* wl-mule.el (wl-message-define-keymap): New function.
	(wl-message-overload-functions): Abolished.

	* wl-message.el (wl-message-add-buttons-to-body): New function.
	(wl-message-redisplay): Don't call wl-message-overload-functions;
	Call wl-message-add-buttons-to-header and
	wl-message-add-buttons-to-body.
	(wl-message-display-internal): Set keymap argument for
	elmo-mime-display-as-is, elmo-mime-message-display;
	Run wl-message-display-internal-hook.
	(wl-message-refer-article-or-url): Abolished.

	* wl-highlight.el (wl-highlight-headers): Don't call
	wl-highlight-message-add-buttons-to-header.
	(wl-highlight-message-add-buttons-to-header): Abolished.


	* wl-e21.el (wl-message-display-internal-hook): Define.
	(wl-e21-setup-toolbar): Deleted duplicated binding.
	(wl-e21-setup-message-toolbar): Define as function.
	(wl-setup-message): Define as alias for wl-e21-setup-message-toolbar.
	(wl-message-define-keymap): New function.
	(wl-message-overload-functions): Abolished.

2001-10-01  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-draft.el (wl-draft-queue-flush): Call elmo-folder-open-internal
	and elmo-folder-close.

	* wl.el (wl): Call `wl-check-environment' before `wl-plugged-init'.

2001-09-28  TAKAHASHI Kaoru  <kaoru@kaisei.org>

	* wl.el (wl-toggle-plugged): Use `not' instead of `null' for
	boolean value.
	* wl-draft.el (wl-draft-do-fcc): Ditto.

2001-09-26  Kenichi OKADA  <okada@opaopa.org>

	* wl-vars.el (wl-fcc-force-as-read): New variable.
	* wl-draft.el (wl-draft-do-fcc): If `wl-fcc-force-as-read' is non-nil,
	mark copied message as read.

2001-09-26  Kenichi OKADA  <okada@opaopa.org>

	* wl-draft.el (wl-draft-send-mail-with-pop-before-smtp): Fixed.

2001-09-26  TAKAHASHI Kaoru  <kaoru@kaisei.org>

	* wl-summary.el (wl-summary-switch-to-clone-buffer): Use
	`wl-summary-target-above' instead of obsolete variable
	`wl-summary-temp-above'.

	* wl-vars.el (toplevel): Use `elmo-define-obsolete-variable'
	instead of `make-obsolete-variable'.
	* wl-refile.el (toplevel): Ditto.

2001-09-26  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-draft.el (wl-draft-yank-from-mail-reply-buffer): Push mark
	with third argument t.
	(wl-draft): Set first argument for wl-plugged-init as t.

	* wl-vars.el (wl-biff-state-indicator-off): Fixed default value
	definition.

2001-09-26  TAKAHASHI Kaoru  <kaoru@kaisei.org>

	* wl-vars.el: Tabify.
	(wl-biff-notify-hook): Use `ding' instead of `beep'.

	* wl-draft.el (wl-draft-send): Fixed docstring and confirm
	message.

2001-09-26  Yoichi NAKAYAMA  <yoichi@eken.phys.nagoya-u.ac.jp>

	* wl-vars.el (wl-biff-notify-hook): Remove duplicate definition
	and set default to beep.

2001-09-25  Yoichi NAKAYAMA  <yoichi@eken.phys.nagoya-u.ac.jp>

	* wl-vars.el (wl-draft-truncate-lines): New variable.

	* wl-draft.el (wl-draft): Use wl-draft-truncate-lines
	instead of wl-message-truncate-lines for truncate-lines.

2001-09-25  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-message.el (wl-message-display-internal): Call
	`wl-highlight-message' after `elmo-mime-display-as-is'.

	* wl-mime.el (wl-mime-display-text/plain): New function.
	(wl-mime-display-header): Ditto.
	(wl-mime-setup): Register `wl-mime-display-text/plain' as a
	body-presentation-method for text/plain;
	Register `wl-mime-display-header' as a header-presentation-method;
	Don't set up `elmo-message-text-content-inserted-hook' and
	`elmo-message-header-inserted-hook'.

	* wl-message.el (wl-message-buffer-all-header-flag): New buffer local
	variable.
	(wl-message-display-internal): Set `wl-message-buffer-all-header-flag'
	as t if flag is 'all-header;
	Don't bind `elmo-message-ignored-field-list',
	`elmo-message-visible-field-list' and `elmo-message-sorted-field-list'.

2001-09-24  Katsumi Yamaoka  <yamaoka@jpl.org>

	* wl-vars.el: (wl-biff-state-indicator-off): Changed default value
	for xemacs with non-mule environment.

2001-09-23  TAKAHASHI Kaoru  <kaoru@kaisei.org>

	* wl-draft.el (wl-draft-strip-subject-re, wl-draft-kill)
	(wl-draft-send-mail-with-qmail, wl-draft-get-fcc-list)
	(wl-draft-do-fcc, wl-draft-queue-flush): Checkdoc.

2001-09-21  TAKAHASHI Kaoru  <kaoru@kaisei.org>

	* wl-vars.el (wl-interactive-send): Set default value as t.

2001-09-21  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-addrmgr.el (wl-addrmgr-method-list): New variable.
	(wl-addrmgr-method-list): Abolished.
	(wl-addrmgr-change-method): Follow above change.

	* wl-draft.el (wl-draft): Call `wl-plugged-init'.

2001-09-21  Yoichi NAKAYAMA  <yoichi@eken.phys.nagoya-u.ac.jp>

	* wl-vars.el (wl-message-truncate-lines): Change default value
	to default-truncate-lines.

	* wl-draft.el (wl-draft): Set truncate-lines as in wl-message.

2001-09-20  Yoichi NAKAYAMA  <yoichi@eken.phys.nagoya-u.ac.jp>

	* wl-vars.el (wl-message-truncate-lines): New variable.

	* wl-message.el (wl-message-redisplay): Set truncate-lines using
	wl-message-truncate-lines.

2001-09-20  TAKAHASHI Kaoru  <kaoru@kaisei.org>

	* wl-acap.el (wl-acap-init): Remove period from error message.
	(wl-acap-find-acap-service): Remove period from message.

2001-09-20  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl.el (wl-check-environment): Undo last change.

	* wl-vars.el (wl-from): Changed default value.

	* wl-util.el (toplevel): Don't require tm-edit.

	* wl-draft.el (wl-draft): Changed order of `elmo-init' and
	`wl-folder-init';
	Don't set mark on mail body.
	(wl-draft-reedit): Ditto.

	* wl-address.el (wl-address-quote-specials): Define as an alias for
	elmo-address-quote-specials.

2001-09-18  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl.el (wl-check-environment): If `wl-from' is nil, use default value.

	* wl-vars.el (wl-from): Set default value as nil.
	(wl-organization): Set default value as ORGANIZATION environment
	variable.

	* wl-draft.el (wl-smtp-extension-bind): Check value of
	wl-smtp-connection-type.

	* wl-acap.el (wl-acap-init): If ACAP service is not found, cause an
	error.

2001-09-18  TAKAHASHI Kaoru  <kaoru@kaisei.org>

	* Version number is increased to 2.7.4.

	* wl-highlight.el (wl-highlight-headers): Remove BEG and END
	arguments from `wl-highlight-x-face-function' caller.
	Use x-face-1.3.6.12 or later.

2001-09-17  Reuben Thomas <rrt@dcs.gla.ac.uk>

	* wl-addrmgr.el (wl-fldmgr-delete): Fix docstring.

2001-09-17  Yoichi NAKAYAMA <yoichi@eken.phys.nagoya-u.ac.jp>

	* wl-vars.el (wl-summary-width): Fix type to accept nil.
	(wl-fcc): Fix to accept function.
	(Reported by Reuben Thomas <rrt@dcs.gla.ac.uk>).

2001-09-16  TAKAHASHI Kaoru  <kaoru@kaisei.org>

	* wl-acap.el (toplevel): Added `product-provide' declare.
	* wl-addrmgr.el (toplevel): Fixed `product-provide' declare style.

2001-09-14  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl.el (wl): Changed order of calling `elmo-init'
	and `elmo-folder-init'.

2001-09-13  Hiroya Murata  <lapis-lazuli@pop06.odn.ne.jp>

	* wl-mime.el (wl-summary-burst): Extract message when content-type
	of root entity is not only `multipart' but also `message/rfc822'.
	(wl-summary-burst-subr): Ditto.

2001-09-13  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-vars.el (toplevel): Require 'custom.
	(wl-trash-folder): Added to `wl-setting' group.

	* wl-addrmgr.el (wl-addrmgr-goto-top): Fixed problem when no entry
	exists.
	(wl-addrmgr-draw): Insert empty line when no entry exists.

	* wl-mule.el (wl-message-wheel-up): Fixed.
	(wl-message-wheel-down): Ditto.

2001-09-12  Hiroya Murata  <lapis-lazuli@pop06.odn.ne.jp>

	* wl-draft.el (wl-draft-config-exec-sub): Fixed problem when
	config is an anonymous lambda expression.

2001-09-11  Katsumi Yamaoka  <yamaoka@jpl.org>

	* wl-vars.el (wl-biff-state-indicator-on): Use `*iso-2022-jp*'
	when Mule 2 is running.

2001-09-11  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-e21.el (wl-highlight-folder-current-line): Fixed regexp.

2001-09-10  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-draft.el (wl-draft-std11-parse-addresses): Ignore trailing
	spaces (Adviced by NAKAJIMA Mikio <minakaji@osaka.email.ne.jp>).

	* wl-address.el (wl-address-specials-regexp): Eliminated.
	(wl-address-quote-specials): Rewrite.

2001-09-05  Katsumi Yamaoka  <yamaoka@jpl.org>

	* wl-xmas.el (wl-highlight-folder-current-line): Use Perl style
	shy-groups for regexp.

	* wl-e21.el (wl-highlight-folder-current-line): Use Posix style
	character classes and Perl style shy-groups for regexp.
	(wl-highlight-plugged-current-line): Use Posix style character
	classes for regexp.
	(wl-e21-highlight-folder-by-numbers): Ditto.
	(wl-e21-display-image-p): Use `display-images-p' instead of
	`display-graphic-p'.
	(display-images-p): Make an alias to `display-graphic-p' if it is
	not available.  It is for Emacs version prior to 21.0.105.

	* wl-demo.el (wl-demo): Use `display-images-p' instead of
	`display-graphic-p'.
	(wl-demo-image-type-alist): Ditto.
	(display-images-p): Make an alias to `display-graphic-p' if it is
	not available.  It is for Emacs version prior to 21.0.105.

2001-09-04  TAKAHASHI Kaoru  <kaoru@kaisei.org>

	* wl-version.el (wl-generate-user-agent-string-1): Remove tm
	support.
	(wl-generate-user-agent-string): Ditto.

	* wl-version.el (wl-version): Update docsting.
	(wl-version-status): Ditto.

2001-09-03  TAKAHASHI Kaoru  <kaoru@kaisei.org>

	* wl-e21.el (make-mode-line-mouse-map): Import from Emacs
	21.0.105.  For Emacs 21.0.104 or earlier.

2001-09-03  Takuo KITAME <kitame@northeye.org>

	* wl-e21.el (wl-plugged-init-icons): Use
	`make-mode-line-mouse-map' instead of `make-mode-line-mouse2-map'.
	(wl-biff-init-icons): Ditto.

2001-08-31  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-highlight.el (wl-highlight-summary-current-line):
	Fixed highlighting refile/copy destination.

	* wl-acap.el (wl-acap-init): Decode string by wl-acap-coding-system.
	(wl-acap-store): Encode string by wl-acap-coding-system.

2001-08-30  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-acap.el (toplevel): Check and require 'un-define before
	'xemacs-ucs;
	 Added checking for UTF-2000.

2001-08-29  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-acap.el (toplevel): Require 'un-define before 'wl;
	Don't enclose with `eval-and-compile'.

	* wl.el (wl): Call `elmo-init' and `wl-folder-init' unless
	wl-init is non-nil.

	* wl-draft.el (wl-draft): Ditto.

	* wl-folder.el (wl-folder): Don't call `wl-folder-init' here.

	* wl-acap.el (toplevel): Require 'wl.
	(wl-acap-store): Call `elmo-init'.

	* wl.el (wl): Changed position of `wl-check-environment'.
	(toplevel): Added autoload setting for wl-acap.

	* wl-vars.el (wl-setting): New custom group.
	(wl-from): Added wl-setting group.
	(wl-user-mail-address-list): Ditto.
	(wl-organization): Ditto.
	(wl-subscribed-mailing-list): Ditto.
	(wl-envelope-from): Ditto.
	(wl-smtp-posting-user): Ditto.
	(wl-smtp-posting-server): Ditto.
	(wl-smtp-posting-port): Ditto.
	(wl-smtp-authenticate-type): Ditto.
	(wl-pop-before-smtp-user): Ditto.
	(wl-pop-before-smtp-server): Ditto.
	(wl-pop-before-smtp-port): Ditto.
	(wl-pop-before-smtp-authenticate-type): Ditto.
	(wl-nntp-posting-server): Ditto.
	(wl-nntp-posting-user): Ditto.
	(wl-nntp-posting-port): Ditto.
	(wl-fetch-confirm-threshold): Ditto.
	(wl-prefetch-threshold): Ditto.
	(wl-thread-insert-opened): Ditto.
	(wl-ldap-server): Ditto.
	(wl-ldap-port): Ditto.
	(wl-ldap-base): Ditto.
	(wl-ldap-objectclass): Ditto.
	(wl-use-ldap): Ditto.
	(wl-draft-config-alist): Ditto.
	(wl-draft-config-matchone): Ditto.
	(wl-template-alist): Ditto.
	(wl-message-sort-field-list): Ditto.
	(wl-message-ignored-field-list): Ditto.
	(wl-message-visible-field-list): Ditto.
	(wl-interactive-send): Ditto.
	(wl-summary-move-order): Ditto.
	(wl-auto-select-first): Ditto.
	(wl-auto-select-next): Ditto.
	(wl-interactive-save-folders): Ditto.

	* wl-folder.el (wl-folder): Moved position of `wl-folder-init';
	Initialization codes are moved from wl-local-folder-init.
	(wl-local-folder-init): Follow the change above.
	(wl-folder-init): Call `wl-acap-init' when `wl-use-acap' is non-nil.

	* wl-acap.el: New file.

	* Version number is increased to 2.7.3.

2001-08-21  Kenichi OKADA  <okada@opaopa.org>

	* wl-addrmgr.el (wl-addrmgr-apply-exec): Fix for already-list.

2001-08-21  Kenichi OKADA  <okada@opaopa.org>

	* wl-addrmgr.el (wl-addrmgr-draw): Fix for already-list.
	(wl-addrmgr-address-entry-list): Ditto.

2001-08-21  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-e21.el (wl-draft-mode-map): Removed binding for
	`wl-draft-insert-x-face-field'.

	* wl-mule.el (wl-draft-mode-map): Ditto.

	* wl-xmas.el (wl-draft-mode-map): Ditto.

	* wl-vars.el (wl-cs-noconv): Ignore nemacs.
	(wl-cs-autoconv): Ditto.
	(wl-cs-local): Ditto.
	(wl-use-scoring): Ditto.
	(wl-mime-charset): Ditto.
	(wl-folder-check-async): Ditto.

	* wl.el (toplevel): Ignore nemacs and tm.
	(wl-exit): Ditto.

	* wl-summary.el (wl-summary-setup-mouse): Ignore nemacs.
	(wl-summary-mode-map): Added binding for `wl-addrmgr'.
	(wl-summary-edit-addresses-subr): Use wl-address-add-or-change
	instead of wl-address-petname-add-or-change.
	(wl-summary-edit-addresses-subr): Use wl-address-delete
	instead of wl-address-petname-delete.

	* wl-util.el (wl-as-coding-system): Ignore nemacs.

	* wl-mime.el (wl-draft-preview-message): Kill raw preview buffer
	if error occured.

	* wl-message.el (require): Remove tm support.

	* wl-highlight.el (defin-hilit, defun-hilit2): Eliminated.

	* wl-folder.el (wl-folder-setup-mouse): Ignore nemacs.
	(wl-folder-jump-to-current-entity): Ditto.
	(wl-folder-mode-map): Added binding for `wl-addrmgr'.

	* wl-e21.el (wl-draft-key-setup): Replaced binding (C-cC-a)for
	`wl-draft-insert-x-face-field' to `wl-addrmgr'.
	Changed binding for `wl-draft-insert-x-face-field' to C-cC-x.

	* wl-mule.el (wl-draft-key-setup): Ditto.

	* wl-xmas.el (wl-draft-key-setup): Ditto.

	* wl-draft.el (toplevel): Added autoload setting for wl-addrmgr.
	(wl-draft-std11-parse-addresses): New function.
	(wl-draft-parse-mailbox-list): Use it.
	(wl-draft): Ignore nemacs.
	(wl-draft-reedit): Ditto.

	* wl-addrmgr.el: New file.
	(Original is wl-rcpt.el written by
	"Kitamoto Tsuyoshi <tsuyoshi.kitamoto@city.sapporo.jp>".
	Thanks Kitamoto-san.)

	* wl-address.el (wl-address-make-address-list): Modified parsing
	process.
	(wl-address-delete): Renamed from `wl-address-petname-delete';
	Modify wl-address-list too.
	(wl-address-add-or-change): Renamed from
	`wl-address-petname-add-or-change'; Rewote for wl-addrmgr.

2001-08-15  YAMASHITA Junji <ysjj@unixuser.org>

	* wl-highlight.el (wl-highlight-summary-current-line):
	  Work with transient-mark-mode

2001-08-15  Yuuichi Teranishi  <teranisi@gohome.org>

	* Version number is increased to 2.7.2.

	* wl.el (wl-plugged-dop-queue-info): Use elmo-dop-queue-method-name
	instead of elmo-dop-queue-method.

2001-08-06  SAITO Atsunori <sai@yedo.com>

	* wl-vars.el (wl-ldap-objectclass): New user option.

	* wl-address.el (wl-ldap-make-filter): Use it.

2001-08-03  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-fldmgr.el (wl-fldmgr-rename): Fixed second argument.

2001-08-02  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-folder.el (wl-folder): redisplay after folder insertion.

	* wl-demo.el (wl-demo): Don't delete toolbar on emacs-21.

	* wl-summary.el (wl-summary-sync-update):
	Change status mark only when new-msgdb exists.
	(Advised by Akihiro MOTOKI <mokkun@iname.com>.)

2001-07-23  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-summary.el (wl-summary-open-folder): New function.
	(wl-summary-goto-folder-subr): Use it.
	(wl-summary-mark-as-important): Fix;
	Encache only when no cache exists.

2001-07-17  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-draft.el (wl-draft-yank-from-mail-reply-buffer):
	Use with-current-buffer.

2001-07-14  Hiroya Murata  <lapis-lazuli@pop06.odn.ne.jp>

	* wl-score.el (wl-score-insert-help): Check `wl-message-buffer'
	before call `get-buffer'. Fixed parenthesis.
	(wl-score-get-header-entry): Clear message and help window when
	keyboard quit.
	(wl-score-edit-insert-header): Ditto.

2001-07-14  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-draft.el (wl-message-mail-p): Test resent-to: field.
	(Fix by Peter M~ller Neergaard <turtle@bu.edu>)
	(wl-default-draft-cite): Fix.

	* wl-score.el (wl-score-insert-help): Fixed parenthesis.
	(Pointed out by ABE Yasushi <yasushi@stbbs.net>)

2001-07-12  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-message.el (wl-message-prev-page): Do same bahavior
	as summary when it is called in the message buffer.
	(wl-message-next-page): Ditto.

2001-07-09  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-summary.el (wl-summary-forward): Use cache if it is not
	section cache.

2001-07-05  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-vars.el: Changed file coding system to ISO-2022-JP.
	Removed redundant require of elmo-vars.
	(wl-biff-state-indicator-on): Changed default value for
	xemacs with non-mule environment.

	* wl-summary.el (wl-summary-exec-subr): Fixed problem when
	wl-message-buffer is nil;
	Hide progress bar after moving messages.

2001-07-04  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-summary.el (wl-summary-exec-subr): Delete message buffer only when
	message at cursor point is deleted.

2001-07-02  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-vars.el: Changed file coding system to euc-japan.
	Added -*-coding:-*- magic to the first line.

	* wl-summary.el (wl-summary-search-by-subject): Fixed bug;
	Search parent from the first message.

	* Version number is increased to 2.7.1.

2001-06-28  OHASHI Akira  <bg66@koka-in.org>

	* wl-vars.el: Fix file coding system to ISO-2022-JP.

2001-06-27  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-summary.el (wl-summary-exec-subr): Hide message buffer after
	refile/delete execution.

	* wl-vars.el (wl-summary-fix-timezone): Changed default value to nil;
	Fixed docstring.

2001-06-26  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-summary.el (wl-summary-sync-update): If sync-result is non-nil,
	do update process;
	Don't update marks when update process is interrupted.

2001-06-25  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-summary.el (wl-summary-reply): Fixed problem when
	wl-draft-use-frame is non-nil.
	(wl-summary-forward): Ditto.

	* wl-folder.el (wl-folder-sync-entity): Bind wl-summary-use-frame
	as nil.
	(wl-folder-mark-as-read-all-entity): Ditto.
	(wl-folder-prefetch-entity): Ditto.

	* wl.el (wl): Check environment before wl-init.

	* wl-summary.el (wl-summary-collect-unread): Eliminated.
	(wl-summary-mark-as-read-all): Use elmo-folder-list-unreads
	instead of wl-summary-collect-unread.
	(wl-summary-reply): Split message window.

2001-06-21  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-vars.el (wl): Set custom-manual link as "wl-ja"
	only if current language environment is japanese,

	* wl-folder.el (wl-folder-jump-to-current-entity): Call
	wl-folder-select-buffer when wl-summary-use-frame is non-nil.
	(wl-folder-goto-folder-subr): Ditto.

	* wl-draft.el (wl-draft-dispatch-message): Call
	`elmo-file-cache-get-path'.

2001-06-20  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-summary.el (wl-summary-cursor-move): If return value of
	wl-summary-next-message is not number, don't jump.

2001-06-19  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-summary.el (wl-summary-buffer-next-message-function): New
	variable.
	(wl-summary-next-message): Call wl-summary-buffer-next-message-function
	if it is bound.

	* wl-e21.el (wl-plugged-set-folder-icon): Don't propertize image
	string.

	* wl.el (wl-plugged-dop-queue-info): Fix to check stream-type.
	(wl-plugged-drawing): Ditto.

2001-06-18  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-util.el (wl-biff-check-folder): Use own buffer for pop3 biff
	process.
	(wl-biff-check-folder-async): Enclose wl-biff-check-folder
	with unwind-protect.

	* wl.el (wl-init): Require mime-setup.
	(wl-check-environment): Don't require mime-setup.

	* wl-util.el (wl-biff-check-folder): Use elmo-folder-type-internal
	instead of elmo-folder-type.

	* wl-message.el (wl-message-buffer-prefetch-debug): Set default
	value as nil.

2001-06-15  Yuuichi Teranishi  <teranisi@gohome.org>

	* Version number is increased to 2.7.0.

	* wl-version.el (wl-version): Changed codename.

	* wl-summary.el (wl-summary-delete-cache): Fixed.

	* wl-folder.el (wl-folder-guess-mailing-list-by-folder-name):
	Workaround for net folders.
	(According to the patch from ABE Yasushi <yasushi@stbbs.net>)

	* wl-vars.el (wl-folder-process-duplicates-alist): Changed default
	value to nil (According to the patch from
	Yoichi NAKAYAMA <yoichi@eken.phys.nagoya-u.ac.jp>).

	* wl-util.el (wl-biff-check-folder): Call elmo-folder-check instead
	of elmo-folder-close.

2001-06-06  Peter M~ller Neergaard <turtle@bu.edu>

	* wl-summary.el (wl-summary-resend-bounced-mail): Modified regexp
	for postfix.

2001-06-13  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-summary.el (wl-summary-resend-message): Fixed.

	* wl-draft.el (wl-draft-edit-string): Fetch From: field value and
	Call wl-draft with `from' argument if its address is included in
	`wl-user-mail-address-list'.
	(wl-draft): Added `from' argument.

	* wl.el (wl-exit): Delete current frame if wl-folder-use-frame is
	non-nil.
	(wl): Don't show demo if wl-demo is nil.

	* wl-summary.el (wl-summary-exit): Renamed wl-folder-use-frame to
	wl-summary-use-frame.

	* wl-vars.el (wl-summary-use-frame): New user option.
	(wl-folder-use-frame): Changed docstring.

	* wl-folder.el (wl-folder): Make new frame if wl-folder-use-frame is
	non-nil.
	(wl-folder-select-buffer): Renamed wl-folder-use-frame to
	wl-summary-use-frame.

	* wl-vars.el (wl-folder-use-frame): New user option.

	* wl-summary.el (wl-summary-exit): Back to folder frame if
	wl-folder-use-frame is non-nil.
	(wl-summary-redisplay-internal): Ignore cache if current folder
	is draft folder,
	(wl-summary-redisplay-no-mime): Ditto.
	(wl-summary-redisplay-all-header): Ditto.

	* wl-folder.el (wl-folder-select-buffer): Switch to other frame
	if wl-folder-use-frame is non-nil.

2001-06-06  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-summary.el (wl-summary-sync-update): Bind
	elmo-folder-update-threshold.
	(wl-summary-mark-as-important): Enclosed server mark processing
	with `save-match-data'.

	* wl-mime.el (wl-mime-setup): Set mime-setup-signature-key-alist
	only when it is already defined.

2001-05-24  Masahiro MURATA  <muse@ba2.so-net.ne.jp>

	* wl-expire.el (wl-expire-archive-get-folder): Fixed problem that
	name of folder exclude localdir is wrong.
	* wl-folder.el (wl-folder-sync-entity):
	Set `wl-summary-always-sticky-folder-list' as nil.
	(wl-folder-mark-as-read-all-entity): Ditto.
	(wl-folder-prefetch-entity): Ditto.

2001-05-23  Kenichi OKADA  <okada@opaopa.org>

	* wl-draft.el (wl-draft): use `wl-summary-write-current-folder'
	instead of `wl-summary-write-current-newsgroup'.

2001-05-19  Masahiro MURATA  <muse@ba2.so-net.ne.jp>

	* wl-summary.el (wl-summary-auto-select-msg-p): New function.
	(wl-summary-goto-folder-subr): If `wl-auto-select-first' is
	non-nil and selected message is important, do not display.

2001-05-16  Kenichi OKADA  <okada@opaopa.org>

	* wl.el (wl): Omit `wl-check-environment' if wl-init is nil.

2001-05-10  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl.el (wl-plugged-dop-queue-info): Fixed for new queue structure.

	* wl-summary.el (wl-summary-mark-as-important): Set message number
	using wl-summary-message-number.

2001-05-10  Hiroya Murata  <lapis-lazuli@pop06.odn.ne.jp>

	* wl-summary.el (wl-summary-exec-subr): Fixed problem when
	destination folder is 'null.

2001-05-09  Kenichi OKADA  <okada@opaopa.org>

	* wl-folder.el (wl-folder-guess-mailing-list-by-refile-rule-subr):
	New function.
	(wl-folder-guess-mailing-list-by-folder-name-subr): New function.
	(wl-folder-guess-mailing-list-by-refile-rule): Fix for multi folder.
	(wl-folder-guess-mailing-list-by-folder-name): Ditto.

2001-05-08  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-mime.el (wl-mime-setup): Added setting for
	`mime-setup-signature-key-alist' to avoid overriding key bind for
	`wl-draft-send'.

	* wl-e21.el (wl-draft-overload-functions): Don't override key binding
	for `wl-draft-send'.
	* wl-mule.el (wl-draft-overload-functions): Ditto.
	* wl-xmas.el (wl-draft-overload-functions): Ditto.
	* wl-draft.el (wl-draft-send): Ditto.

	* wl-message.el (wl-message-display-internal):
	Fixed typo (elmo-fetch-threshold->elmo-message-fetch-threshold).
	(Patch is provided by <kita@coe.nttdata.co.jp>).

2001-05-09  Kenichi OKADA  <okada@opaopa.org>

	* wl-folder.el (wl-folder-guess-mailing-list-by-refile-rule): Fix.

2001-05-08  Kenichi OKADA  <okada@opaopa.org>

	* wl.el (wl): Fix for wl-demo.

2001-05-08  Kenichi OKADA  <okada@opaopa.org>

	* wl-summary.el (wl-summary-supersedes-message): Use 'message-buf'

2001-05-08  Kenichi OKADA  <okada@opaopa.org>

	* wl-folder.el (wl-folder-prefetch-entity): Use
	`wl-folder-get-elmo-folder'.
	(wl-folder-count-incorporates): Do not use
	`wl-folder-get-elmo-folder'.

2001-05-08  Kenichi OKADA  <okada@opaopa.org>

	* wl-xmas.el (wl-plugged-set-folder-icon): Use `elmo-folder-type'
	instead of `elmo-folder-get-type'.

2001-05-01  TAKAHASHI Kaoru  <kaoru@kaisei.org>

	* wl-summary.el (wl-summary-write-current-folder): Set cursor
	position on Subject: field.
	(Advised by Mito <mit@nines.nec.co.jp>)

2001-04-27  Hiroya Murata  <lapis-lazuli@pop06.odn.ne.jp>

	* wl-folder.el (wl-folder-prefetch-entity): Use
	`wl-folder-get-elmo-folder'.

2001-04-26  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-vars.el (wl-folder-process-duplicates-alist): New user option.

	* wl-summary.el (wl-summary-buffer-set-folder): Set up
	`process-duplicates' slot.

	* wl-highlight.el (wl-highlight-message): Don't highlight as signature
	if detection failed.

2001-04-25  TAKAHASHI Kaoru  <kaoru@kaisei.org>

	* wl-version.el (wl-version-status): Set to "alpha".

2001-04-23  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-summary.el (wl-summary-set-message-buffer-or-redisplay):
	Check wl-message-buffer lives before set-buffer.

2001-04-22  Masahiro MURATA  <muse@ba2.so-net.ne.jp>

	* wl-expire.el (wl-summary-expire): Fixed problem that do not expire
	called in folder mode.
	* wl-var.el (wl-summary-exit-pre-hook): New variable.
	* wl-summary.el (wl-summary-exit-pre-hook): Run
	`wl-summary-exit-pre-hook' before exit summary mode.

2001-04-22  TAKAHASHI Kaoru  <kaoru@kaisei.org>

	* wl-version.el (wl-version-status): New variable.
	(wl-version-status-alist): Removed.
	(wl-version-status): Rule included.

2001-04-19  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-vars.el (wl-folder-mime-charset-alist): Setup default value for
	@sponichi.

	* wl-draft.el (wl-draft-insert-current-message): Fixed problem
	when `mail-reply-buffer' is buffer-local variable.
	(Reported by <kita@coe.nttdata.co.jp>).

2001-04-17  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-vars.el (toplevel): Require 'elmo-util.

2001-04-16  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-summary.el (wl-summary-message-regexp): Fixed number regexp.
	(All other related portions are changed)

	* wl.el (wl-plugged-change): Use '<' instead of '<='.

	* wl-folder.el (wl-folder-check-one-entity): Fixed last change again.

2001-04-14  Hiroya Murata  <lapis-lazuli@pop06.odn.ne.jp>

	* wl-folder.el (wl-folder-check-one-entity): Fixed last change.

2001-04-13  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-summary.el (wl-summary-target-mark-reply-with-citation): Fixed.
	Delete other windows to avoid an error.
	Use `point-marker' instead of `point' to remember the start point
	of body.

	* wl.el (wl-plugged-toggle-all): Fixed argument for `elmo-set-plugged'.

	* wl-folder.el (wl-folder-check-one-entity): Adjust unread message
	number not to exceed all message number.

2001-04-12  Yoichi NAKAYAMA  <yoichi@eken.phys.nagoya-u.ac.jp>

	* wl-e21.el (wl-biff-init-icons): Don't use `call-interactively' to
	call the command `wl-biff-check-folders' in `mode-line-mouse2-map'.

2001-04-09  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-summary.el (wl-summary-sync-force-update): Added argument
	no-check.
	(wl-summary-sync-update): Ditto.
	(wl-summary-goto-folder-subr): Call wl-summary-sync-force-update
	with `no-check'.

	* wl-message.el (wl-message-buffer-prefetch-timer): New variable.
	(wl-message-buffer-prefetch-next): Don't run timer if timer is
	already running.

2001-04-07  Masahiro MURATA  <muse@ba2.so-net.ne.jp>

	* wl-expire.el (wl-expire-archive-get-folder): Added argument
	`dst-folder-arg'.
	(wl-expire-archive-number1): Diito.
	(wl-expire-archive-number2): Diito.
	(wl-expire-archive-Date): Diito.
	(wl-archive-number1): Diito.
	(wl-archive-number2): Diito.
	(wl-archive-date): Diito.
	(wl-archive-folder-p): New function.
	(wl-summary-expire): Support of expand folder name at
	wl-expire-alist.
	* wl-util.el (wl-expand-newtext): Renamed from
	`wl-refile-expand-newtext'.

2001-04-05  Hiroya Murata  <lapis-lazuli@pop06.odn.ne.jp>

	* wl-summary.el (wl-summary-prefetch-msg): Fiexd. Call
	`elmo-msgdb-overview-get-entity' with `msgdb' instead of
	`(elmo-msgdb-get-overview msgdb)'.
	(wl-summary-prefetch): Bind match data before call
	`wl-summay-prefetch-msg'.
	(wl-summary-goto-folder-subr): Call `wl-summary-toggle-disp-msg' with
	'off if `wl-summary-buffer-disp-msg' is non-nil.
	Fixed problem that couldn't show only one new or unread message when
	enter folder.
	(wl-summary-reply): Don't call `split-window-vertically' and other
	window.

2001-04-03  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-expire.el (wl-expire-refile): Fixed.

2001-04-02  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-vars.el (wl-biff-unnotify-hook): New variable.

	* wl-util.el (wl-biff-notify): Run `wl-biff-unnotify-hook' when
	biff notification is removed.

	* wl.el (wl): Changed position of `elmo-init'.

	* wl-draft.el (wl-default-draft-cite): Use date field
	on the citation buffer.

	* wl-vars.el (wl-shimbun-folder-icon): New variable.

	* wl-xmas.el (wl-folder-internal-icon-list): Added
	`wl-folder-shimbun-image'.

	* wl-e21.el (wl-folder-internal-icon-list): Added
	`wl-folder-shimbun-image'.

2001-03-31  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl.el (wl-init): Eliminated argument.
	(wl): Rewrite.

	* wl-summary.el (wl-summary-prefetch-msg): Use `elmo-message-encache'.
	(wl-summary-sync-update): Use Use `elmo-folder-msgdb'
	instead of `elmo-folder-msgdb-internal'.
	(wl-summary-sync-update): Ditto.
	(wl-summary-flush-pending-append-operations): Eliminated.
	(wl-summary-delete-all-msgs): Set msgdb instead of folder.
	(wl-summary-goto-folder-subr): Set load-msgdb argument of
	`elmo-folder-open'.

	* wl-mime.el (wl-summary-burst): Fixed.

	* wl-folder.el (wl-folder-info-save): Check data type.

	* wl-expire.el (wl-expire-delete): Set msgdb instead of folder.
	(wl-expire-refile-with-copy-reserve-msg): Use `elmo-folder-msgdb'
	instead of `elmo-folder-msgdb-internal'.
	(wl-expire-hide): Ditto.


	* wl-draft.el (wl-draft): Removed argument for `wl-init'.

2001-03-20  TAKAHASHI Kaoru  <kaoru@kaisei.org>

	* wl-folder.el (wl-folder-write-current-folder): Support petname.

2001-03-11  Kenichi OKADA  <okada@opaopa.org>

	* wl-draft.el (wl-draft-do-fcc): Fix for `wl-draft-use-cache'

2001-03-11  TAKAHASHI Kaoru  <kaoru@kaisei.org>

	* wl-folder.el (wl-folder-guess-mailing-list-by-folder-name):
	Fixed `match-beginning' argument mismatch.

2001-03-05  Katsumi Yamaoka    <yamaoka@jpl.org>

	* wl-demo.el (wl-demo): Reset `tab-width' and `tab-stop-list' to
	the default value.

2001-03-01  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-folder.el (wl-make-plugged-alist): Use `wl-nntp-posting-port'
	instead of `elmo-nntp-default-port'.

	* wl-vars.el: Fixed some doc strings.

2001-02-28  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-summary.el (wl-summary-prefetch-msg): Use
	`elmo-msgdb-overview-get-entity' instead of `assoc'.

	* wl-vars.el: Define *-func as obsolete variable using
	`elmo-define-obsolete-variable'.

	* wl-message.el (wl-message-buffer-prefetch-threshold): Eliminated.
	(wl-message-buffer-prefetch): Use `elmo-message-fetch-threshold'
	instead of `wl-message-buffer-prefetch-threshold'.

	* wl-summary.el (wl-summary-buffer-message-redisplay-func): Removed.

	* wl-vars.el (wl-cache-prefetch-get-next-func): Ditto.

	* wl-draft.el (wl-caesar-region-func): Ditto.

	* wl-summary.el (wl-summary-exec-subr): Fixed `copy';
	Keep unread status in elmo-folder-move-messages.
	(wl-summary-sync-update): Set `wl-summary-buffer-msgdb'.

2001-02-27  TAKAHASHI Kaoru  <kaoru@kaisei.org>

	* wl-summary.el (wl-summary-buffer-exit-function): Renamed from
	`wl-summary-buffer-exit-func'
	(wl-summary-buffer-message-redisplay-function): Renamed from
	`wl-summary-buffer-message-redisplay-func'
	(wl-summary-buffer-next-folder-function): Renamed from
	`wl-summary-buffer-next-folder-func'.
	(wl-summary-buffer-prev-folder-function): Renamed from
	`wl-summary-buffer-prev-folder-func'.
	(wl-summary-get-petname-function): Renamed from
	`wl-summary-get-petname-func'.

	* wl-score.el (wl-score-edit-exit-function): Renamed from
	`wl-score-edit-exit-func'.

	* wl-message.el (wl-message-buffer-prefetch-get-next-function):
	Renamed from `wl-message-buffer-prefetch-get-next-function'.

	* wl-util.el (wl-load-profile-function): Renamed from
	`wl-load-profile-func'.

	* wl-folder.el (wl-folder-completion-function): Renamed from
	`wl-folder-completion-func'.
	(wl-folder-init-function): Renamed from `wl-folder-init-func'.

	* wl-vars.el (wl-expire-archive-get-folder-function): Renamed from
	`wl-expire-archive-get-folder-func'.
	(wl-draft-send-function): Renamed from `wl-draft-send-func'.
	(wl-draft-send-mail-function): Renamed from
	`wl-draft-send-mail-func'.
	(wl-draft-send-news-function): Renamed from
	`wl-draft-send-news-func'.
	(wl-fldmgr-sort-function): Renamed from `wl-fldmgr-sort-func'.
	(wl-generate-mailer-string-function): Renamed from
	`wl-generate-mailer-string-func'.
	(wl-highlight-signature-search-function): Renamed from
	`wl-highlight-signature-search-func'.
	(wl-highlight-x-face-function): Renamed from
	`wl-highlight-x-face-func'
	(wl-print-buffer-function): Renamed from `wl-print-buffer-func'.
	(wl-ps-print-buffer-function): Renamed from
	`wl-ps-print-buffer-func'
	(wl-summary-from-function): Renamed from `wl-summary-from-func'.
	(wl-summary-subject-function): Renamed from `wl-summary-subject-func'.
	(wl-summary-subject-filter-function): Renamed from
	`wl-summary-subject-filter-func'.

	* wl-draft.el (wl-draft-queue-flush-send-function): Renamed from
	`wl-draft-queue-flush-send-func'
	(wl-draft-cite-function): Renamed from
	`wl-draft-cite-func'

	* wl-address.el (wl-address-init-function): Renamed from
	`wl-address-init-func'.

2001-02-27  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-draft.el (wl-draft-queue-flush): Don't call
	`elmo-dop-unlock-message'.
	* wl-draft.el (wl-draft-queue-append): Don't call
	`elmo-dop-lock-message'.

	* wl-summary.el (wl-summary-buffer-msgdb): Revival (for compatibility).
	(wl-summary-buffer-folder-name): Ditto.
	(wl-summary-message-regexp): Added '-' (all other related portions
	are changed).
	(wl-summary-goto-folder-subr): Set wl-summary-buffer-msgdb and
	wl-summary-buffer-folder-name.

2001-02-26  "A. SAGATA" <sagata@nttvdt.hil.ntt.co.jp>

	* wl-folder.el (wl-folder-check-one-entity): Fixed problem that
	the number of mails in the folder buffer is not updated by wl-biff.

2000-02-26  Kenichi OKADA  <okada@opaopa.org>

	* wl-summary.el (wl-summary-default-subject-filter): Fix for `Re>'.
	* wl-vars.el (wl-summary-search-parent-by-subject-regexp): Ditto.

2001-03-01  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-summary.el (wl-summary-next-message):
	Return next message number when wl-summary-move-order is nil.

2001-02-28  Akihiro MOTOKI <mokkun@iname.com>

	* wl-summary.el (wl-summary-move-spec-plugged-alist): Renamed from
	`wl-summary-move-spec-alist'.
	(wl-summary-move-spec-unplugged-alist): New variable
	(Move spec for unplugged status).
	(wl-summary-next-message): Use `wl-summary-move-spec-plugged-alist'
	if plugged, `wl-summary-move-spec-unplugged-alist' is unplugged.

2001-03-01  OKAZAKI Tetsurou  <okazaki@be.to>

	* wl-e21.el (wl-draft-overload-menubar): "FCC" -> "Fcc".
	* wl-mule.el (wl-draft-overload-menubar): Ditto.

2001-02-28  OKAZAKI Tetsurou  <okazaki@be.to>

	* wl-mime.el (wl-draft-preview-message): Use `function' instead of
	simple quotation to quote the anonymous function.
	* tm-wl.el (wl-draft-preview-message): Ditto.

2001-02-25  OKAZAKI Tetsurou  <okazaki@be.to>

	* wl-highlight.el (wl-highlight-summary-displaying): Optimize;
	Eliminate redundant `save-excursion'.
	(wl-highlight-summary-current-line): Ditto.

	* wl-highlight.el (wl-highlight-summary-current-line): Avoid
	accessing match data when `looking-at' failed.

	* wl-draft.el (wl-draft-delete): Use `match-string' instead of
	`elmo-match-string' where users don't care about the speed.
	(wl-draft-save): Ditto.

2001-02-24  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-util.el (wl-regexp-opt): New function.

	* wl-summary.el (wl-summary-delete-messages-on-buffer): Delete
	number from `wl-summary-buffer-number-list'.
	(wl-summary-goto-folder-subr): Load msgdb before resuming summary view;
	Call `wl-summary-rescan' if `wl-summary-cache-use' is nil.
	(wl-summary-move-spec-alist): Changed default setting.

2001-02-23  Yoichi NAKAYAMA  <yoichi@eken.phys.nagoya-u.ac.jp>

	* wl-vars.el (wl-biff-notify-hook): New hook.
	* wl-util.el (wl-biff-notify): Run `wl-biff-notify-hook' at
	the arrival of new mail.
	(Based on the patch from Hironori Fukuchi <nory@valis.co.jp>
	and advice by Yuuichi Teranishi  <teranisi@gohome.org>)

2001-02-23  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-summary.el (wl-summary-default-get-next-msg): Fix (num => msg).

2001-02-22  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-summary.el (wl-summary-default-get-next-msg): Fix.

	* Version number is increased to 2.5.8.

	* wl-thread.el (toplevel): require 'cl.
	(wl-thread-resume-entity): Call wl-thread-make-number-list.
	(wl-thread-make-number-list): New function.
	(wl-thread-entity-make-number-list-from-children): Ditto.
	(wl-thread-entity-insert-as-top): Update wl-summary-buffer-number-list.
	(wl-thread-entity-insert-as-children): Likewise.
	(wl-thread-delete-message): Likewise.
	(wl-meaning-of-mark): Eliminated.
	(wl-thread-next-failure-mark-p): Ditto.
	(wl-thread-entity-get-mark): Ditto.
	(wl-thread-meaning-alist-get-result): Ditto.
	(wl-thread-entity-check-prev-mark): Ditto.
	(wl-thread-entity-check-next-mark): Ditto.
	(wl-thread-entity-check-prev-mark-from-older-brother): Ditto.
	(wl-thread-entity-get-prev-marked-entity): Ditto.
	(wl-thread-get-prev-unread): Ditto.
	(wl-thread-jump-to-prev-unread): Ditto.
	(wl-thread-get-next-unread): Ditto.
	(wl-thread-jump-to-next-unread): Ditto.
	(wl-thread-entity-check-next-mark-from-younger-brother): Ditto.
	(wl-thread-entity-get-next-marked-entity): Ditto.

	* wl-summary.el (wl-summary-buffer-number-list):
	New bufer-local variable.
	(wl-summary-switch-to-clone-buffer): Clone
	`wl-summary-buffer-number-list'.
	(wl-summary-goto-folder-subr): Use `wl-summary-next-message'.
	(wl-summary-cursor-move-regex): Eliminated.
	(wl-summary-cursor-up): Rewrite.
	(wl-summary-cursor-down): Ditto.
	(wl-summary-mode-spec-alist): New variable.
	(wl-summary-next-message): New inline function.
	(wl-summary-cursor-move): New function.
	(wl-summary-default-get-next-msg): Rewrite.
	(wl-summary-sync-all-init): Setup `wl-summary-number-list'.
	(wl-summary-rescan): Ditto.
	(wl-summary-sync-all-init): Ditto.
	(wl-summary-goto-folder-subr): Call `wl-summary-make-number-list' if
	summary is not thread view.
	(wl-summary-sync-update): Ditto.
	(wl-summary-rescan): Ditto.
	(wl-summary-make-number-list): New function.

	* wl-draft.el: "FCC" -> "Fcc".

2001-02-21  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-highlight.el (wl-highlight-summary-window):
	Call `set-buffer-modified-p'.

	* wl.el (wl-init): Don't call `elmo-crosspost-message-alist-load'.
	(wl): Call `elmo-init' and fix.

	* wl-draft.el, wl-folder.el, wl-summary.el, wl-util.el:
	Use new variables.

	* wl-folder.el (wl-folder): Call `sit-for' before `wl-folder-init'.

2001-02-20  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-vars.el (wl-biff-notify-hook): Set default value as '(beep).

2001-02-20  Katsumi Yamaoka    <yamaoka@jpl.org>

	* wl-demo.el (wl-demo-image-type-alist): Use ' instead of `.

2001-02-20  Katsumi Yamaoka    <yamaoka@jpl.org>

	* wl-e21.el (wl-e21-setup-draft-toolbar): Don't refer to
	`wl-use-toolbar' nor `display-graphic-p'.
	(wl-e21-setup-message-toolbar): Ditto.
	(wl-e21-setup-summary-toolbar): Ditto.
	(wl-e21-setup-folder-toolbar): Ditto.

	(wl-biff-init-icons): Rewrite using `wl-e21-display-image-p'.
	(wl-plugged-init-icons): Ditto.

	(wl-folder-init-icons): Use `wl-e21-display-image-p' instead of
	`display-graphic-p'.
	(wl-plugged-set-folder-icon): Ditto.
	(wl-highlight-plugged-current-line): Ditto.
	(wl-highlight-folder-current-line): Ditto.
	(wl-e21-highlight-folder-group-line): Ditto.
	(wl-e21-setup-toolbar): Ditto.
	(wl-e21-display-image-p): New macro.

	* wl-demo.el (wl-demo): Simplified.
	(wl-demo-image-type-alist): Use `image-type-available-p' for
	checking whether the image type `xbm' is available.

2000-02-20  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-summary.el (wl-summary-sync): Rename 'all-shown' to `all-visible'.
	(wl-summary-input-range): Ditto.

2001-02-20  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-summary.el (wl-summary-edit-addresses): Use
	`wl-summary-get-original-buffer'
	(wl-summary-mark-as-unread): Don't call `wl-summary-set-crosspost'.
	(wl-summary-jump-to-msg-by-message-id-via-nntp):
	Use `elmo-nntp-parse-newsgroup' instead of `wl-parse-newsgroups'.
	(wl-summary-get-newsgroups): Eliminated.
	(wl-summary-set-crosspost): Ditto.
	(wl-summary-is-crosspost-folder): Ditto.
	(wl-crosspost-alist-load): Ditto.
	(wl-crosspost-alist-save): Ditto.

	* wl-folder.el (wl-folder-create-newsgroups-hashtb): Call
	`elmo-setup-subscribed-newsgroups' instead of
	`elmo-nntp-make-groups-hashtb'.
	(wl-folder-suspend): Call `elmo-crosspost-message-alist-save'
	instead of `wl-crosspost-alist-save'.

	* wl-mime.el (wl-summary-burst): Use `elmo-folder-writable-p' instead
	of `elmo-folder-message-appendable-p'.
	(wl-mime-header-presentation-method): Eliminated.

	* wl-message.el (wl-message-prev-page): Don't pass -1 to `recenter'.
	(Error occurs in emacs21).

	* wl-draft.el (wl-draft-queue-flush): Fix (fetch message to
	the current buffer).

	* wl.el (wl-save-status): Call `elmo-crosspost-message-alist-save'
	instead of `wl-crosspost-alist-save'.
	(wl-init): `elmo-crosspost-message-alist-load'
	instead of `wl-crosspost-alist-load'

	* wl-util.el (wl-parse): Eliminated (Renamed to `elmo-parse').
	(wl-parse-newsgroups): Likewise.
	(wl-biff-notify): Run `wl-biff-notify-hook'.

2001-02-21  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-vars.el (wl-summary-lazy-highlight): New variable.

	* wl-summary.el (wl-summary-mode): Set up window-scroll-functions
	when `wl-summary-lazy-highlight' is non-nil.
	(wl-summary-goto-folder-subr): Highlight only when
	`wl-summary-lazy-highlight' is non-nil.

	* wl-highlight.el (wl-highlight-summary): Fixed docstring;
	Don't display progress and highlight temp-mark when
	`wl-summary-lazy-highlight' is non-nil.
	(wl-highlight-summary-window): New function.
	(Based on the patch from Akihiro MOTOKI <mokkun@iname.com>)

2000-02-20  Kenichi OKADA  <okada@opaopa.org>

	* wl-summary.el (wl-summary-sync): Change `all-visible'
	from `all-shown'
	(wl-summary-input-range): Ditto.

2001-02-20  Katsumi Yamaoka    <yamaoka@jpl.org>

	* wl-e21.el (wl-highlight-folder-current-line): Call
	`wl-folder-init-icons' when folder icons have not been initialized.

	* wl-vars.el (wl-demo-display-logo): Add `bitmap' to the selection.

	* wl-demo.el: Work also with BITMAP-MULE under Emacs 21.
	(wl-demo-image-type-alist): New macro.

2001-02-19  Katsumi Yamaoka    <yamaoka@jpl.org>

	* wl-e21.el (wl-biff-init-icons): Don't generate icons if the
	display does not support graphics.
	(wl-plugged-init-icons): Ditto.
	(wl-folder-init-icons): Ditto.

	* wl-demo.el (wl-demo): Chech closely whether the display
	supports graphics.

2001-02-09  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-summary.el (wl-summary-get-original-buffer): New function.
	(wl-summary-set-crosspost): Use it.
	(wl-summary-target-mark-uudecode): Ditto.
	(wl-summary-reedit): Ditto.
	(wl-summary-resend-bounced-mail): Ditto.
	(wl-summary-update-crosspost): Eliminated (It may be incorporated
	into `elmo-folder-append-msgdb' method of elmo-nntp-folder class).

	* wl-message.el (wl-message-buffer-display): Added argumnet `unread'.
	(wl-message-display-internal): Ditto.

2001-02-07  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-draft.el (wl-draft-parse-msg-id-list-string): Fix.

2001-02-06  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-summary.el (wl-summary-save-view): Renamed from
	`wl-summary-save-status'.

2000-02-20  Kenichi OKADA  <okada@opaopa.org>

	* wl-summary.el (wl-summary-sync): Added `all-shown'

2000-02-20  Kenichi OKADA  <okada@opaopa.org>

	* wl-summary.el (wl-summary-input-range): Added `all-shown'

2000-02-19  Kenichi OKADA  <okada@opaopa.org>

	* wl-summary.el (wl-summary-sync-update3): Bind 'nohide as t if sync-all.

2001-02-19  OKAZAKI Tetsurou  <okazaki@be.to>

	* wl-highlight.el (wl-highlight-summary-line-string): Use
	`zerop' instead of `= 0'.
	(wl-highlight-summary): Use `zerop' instead of `eq 0'.

	* wl-template.el (wl-template-next): Use `=' instead of `eq'
	for comparing numbers.
	(wl-template-prev): Use `zerop' instead of `eq 0'.

	* wl-draft.el (wl-draft-insert-current-message): Use
	`with-current-buffer' instead of `save-excursion'.
	Use `zerop' instead of `eq 0'.

2001-02-17  Kenichi OKADA  <okada@opaopa.org>

	* wl-draft.el (wl-draft-insert-ccs): New function.
	(wl-draft): Use `wl-draft-insert-ccs' for Bcc and FCC.
	* wl-vars.el (wl-draft-delete-myself-from-bcc-fcc): New variable.

2001-02-15  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-summary.el (wl-cache-prefetch-message): Fixed last change.

2001-02-14  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-expire.el (wl-expire-refile): Don't call
	elmo-msgdb-add-msgs-to-seen-list;
	Pass wl-expire-add-seen-list to elmo-folder-move-messages.
	(wl-expire-refile-with-copy-reserve-msg): Ditto.

2001-01-19  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-message.el (wl-message-prev-page): Ignore errors while
	scroll-down.

2001-01-14  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-mime.el: Use elmo-original-message-mode instead of
	mmelmo-original-mode.

	* wl-fldmgr.el: Use `wl-folder-get-elmo-folder' instead of
	`elmo-folder-get-spec';
	(wl-fldmgr-add-completion-all-completions):
	Use `elmo-folder-list-subfolders' instead of `elmo-list-folders'.

	* wl-e21.el (wl-plugged-set-folder-icon): Use `elmo-folder-type' instead
	of `elmo-folder-get-type'.

	* wl-draft.el: Use `wl-folder-get-elmo-folder' instead of
	`elmo-folder-get-spec';
	Use `elmo-folder-msgdb-path' instead of `elmo-msgdb-expand-path';
	Use `elmo-folder-append-message' instead of `elmo-append-msg';
	Use `elmo-folder-list-messages' instead of `elmo-list-folder';
	Use `elmo-message-fetch' instead of `elmo-read-msg-with-cache' or
	`elmo-read-msg-no-cache';
	Use `elmo-message-file-name' instead of `elmo-get-msg-filename';
	Use `elmo-folder-delete-messages' instead of `elmo-delete-msgs'.
	(wl-default-draft-cite): Use `elmo-msgdb-overview-get-entity'.
	(wl-draft-dispatch-message): Use `elmo-file-cache-save' instead of
	`elmo-cache-save';
	(wl-draft-reedit): Use `elmo-message-file-name'.

	* wl-expire.el: Use `elmo-folder-name-internal';
	Use `elmo-folder-list-messages' instead of `elmo-list-folder';
	Use macro `wl-summary-buffer-msgdb' instead of variable
	`wl-summary-buffer-msgdb';
	Use `wl-folder-get-elmo-folder' instead of `elmo-folder-get-spec';
	Use macro `wl-summary-buffer-folder-name' instead of variable
	`wl-summary-buffer-folder-name'.
	* wl-score.el: Likewise.

	* wl-message.el: Rewrite for new message buffer cache mechanism.
	(wl-message-buffer-cache-buffer-get): New macro.
	(wl-message-buffer-cache-folder-get): Ditto.
	(wl-message-buffer-cache-message-get): Ditto.
	(wl-message-buffer-cache-entry-make): Ditto.
	(wl-message-buffer-cache-hit): Ditto.
	(wl-message-buffer-cache-sort): New function.
	(wl-message-buffer-cache-add): Ditto.
	(wl-message-buffer-cache-delete): Ditto.
	(wl-message-buffer-cache-clean-up): Ditto.
	(wl-message-buffer-window): Rewrite.
	(wl-message-select-buffer): Renamed from `wl-select-buffer'.
	(wl-message-buffer-display): New function.
	(wl-message-display-internal): New function.

2001-01-12  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-folder.el:	Use `elmo-folder-name-internal';
	Use `wl-folder-get-elmo-folder';
	Use `elmo-folder-list-messages' instead of
	`elmo-list-folder';
	Use `elmo-folder-get-primitive-list' instead of
	`elmo-folder-get-primitive-spec-list';
	Use `elmo-folder-list-subfolders' instead of `elmo-list-folders';
	Use `elmo-folder-msgdb-path' instead of `elmo-msgdb-expand-path';
	Use `elmo-folder-create' instead of `elmo-create-folder'.
	(wl-folder-create-newsgroups-from-nntp-access2): Abolish.
	(wl-folder-get-elmo-folder): New macro.
	(wl-folder-elmo-folder-cache-get): Ditto.
	(wl-folder-elmo-folder-cache-put): Ditto.
	(wl-folder-suspend): Call `elmo-quit'.

	* wl.el: Use `elmo-folder-msgdb-path' instead of `elmo-msgdb-expand-path';
	Use `elmo-folder-list-messages' instead of `elmo-list-folder';
	Use `elmo-net-port-info' instead of `elmo-folder-portinfo';
	Use `wl-folder-get-elmo-folder' instead of `elmo-folder-get-spec'.
	(toplevel): require 'cl.
	(wl-exit): Call `wl-message-buffer-cache-clean-up' and `elmo-quit'.

	* wl-summary.el: Rewrite to use new elmo interface.


2001-02-06  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-mime.el (wl-draft-preview-message):
	Run `wl-draft-send-hook' before collecting recipients information;
	Bind `wl-draft-config-exec-flag' while running `wl-draft-send-hook'.

	* tm-wl.el (wl-draft-preview-message): Ditto.

2001-02-05  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-mime.el (wl-draft-preview-message): Fixed problem that
	wrong recipients are displayed when forwarded message.

2001-02-01  Yuuichi Teranishi  <teranisi@gohome.org>

	* Version number is increased to 2.5.7.

2001-01-29  Katsumi Yamaoka    <yamaoka@jpl.org>

	* wl-message.el (wl-message-next-page): Bind
	`window-pixel-scroll-increment' to nil while scrolling up.

2001-01-27  TAKAHASHI Kaoru  <kaoru@kaisei.org>

	* wl-vars.el (wl-save-hook): New hook.
	* wl.el (wl-save): Call `wl-save-hook'.

2001-01-27  TAKAHASHI Kaoru  <kaoru@kaisei.org>

	* wl-draft.el (wl-draft-reply-list-symbol): Remove FROM argument.
	Argument WITH-ARG instead of NO-ARG (negative mean).
	(wl-draft-reply): WITH-ARG instead of NO-ARG.
	* wl-summary.el (wl-summary-reply): Fixed `wl-draft-reply' call point.
	* wl-message.el (wl-message-follow-current-entity): Likewise.

2001-01-26  TAKAHASHI Kaoru  <kaoru@kaisei.org>

	* wl-draft.el (wl-draft-reply-list-symbol): Change argument order.
	FROM was optional argument.
	(wl-draft-reply): Fixed `wl-draft-reply-list-symbol' call point.

2001-01-23  TAKAHASHI Kaoru  <kaoru@kaisei.org>

	* Version number is increased to 2.5.6.

2001-01-23  TAKAHASHI Kaoru  <kaoru@kaisei.org>

	* wl-version.el (wl-version-show): Removed.
	(wl-version): Add `interactive'.

2001-01-22  YAMASHITA Junji <ysjj@unixuser.org>

	* wl-summary.el (wl-summary-get-petname-func): New variable.
	(wl-summary-default-from): funcall `wl-summary-get-petname-func'
	instead of `wl-address-get-petname-1'.
	(wl-summary-simple-from): Ditto.

	* wl-address.el (wl-address-get-petname-1): Define as function.

2001-01-22  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-draft.el (wl-draft-reply): Fixed problem when there's no subject
	field in the original message.
	(Pointed out by "HIROSE, Masaaki" <hirose31@t3.rim.or.jp>)

2001-01-19  Akihiro MOTOKI <mokkun@iname.com>

	* wl-expire.el (wl-expire-hide):
	Call `wl-expire-delete-reserve-marked-msgs-from-list'.

2001-01-19  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-draft.el (wl-draft-reply): Use `mime-find-field-decoder' to
	find decoder for To, Cc, and Subject.

2001-01-30  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-summary.el (wl-cache-prefetch-next): Revert the logic
	for checking `elmo-use-buffer-cache'.
	(wl-summary-mark-as-important): Fixed typo in comment.

2001-01-22  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-draft.el (wl-draft-reply): Fixed problem when there's no subject
	field in the original message.
	(Pointed out by "HIROSE, Masaaki" <hirose31@t3.rim.or.jp>)

2001-01-19  Akihiro MOTOKI <mokkun@iname.com>

	* wl-expire.el (wl-expire-hide):
	Call `wl-expire-delete-reserve-marked-msgs-from-list'.

2001-01-19  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-draft.el (wl-draft-reply): Use `mime-find-field-decoder' to
	find decoder for To, Cc, and Subject.

2001-01-18  Yuuichi Teranishi  <teranisi@gohome.org>

	* Version number is increased to 2.5.5.

	* wl-address.el (wl-address-specials-regexp): New constant.
	(wl-address-quote-specials): Use it.

2001-01-17  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-summary.el (wl-summary-rescan):
	Call `wl-summary-buffer-number-column-detect'.
	(Advised by Akihiro MOTOKI <mokkun@iname.com>)

	* wl-message.el (wl-message-mode-map): Define.
	(wl-message-decode): Use it as local-map.

2001-01-16  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-score.el (wl-score-guess-like-gnus): Abolished.
	(wl-score-get-score-files): Don't use `wl-score-guess-like-gnus'.

2001-01-12  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-xmas.el (wl-read-event-char): Move from wl-util.el.

	* wl-mule.el (wl-read-event-char): Ditto.

	* wl-e21.el (wl-read-event-char): Ditto.

	* wl-nemacs.el (wl-read-event-char): Ditto.
	(read-event): Removed.

	* wl-util.el (toplevel): Removed dummy definition of
	`read-event'.
	(wl-read-event-char, wl-xmas-read-event-char): Removed.

2001-01-10  Katsumi Yamaoka    <yamaoka@jpl.org>

	* wl-nemacs.el (elmo-archive-call-process): Moved to
	elmo-archive.el.

2001-01-02  TAKAHASHI Kaoru  <kaoru@kaisei.org>

	* wl-draft.el (wl-draft-reply-list-symbol): New function.
	(wl-draft-reply): Use it.  Fixed "No match field" error message.

	* wl-draft.el (wl-draft-insert-from-field): Use (length "From: ")
	instead of magic-number 6.  Use `not' instead of `null' for symbol
	`nil' check (not empty list).
	(wl-draft-insert-x-face-field): Fixed paren style.

	* wl-draft.el (wl-draft-insert-x-face-field-here): Use `when' for
	one-branch conditional statement, instead of `and' and `if'.
	(wl-draft-forward): Likewise.
	(wl-draft-add-references): Likewise.
	(wl-draft-yank-from-mail-reply-buffer): Likewise.

	* wl-draft.el (wl-draft-delete-myself-from-cc): Refactoring nested
	conditional steatment.  Use `cond' instead of `if'.
	(wl-draft-confirm): Likewise.

2001-01-01  TAKAHASHI Kaoru  <kaoru@kaisei.org>

	* wl-version.el (wl-version-show): Use `product-string-1'
	instead of `wl-version'.
	* wl-fldmgr.el (wl-fldmgr-folders-header): Likewise.

	* wl-demo.el (wl-demo-copyright-notice): Add 2001.

2000-12-31  TAKAHASHI Kaoru  <kaoru@kaisei.org>

	* wl-highlight.el (wl-highlight-headers): Revert
	`wl-highlight-x-face-func' argument (`beg' and `end').

2000-12-29  TAKAHASHI Kaoru  <kaoru@kaisei.org>

	* wl.el (toplevel): Move `product-provide' declare.
	* wl-demo.el (toplevel): Ditto.
	* wl-dnd.el (toplevel): Ditto.
	* wl-highlight.el (toplevel): Ditto.
	* wl-message.el (toplevel): Ditto.
	* wl-refile.el (toplevel): Ditto.
	* wl-util.el (toplevel): Ditto.

2000-12-26  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-thread.el (wl-thread-open-all): Rewrite to open all threads and
	keep cursor position. (Advised by OKAZAKI Tetsurou  <okazaki@be.to>)
	(wl-thread-close-all): keep cursor position.

2000-12-24  TAKAHASHI Kaoru  <kaoru@kaisei.org>

	* wl-version.el (wl-version-status-alist): Use `zerop' instead of
	(eq x 0).
	(wl-generate-user-agent-string-1): Fix conditional statement.

2000-11-27  Kenichi OKADA  <okada@opaopa.org>

	* wl.el (wl-check-environment): Additional check for
	'wl-local-domain' and `wl-message-id-domain'.

2000-11-19  Kenichi OKADA  <okada@opaopa.org>

	* wl-draft.el (toplevel): Delete defvar for sasl-*.

2000-11-19  Kenichi OKADA  <okada@opaopa.org>

	* wl-draft.el (wl-smtp-extension-bind): Use `smtp-sasl-properties'
	instead of `smtp-sasl-user-realm'.

2000-11-19  Kenichi OKADA  <okada@opaopa.org>

	* wl-draft.el (wl-smtp-extension-bind): Rewrite for new SASL API.

2000-12-19  Katsumi Yamaoka    <yamaoka@jpl.org>

	* wl-draft.el (wl-draft-reply): Bind `mime-header-lexical-analyzer'
	to the default value as well as `eword-lexical-analyzer'.

2000-12-19  TAKAHASHI Kaoru  <kaoru@kaisei.org>

	* wl-version.el (wl-extended-emacs-version,
	wl-extended-emacs-version2, wl-extended-emacs-version3): Use
	`elmo-match-string' instead of `wl-match-string'.

2000-12-15  TAKAHASHI Kaoru  <kaoru@kaisei.org>

	* wl-summary.el (wl-summary-mode): Use \\{wl-summary-mode-map} in
	docstring.

2000-12-10  Hironori Fukuchi <nory@valis.co.jp>

	* wl-summary.el (wl-summary-toggle-thread): Docstring typo fix.

2000-12-15  TAKAHASHI Kaoru  <kaoru@kaisei.org>

	* wl-highlight.el (wl-highlight-headers): Remove
	`wl-highlight-x-face-func' argument (`beg' and `end').

2000-12-15  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-summary.el (wl-summary-mark-as-important):
	Remove cache if folder is local.

2000-12-06  Taro Kawagishi <taro.kawagishi@nokia.com>

	* wl-summary.el (wl-summary-edit-addresses-subr): Call `try-completion'
	to get existing e-mail address string.

2000-12-13  TAKAHASHI Kaoru  <kaoru@kaisei.org>

	* wl-version.el (wl-generate-user-agent-string): Commentary.
	(wl-generate-user-agent-string-1): Use `when' for
	one-branch conditional statement, instead of `and' and `if'.
	(wl-extended-emacs-version, wl-extended-emacs-version2,
	wl-extended-emacs-version3): Ditto.

2000-12-12  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-summary.el (wl-summary-sync-all-init): New inline function.
	(wl-summary-sync): Enclose `wl-summary-sync-update3' with
	condition-case; Remove initialization.
	(wl-summary-confirm-appends): Don't enclose with `condition-case'.
	(wl-summary-sync-update3): Added argument `sync-all';
	Eliminated local variable `msgdb';
	Call `wl-summary-sync-all-init' when `sync-all' is non-nil.
	Call `wl-summary-confirm-appends' before `wl-summary-sync-all-init'.
	(Pointed out by "HIROSE, Masaaki" <hirose31@t3.rim.or.jp>)

2000-12-12  KOGURO Naoki  <koguro@dd.iij4u.or.jp>

	* wl-draft.el (wl-draft-send-mail-with-pop-before-smtp): Close POP
	connection before call `wl-draft-send-mail-with-smtp'.

2000-11-30  Yuuichi Teranishi  <teranisi@gohome.org>

	* Version number is increased to 2.5.4.

2000-11-27  Kenichi OKADA  <okada@opaopa.org>

	* wl.el (wl-check-environment): Additional check for
	'wl-local-domain' and `wl-message-id-domain'.

2000-11-28  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-folder.el (wl-folder-sync-entity): Bind name of summary/message
	buffer as command specific.
	(wl-folder-mark-as-read-all-entity): Ditto.
	(wl-folder-prefetch-entity): Ditto.
	(wl-folder-drop-unsync-entity): Ditto.

	* wl-vars.el (wl-prog-uudecode-arg): Changed default to nil.
	(wl-prog-uudecode-no-stdout-option): Changed default to t.
	(Advised by YAMASHITA Junji <ysjj@unixuser.org>)

	* wl-summary.el (wl-summary-toggle-disp-folder): Removed needless
	save-excursion.

2000-11-22  Yuuichi Teranishi  <teranisi@gohome.org>

	* Version number is increased to 2.5.3.

	* wl-summary.el (wl-summary-save-view-cache):
	Delete duplicated `write-region';
	Use `write-region-as-binary' instead of `as-binary-output-file' and
	`write-region'.

2000-11-20  Katsumi Yamaoka    <yamaoka@jpl.org>

	* wl-e21.el (wl-make-date-string): Bind `system-time-locale' to "C".

2000-11-20  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-draft.el (wl-draft-send-mail-with-smtp): Use `smtp-send-buffer'
	instead of `smtp-via-smtp'.

2000-11-19  Kenichi OKADA  <okada@opaopa.org>

	* wl-draft.el (toplevel): Delete defvar for sasl-*.

2000-11-19  Kenichi OKADA  <okada@opaopa.org>

	* wl-draft.el (wl-smtp-extension-bind): Use `smtp-sasl-properties'
	instead of `smtp-sasl-user-realm'.

2000-11-19  Kenichi OKADA  <okada@opaopa.org>

	* wl-draft.el (wl-smtp-extension-bind): Rewrite for new SASL API.

2000-11-19  Kenichi OKADA  <okada@opaopa.org>

	* Version number is increased to 2.5.2.

2000-11-17  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-util.el (toplevel): Don't define wl-biff if `timer-activate'
	does not exist.
	(wl-biff-stop): Call `cancel-timer' if timer already exists.
	(wl-biff-start): Call `timer-activate' if timer already exists.

	* wl-mule.el (wl-message-overload-functions): Call `set-keymap-parent'
	only when it is bound as function.

2000-11-15  Yuuichi Teranishi  <teranisi@gohome.org>

	* Version number is increased to 2.5.1.

2000-11-14  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-thread.el (wl-thread-update-line-on-buffer-sub):
	Print refile/copy destination.

2000-11-13  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl.el (wl-toggle-plugged): Don't call `wl-biff-start' if
	queue-flush-only is non-nil.

	* wl-util.el (wl-biff-check-folder-async): Fix close parenthesis.

	* wl-summary.el (wl-summary-refile-subr): Use folder realname while
	checking cache folder.

2000-11-09  TAKAHASHI Kaoru  <kaoru@kaisei.org>

	* wl-folder.el (wl-folder-guess-mailing-list-by-folder-name): Use
	`regexp-quote'.

2000-11-08  TAKAHASHI Kaoru  <kaoru@kaisei.org>

	* wl-folder.el (wl-folder-guess-mailing-list-by-folder-name): New
	function.
	* wl-summary.el (wl-summary-write-current-folder-functions):
	Change default value.  Use it.

2000-11-08  Yuuichi Teranishi  <teranisi@gohome.org>

	* Version number is increased to 2.5.0.

	* wl-version.el (wl-version): Changed codename.

2000-11-06  Kenichi OKADA  <okada@opaopa.org>

	* wl-summary.el (wl-summary-cancel-message): Fetch again if no Newsgroups.
	(wl-summary-supersedes-message): Ditto.

2000-11-05  TAKAHASHI Kaoru  <kaoru@kaisei.org>

	* wl-refile.el (wl-refile-guess-functions): Renamed from
	`wl-refile-guess-func-list'.

2000-11-02  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-folder.el (wl-folder-guess-mailing-list-by-refile-rule):
	Fixed problem when no rule was matched.

2000-11-01  Akihiro MOTOKI  <motoki@da.jp.nec.com>

	* wl-summary.el (wl-summary-get-mark): Fixed
	`wl-summary-buffer-target-mark' check logic.

2000-11-01  TAKAHASHI Kaoru  <kaoru@kaisei.org>

	* wl-folder.el (wl-folder-write-current-folder): Added group
	folder check.

	* wl-summary.el (wl-summary-write-current-folder): Renamed from
	`wl-summary-write-current-newsgroup'.
	(wl-summary-write-current-folder-functions): New variable.
	* wl-folder.el (wl-folder-get-newsgroups): New function.
	(wl-folder-guess-mailing-list-by-refile-rule): New function.
	(wl-folder-write-current-folder): Renamed from
	`wl-folder-write-current-newsgroup'.

2000-11-01  TAKAHASHI Kaoru  <kaoru@kaisei.org>

	* Version number is increased to 2.3.93.

2000-11-01  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-address.el (wl-ldap-register-dn-string): Flatten dn-list.
	(wl-ldap-make-matched-value-list): Ditto.
	(wl-ldap-alias-safe-string): Split e-mail address.

	* wl-summary.el (wl-summary-read-folder): Fixed problem when
	petname folder default was selected.
	(Fix by HIROSE Yuuji <yuuji@gentei.org>)
	(wl-summary-auto-refile): Use `wl-folder-get-realname'.

2000-10-31  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-nemacs.el (wl-draft-overload-functions): Bind 'C-c C-e'
	to `wl-draft-config-exec'.

	* wl-mime.el (wl-draft-preview-message): Run `wl-draft-send-hook'
	instead of calling `wl-draft-config-exec';
	Process group-list and show recipients in minibuffer.

	* tm-wl.el (wl-draft-preview-message): Ditto.

2000-10-31  TAKAHASHI Kaoru  <kaoru@kaisei.org>

	* wl.el (toplevel): Added (C) to copyright notice, and
	sync Author header.
	* tm-wl.el (toplevel): Ditto.
	* wl-address.el (toplevel): Ditto.
	* wl-demo.el (toplevel): Ditto.
	* wl-dnd.el (toplevel): Ditto.
	* wl-draft.el (toplevel): Ditto.
	* wl-e21.el (toplevel): Ditto.
	* wl-expire.el (toplevel): Ditto.
	* wl-folder.el (toplevel): Ditto.
	* wl-highlight.el (toplevel): Ditto.
	* wl-message.el (toplevel): Ditto.
	* wl-mime.el (toplevel): Ditto.
	* wl-mule.el (toplevel): Ditto.
	* wl-nemacs.el (toplevel): Ditto.
	* wl-refile.el (toplevel): Ditto.
	* wl-score.el (toplevel): Ditto.
	* wl-summary.el (toplevel): Ditto.
	* wl-template.el (toplevel): Ditto.
	* wl-thread.el (toplevel): Ditto.
	* wl-util.el (toplevel): Ditto.
	* wl-vars.el (toplevel): Ditto.
	* wl-xmas.el (toplevel): Ditto.

2000-10-31  Katsumi Yamaoka    <yamaoka@jpl.org>

	* wl.el (wl-init): Added comment about `wl-init-hook'.
	* wl-folder.el (wl-make-plugged-alist): Removed useless comment.
	* wl-vars.el (wl-init-hook): Added docs.
	(wl-make-plugged-hook): Removed useless docs.
	* wl-e21.el (toplevel): Removed commented `wl-make-plugged-hook'.
	* wl-xmas.el (toplevel): Ditto.

2000-10-31  TAKAHASHI Kaoru  <kaoru@kaisei.org>

	* wl-address.el (toplevel): Fixed multiple Author header format.
	* wl-demo.el (toplevel): Ditto.
	* wl-draft.el (toplevel): Ditto.
	* wl-folder.el (toplevel): Ditto.
	* wl-summary.el (toplevel): Ditto.
	* wl-thread.el (toplevel): Ditto.
	* wl-util.el (toplevel): Ditto.
	* wl-vars.el (toplevel): Ditto.
	* wl-version.el (toplevel): Ditto.
	* wl-xmas.el (toplevel): Ditto.
	* wl.el (toplevel): Ditto.

	* wl-version.el (toplevel): Added require `elmo-version' for
	`product-version-as-string'.

2000-10-31  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-vars.el (wl-draft-send-hook): Changed default value to
	'(wl-draft-config-exec).

	* wl-draft.el (wl-draft-send): Don't call `wl-draft-config-exec'
	explicitly.
	(wl-draft): Set `wl-draft-config-exec-flag' before running
	`wl-mail-setup-hook'.

	* wl-xmas.el (toplevel): Add `wl-plugged-init-icons' and
	`wl-biff-init-icons' to	`wl-init-hook' instead of
	`wl-make-plugged-hook'.
	(Because if `wl-draft' command is invoked at first,
	they are not initialized)
	Updated copyright notice.

	* wl-e21.el (toplevel): Ditto;

	* wl-demo.el (toplevel): Updated copyright notice.
	* wl-address.el (toplevel): Ditto.
	* wl-draft.el (toplevel): Ditto.
	* wl-version.el (toplevel): Ditto.
	* wl-folder.el (toplevel): Ditto.
	* wl-summary.el (toplevel): Ditto.
	* wl-thread.el (toplevel): Ditto.
	* wl-util.el (toplevel): Ditto.
	* wl-vars.el (toplevel): Ditto.
	* wl.el (toplevel): Ditto.

2000-10-30  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-highlight.el (wl-highlight-message): Fixed problem of
	highlighting failure which occured when the last field contains
	multiple lines in the draft buffer.

	* wl.el (wl-toggle-plugged): Call `wl-biff-stop' if unplugged,
	`wl-biff-start' if plugged.

	* wl-util.el (wl-biff-check-folder): New function.
	(wl-biff-check-folders): Don't set session name prefix.
	Use `wl-biff-check-folder' instead of `wl-folder-check-one-entity'.
	(wl-biff-check-folder-async): Ditto.

	* wl-address.el (wl-ldap-alias-safe-string): Replace '@' to '/'
	in email address.

2000-10-07  Yasushi Shoji      <yashi@yashi.com>

	* wl-vars.el (wl-subject-prefix-regexp): New variable.

	* wl-draft.el (wl-draft-strip-subject-re): New function.

	* wl-draft.el (wl-draft-reply): Use it.

2000-10-30  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-message.el (wl-mmelmo-message-redisplay): Use
	`mime-display-message' instead of `wl-mime-display-message'.

	* wl-mime.el (toplevel): Removed compatibility workaround
	for SEMI 1.13.4. or earlier and FLIM 1.12.7 or earlier.
	(wl-mime-display-message): Abolished.
	(wl-mime-entity-read-field): Ditto.
	(wl-mime-combine-message/partial-pieces): Use
	`mime-entity-read-field' instead of `wl-mime-entity-read-field'.

2000-10-27  OKAZAKI Tetsurou  <okazaki@be.to>

	* wl-template.el: Doc fixes.

2000-10-26  Katsumi Yamaoka    <yamaoka@jpl.org>

	* wl-e21.el (wl-message-overload-functions): Do nothing if
	`current-local-map' is not available.
	(wl-e21-setup-message-toolbar): Allow the argument `keymap'.

2000-10-26  TAKAHASHI Kaoru  <kaoru@kaisei.org>

	* wl-fldmgr.el (wl-fldmgr-save-folders): Fixed permission lateral
	representation.

	* wl-fldmgr.el (wl-fldmgr-folders-header): Include version
	number.
	(wl-fldmgr-save-folders): Don't use `format' when insert
	`wl-fldmgr-folders-header'.

2000-10-26  Katsumi Yamaoka    <yamaoka@jpl.org>

	* wl-demo.el (wl-demo): Don't use `fancy-splash-insert'.

2000-10-26  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-highlight.el (wl-highlight-message):
	Use `std11-field-end' to detect end point of the header field.
	Refer `wl-highlight-max-header-size'.

	* wl-vars.el (wl-highlight-max-header-size): New variable.

	* wl-highlight.el (wl-highlight-headers): Added argument `for-draft'.

	* wl-draft.el (wl-draft-yank-from-mail-reply-buffer):
	Set `for-draft' argument of wl-highlight-headers.
	(wl-draft): Ditto.
	(wl-draft-reedit): Ditto.
	(wl-user-agent-compose-internal): Ditto.

2000-10-24   Daiki Ueno <ueno@unixuser.org>

	* wl-message.el (wl-message-add-button): Use overlay.

2000-10-24  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-draft.el (wl-draft-parse-mailbox-list): Don't insert extra space.

	* wl-address.el (wl-address-string-without-group-list-contents): Fixed
	problem when group-list content is nothing.
	(Reported by Mito <mit@nines.nec.co.jp>)

2000-10-18  SAITO Atsunori <sai@yedo.com>

	* wl-summary.el (wl-summary-print-destination): Adjust line length.

2000-10-20  TAKAHASHI Kaoru  <kaoru@kaisei.org>

	* tm-wl.el (toplevel): Use product-provide.

2000-10-20  Yuuichi Teranishi  <teranisi@gohome.org>

	* Version number is increased to 2.3.92.

2000-10-19  Katsumi Yamaoka    <yamaoka@jpl.org>

	* wl-demo.el (wl-demo): Use `fancy-splash-insert' for inserting a
	title text, use `display' property for left margin under Emacs 21.

	* wl-e21.el (wl-biff-init-icons): Don't use `propertize' without
	properties.
	(wl-plugged-init-icons): Ditto.

2000-10-19  TAKAHASHI Kaoru  <kaoru@kaisei.org>

	* wl.el (wl-save-status, wl-init): Remove last period in
	"...done." message.
	* tm-wl.el (wl-summary-burst): Ditto.
	* wl-summary.el (wl-summary-rescan, wl-summary-mark-as-read-all,
	wl-summary-resume-cache-status,
	wl-summary-resume-marks-and-highlight, wl-summary-resume-marks,
	wl-summary-sync-update3, wl-summary-highlight-msgs,
	wl-summary-flush-pending-append-operations,
	wl-summary-delete-all-msgs, wl-summary-delete-all-temp-marks,
	wl-summary-jump-to-parent-message, wl-summary-drop-unsync): Ditto.
	* wl-thread.el (wl-thread-resume-entity, wl-thread-close-all,
	wl-thread-open-all): Ditto.
	* wl-score.el (wl-summary-score-update-all-lines): Ditto.
	* wl-mime.el (wl-summary-burst): Ditto.
	* wl-highlight.el (wl-highlight-summary): Ditto.
	* wl-folder.el (wl-folder-update-newest, wl-local-folder-init,
	wl-folder-open-all, wl-folder-update-access-group): Ditto.
	* wl-draft.el (wl-draft-send, wl-draft-queue-append): Ditto.
	* wl-address.el (wl-local-address-init): Ditto.

2000-10-19  Katsumi Yamaoka    <yamaoka@jpl.org>

	* wl-e21.el (wl-biff-init-icons): Use `propertize' instead of
	`add-text-properties'.
	(wl-plugged-init-icons): Ditto.
	(wl-folder-init-icons): Use `propertize' instead of
	`put-text-property'.
	(wl-plugged-set-folder-icon): Ditto.
	(wl-e21-highlight-folder-group-line): Ditto.

2000-10-18  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-version.el (wl-version-status-alist): New variable.
	(wl-version-status): New function.

	* wl-vars.el (wl-draft-reply-without-argument-list): Added "From" to
	"Cc" part of the case "Reply-To".

	* wl-draft.el (wl-draft-reply): Use result of
	`eword-extract-address-components'.

	* wl-demo.el (wl-demo-icon-name): New constant.
	(wl-logo-xpm): Use it.
	(wl-logo-xbm): Ditto.
	(wl-logo-bitmap): Ditto.

	* Version number is increased to 2.3.91.

2000-10-18  TAKAHASHI Kaoru  <kaoru@kaisei.org>

	* wl-version.el (wl-generate-user-agent-string): Fixed docstring.
	(wl-extended-emacs-version, wl-extended-emacs-version2,
	wl-extended-emacs-version3): Remove `interactive'.  Fixed
	docstring.

	* wl-version.el (wl-generate-user-agent-string-1): New function.
	(wl-generate-user-agent-string): Use it.

	* wl-version.el (wl-generate-user-agent-string-1): Ignore
	`mime-edit-insert-user-agent-field'.
	(wl-generate-user-agent-string): Check
	`mime-edit-insert-user-agent-field' and `mime-editor/version'.

	* wl-version.el (wl-generate-user-agent-string-1): Use `cond'
	instead of `if', when verbose case.

2000-10-18  Kenichi OKADA  <okada@opaopa.org>

	* wl-expire.el (wl-summary-expire): Fix.

2000-10-18  Kenichi OKADA  <okada@opaopa.org>

	* wl.el (wl-check-environment): Don't check `wl-trash-folder'
	and `elmo-lost+found-folder' if 'wl-draft.
	* wl-draft.el (wl-draft): Call `wl-init' with 'wl-draft.

2000-10-17  Kenichi OKADA  <okada@opaopa.org>

	* wl-expire.el (wl-summary-expire): Change messages.
	* wl-summary.el (wl-summary-delete-messages-on-buffer): Use
	`deleing-info' instead of "Deleting..."

2000-10-15  Osamu Yamane <yamane@green.ocn.ne.jp>

	* wl-summary.el (wl-summary-refile-subr): Fix.

2000-10-15  Kenichi OKADA  <okada@opaopa.org>

	* wl-summary.el (wl-summary-refile-subr): Check dst-spec-plugged
	if pipe folder.

2000-10-17  Kenichi OKADA  <okada@opaopa.org>

	* wl-vars.el (wl-draft-use-cache): Default `nil'.

2000-10-17  Kenichi OKADA  <okada@opaopa.org>

	* wl-expire.el (wl-expire-hide): New function.
	(wl-summary-expire): Add `hide'.

2000-10-17  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-vars.el (wl-draft-reply-without-argument-list):
	Changed default value to consider `Reply-To:'.
	(Advised by TAKAHASHI Kaoru <kaoru@kaisei.org>)

	* Version number is increased to 2.3.90.

	* wl-summary.el (wl-summary-msgdb-load-async): Enclose
	elmo-imap4-get-session with unwind-protect.
	Don't cause error.
	(wl-summary-sync-marks): Don't check plugged nor folder type.
	(wl-summary-save-view-cache): Abolished argument `keep-current-buffer'
	(Always keep current buffer).

2000-10-16  Akihiro MOTOKI  <motoki@da.jp.nec.com>

	* wl-highlight.el (wl-highlight-message-add-buttons-to-header):
	Enclose with `save-excursion'.

2000-10-16  TAKAHASHI Kaoru  <kaoru@kaisei.org>

	* wl-version.el (wl-version): Remove interactive.

2000-10-15  TAKAHASHI Kaoru  <kaoru@kaisei.org>

	* wl-version.el (wl-generate-user-agent-string): Use
	`product-string-verbose' instead of `product-string-1'.

2000-10-15  Kenichi OKADA  <okada@opaopa.org>

	* wl-vars.el (wl-draft-use-cache): New variable.
	* wl-draft.el (wl-draft-dispatch-message): Sending message is cached,
	if wl-draft-use-cache is non-nil.

2000-10-15  Kenichi OKADA  <okada@opaopa.org>

	* wl-summary (wl-summary-prefetch): Don't prefetch if cached.
	(wl-summary-prefetch-msg): force prefetch if called with optional argument.

2000-10-13  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-thread.el (wl-thread-msg-mark-as-read): Abolished.
	(wl-thread-msg-mark-as-unread): Ditto.

	* wl-summary.el (wl-summary-sync-marks): Delete argument 'no-cache.
	(wl-summary-mark-as-unread): Check return value of `elmo-mark-as-read'.
	(wl-summary-mark-as-read): Invert the meaning of 6 th argument.
	Don't set mark in summary if return value of `elmo-mark-as-read'
	is nil.
	Use `wl-summary-mark-as-read' instead of `wl-thread-msg-mark-as-read'.
	(wl-summary-mark-as-read-region):  Use `wl-summary-mark-as-read'
	instead of `wl-thread-msg-mark-as-read'.
	(wl-summary-mark-as-unread-region): Ditto.
	(wl-summary-target-mark-mark-as-read): Ditto.

	* wl-score.el (wl-summary-score-update-all-lines): Ditto.

2000-10-12  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-xmas.el (wl-highlight-folder-current-line): Remove previous face.

	* wl-mule.el (wl-highlight-folder-current-line): Ditto.

2000-10-11  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-highlight.el (wl-highlight-folder-group-line): Remove previous
	face.

2000-10-11  OKAZAKI Tetsurou  <okazaki@be.to>

	* wl-util.el (toplevel): Use `wl-on-xemacs' instead of
	`running-xemacs'.

2000-10-11  TAKAHASHI Kaoru  <kaoru@kaisei.org>

	* wl-version.el (toplevel): Use `product-version-as-string' for
	set verstion-string, if defined.

	* wl-version.el (wl-version-show): Insert string at point, when
	call with argument.

	* wl-version.el (wl-generate-user-agent-string): Use
	`product-string-1' instead of `wl-appname', `wl-version' and
	`wl-codename'.

2000-10-10  TAKAHASHI Kaoru  <kaoru@kaisei.org>

	* wl-address.el (toplevel): Use product-provide.
	* wl-demo.el (toplevel): Ditto.
	* wl-dnd.el (toplevel): Ditto.
	* wl-draft.el (toplevel): Ditto.
	* wl-e21.el (toplevel): Ditto.
	* wl-expire.el (toplevel): Ditto.
	* wl-fldmgr.el (toplevel): Ditto.
	* wl-folder.el (toplevel): Ditto.
	* wl-highlight.el (toplevel): Ditto.
	* wl-message.el (toplevel): Ditto.
	* wl-mime.el (toplevel): Ditto.
	* wl-mule.el (toplevel): Ditto.
	* wl-nemacs.el (toplevel): Ditto.
	* wl-refile.el (toplevel): Ditto.
	* wl-score.el (toplevel): Ditto.
	* wl-summary.el (toplevel): Ditto.
	* wl-template.el (toplevel): Ditto.
	* wl-thread.el (toplevel): Ditto.
	* wl-util.el (toplevel): Ditto.
	* wl-vars.el (toplevel): Ditto.
	* wl-xmas.el (toplevel): Ditto.
	* wl.el (toplevel): Ditto.

2000-10-10  TAKAHASHI Kaoru  <kaoru@kaisei.org>

	* wl-fldmgr.el (wl-fldmgr-save-folders): Use (wl-version t)
	instead of product.

	* wl-version.el (wl-version): Compile time evalution elmo-version.

2000-10-10  Kenichi OKADA  <okada@opaopa.org>

	* wl-summary.el (wl-summary-sync-force-update): Append queue
	`mark-as-read'if unplugged.

2000-10-10  TAKAHASHI Kaoru  <kaoru@kaisei.org>

	* wl-version.el: New file.  Use product.el.
	* wl.el: add (require 'wl-version).
	* wl-fldmgr.el (wl-fldmgr-save-folders): Use `product-string-1'
	for ~/.folders header.
	(wl-fldmgr-folders-header): Changed.
	* wl-demo.el (wl-demo): Use product.el.

	* wl-vars.el (wl-appname, wl-version, wl-codename): Move to
	wl-version.el.
	* wl-util.el (wl-version, wl-version-show): Ditto.

	* wl-util.el (wl-generate-user-agent-string,
	wl-extended-emacs-version, wl-extended-emacs-version2,
	wl-extended-emacs-version3): Move to wl-version.el.
	* wl-util.el (mule-version, nemacs-version, emacs-beta-version,
	xemacs-codename, mime-edit-insert-user-agent-field,
	mime-edit-user-agent-value, mime-editor/version,
	mime-editor/codename): Compile warning killer move to
	wl-version.el

2000-10-09  Kenichi OKADA  <okada@opaopa.org>

	* wl-summary.el (wl-summary-refile-subr): Fix.

2000-10-09  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-summary.el (wl-summary-sync-marks): Changed argument for
	`elmo-list-folder-unread' and `elmo-list-folder-important'.

2000-10-08  Kenichi OKADA	<okada@opaopa.org>

	* wl.el (wl-check-environment): Check too many `@'.

2000-10-08   Mikio Nakajima <minakaji@osaka.email.ne.jp>

	* wl-thread.el (wl-thread-delete-message): Fix parentheses.

2000-10-07  TAKAHASHI Kaoru  <kaoru@kaisei.org>

	* wl-vars.el (wl-draft-reply-myself-with-argument-list,
	wl-draft-reply-myself-without-argument-list): Add variables.
	* wl-draft.el (wl-draft-reply): Use it.

2000-10-06   Daiki Ueno  <ueno@unixuser.org>

	* wl-fldmgr.el (wl-fldmgr-add-completion-all-completions): Pass
	the 5th argument of `elmo-network-get-spec'.

	* wl-thread.el (wl-thread-reparent-children): New inline function.
	(wl-thread-delete-message): Use it.

	* wl-score.el (wl-score-headers): Abolish local variable `buffers'.
	(wl-summary-score-update-all-lines): Don't use `dolist'.

2000-10-06  TAKAHASHI Kaoru  <kaoru@kaisei.org>

	* wl-score.el (toplevel): Remove (provide 'elmo-msgdb).  And add
	(require 'elmo-msgdb) for inline function.

2000-10-06  Kenichi OKADA  <okada@opaopa.org>

	* wl-vars.el (wl-draft-queue-save-variables): Add variables.

2000-10-06  Kenichi OKADA  <okada@opaopa.org>

	* wl-score.el (wl-score-headers): Fix for the confusing macro
	`elmo-kill-buffer'.

2000-10-05  Katsumi Yamaoka    <yamaoka@jpl.org>

	* wl-summary.el: Don't use the 3rd argument of `require' because
	it might be ignored by some wrappers (e.g. jam-zcat, efs, etc.).
	* wl-util.el: Ditto.
	* wl-draft.el: Ditto.

2000-10-05  Katsumi Yamaoka    <yamaoka@jpl.org>

	* wl-demo.el (wl-demo): Don't pass by the XEmacs routine when
	window system is not used.

2000-10-04   Daiki Ueno  <ueno@unixuser.org>

	* wl-thread.el: Don't use `mapcar' only for iteration.
	(wl-thread-resume-entity): Ditto.
	(wl-thread-delete-message): Ditto.

	* wl-summary.el: Bind `dragdrop-drop-functions',
	`scrollbar-height' and `mail-reply-buffer'; specify 3rd argument
	of `require' for `timezone', `easymenu' and `ps-print';
	don't use `mapcar' only for iteration.

	* wl-util.el: Bind `mule-version', `nemacs-version',
	`emacs-beta-version', `xemacs-codename',
	`mime-edit-insert-user-agent-field', `mime-edit-user-agent-value',
	`mime-editor/version' and `mime-editor/codename'; specify 3rd
	argument of `require' for `tm-edit' and `pp'; don't use `mapcar'
	only for iteration.

	* wl-score.el: Don't use `mapcar' only for iteration.
	(wl-score-simplify-buffer-fuzzy): Ditto.
	(wl-score-simplify-subject): Ditto.
	(wl-score-headers): Ditto.
	(wl-summary-score-update-all-lines): Ditto.

	* wl-mime.el: Bind `xemacs-betaname', `xemacs-codename',
	`enable-multibyte-characters' and `mule-version'.

	* wl-message.el: Bind `mmelmo-imap4-skipped-parts'; don't use
	`mapcar' only for iteration.

	* wl-demo.el: Don't use `mapcar' only for iteration.

	* wl-folder.el: Don't use `mapcar' only for iteration.
	(wl-folder-open-all): Ditto.
	(wl-folder-count-incorporates): Ditto.

	* wl-fldmgr.el (wl-add-entity): Don't use `mapcar' only for iteration.
	(wl-add-entity-sub): Ditto; use `delq' instead of `delete'.

	* wl-draft.el: Bind `x-face-add-x-face-version-header',
	`mail-reply-buffer', `mail-from-style', `smtp-authenticate-*' and
	`smtp-connection-type'; specify 3rd argument of `require' for
	`timezone'; don't use `mapcar' only for iteration.
	(wl-draft-clone-local-variables): Don't use `mapcar'.
	(wl-draft-generate-clone-buffer): Ditto.
	(wl-user-agent-compose-internal): Ditto.

	* wl-xmas.el (wl-folder-init-icons): Use `dolist' instead of `mapcar'.

	* wl.el (wl-toggle-plugged): Don't use `mapcar' only for iteration.
	(wl-save-status): Ditto.

	* wl-address.el (wl-local-address-init): Don't use `mapcar' only
	for iteration.

2000-10-04  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-vars.el (wl-summary-pick-field-default): Added `Last', `First' and
	removed `Date'.
	(wl-fldmgr-make-filter-default): New user option.

	* wl-fldmgr.el (wl-fldmgr-make-filter): Simplify.
	Use `elmo-read-search-condition' and `wl-fldmgr-make-filter-default'
	(wl-fldmgr-filter-completion-alist): Abolish.

	* wl.el (wl): Don't check servers if arg is non-nil.

	* wl-draft.el (wl-draft-reply): Set only message-id string to
	In-Reply-To field.

2000-10-03  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-summary.el (wl-summary-pick): Rewrite.

	* wl-draft.el (wl-draft-forward): Get references field from
	original buffer.
	(wl-draft-forward): Use `wl-draft-parse-msg-id-list-string'.

2000-10-02  A. SAGATA  <sagata@nttvdt.hil.ntt.co.jp>

	* wl-draft.el (wl-draft-forward): Add references field.

2000-10-03  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-draft.el (wl-draft-parse-msg-id-list-string): New function.
	(wl-draft-reply): Use it.

2000-10-02  Katsumi Yamaoka    <yamaoka@jpl.org>

	* wl-vars.el (wl-icon-dir): Default to $(data-directory)/wl/icons/
	when Emacs 21 is running.

	* wl-e21.el (wl-e21-make-toolbar-buttons): Invalidate the default
	bindings.

2000-09-29  Katsumi Yamaoka    <yamaoka@jpl.org>

	* wl-e21.el (wl-e21-setup-toolbar): Make the background color of
	XPM icons transparent.

	* wl-demo.el (wl-demo): Hide toolbar while showing a logo under
	Emacs 21.

2000-09-29  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl.el (wl-toggle-plugged): Set `wl-biff-check-folders-running' as
	nil.

	* wl-summary.el (wl-summary-sync-force-update): Save seen-list only
	when it is persistent.
	(wl-summary-sync-marks): Changed argument for
	`elmo-list-folder-unread' and `elmo-list-folder-important'.
	(wl-summary-virtual): Use `elmo-read-search-condition'.
	(wl-summary-redisplay-internal): If folder is local, mark as read
	even when folder is plugged.

2000-09-28  Katsumi Yamaoka    <yamaoka@jpl.org>

	* wl-e21.el (wl-e21-make-toolbar-buttons): Don't modify the value
	of `tool-bar-lines' in the frame parameters.
	(after-make-frame-functions, post-command-hook): Don't modify the
	value.
	(wl-e21-switch-toolbar-after-make-frame, wl-e21-switch-toolbar,
	wl-e21-tool-bar-lines): Removed.

2000-09-28  Katsumi Yamaoka    <yamaoka@jpl.org>

	* wl-highlight.el (wl-highlight-folder-path): Put overlay
	properties `evaporate' and `wl-momentary-overlay' as well.
	(wl-highlight-summary-displaying): Ditto.
	(wl-delete-all-overlays): Don't delete overlay which does not have
	a property `wl-momentary-overlay'.

	* wl-e21.el (wl-biff-init-icons, wl-plugged-init-icons): Refer to
	`display-mouse-p' and `display-graphic-p'.
	(wl-folder-init-icons): Don't search for XBM or the other files.
	(wl-plugged-set-folder-icon): Make icons if and only if
	`display-graphic-p' returns non-nil.
	(wl-highlight-plugged-current-line): Use `before-string' overlay
	property to show icon images.
	(wl-highlight-folder-current-line): Ditto.
	(wl-e21-highlight-folder-group-line): Ditto.
	(wl-e21-highlight-folder-by-numbers): Ditto.
	(wl-e21-insert-image): Removed.
	(wl-e21-setup-*-toolbar): Refer to `display-graphic-p'.
	(wl-e21-make-toolbar-buttons): Set the value that Emacs itself
	said.
	(wl-e21-switch-toolbar-after-make-frame): Renamed from
	`wl-e21-force-switch-toolbar'.
	(wl-e21-make-icon-image): Removed.
	(wl-e21-setup-toolbar): Don't search for XBM files.
	(wl-use-toolbar): Don't refer to `display-graphic-p' to determine
	the default value.

2000-09-27  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-util.el (wl-biff-check-folder-async): Set
	`wl-biff-check-folders-running' even when it is not an IMAP folder.

2000-09-26  Katsumi Yamaoka    <yamaoka@jpl.org>

	* wl-e21.el (after-make-frame-functions): Add
	`wl-e21-force-switch-toolbar'.
	(wl-e21-force-switch-toolbar): New function force to switch the
	toolbar appearance automatically.
	(post-command-hook): Add `wl-e21-switch-toolbar'.
	(wl-e21-switch-toolbar): New function to switch the toolbar
	appearance automatically.
	(wl-e21-tool-bar-lines): New buffer local variable.

2000-09-25  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-util.el (wl-biff-check-folders-running): New variable.
	(wl-biff-check-folders): Set and check `wl-biff-check-folders-running'.
	(wl-biff-check-folder-async-callback):
	Set `wl-biff-check-folders-running'.
	(wl-biff-check-folders): Enclose `wl-folder-check-one-entity'
	with unwind-protect.

	* wl.el (wl): Call `wl-biff-start' before `wl-folder-auto-check'.
	Enclose `wl-folder-auto-check' with unwind-protect.

	* wl-util.el (wl-biff-start) [Emacs19+]: require 'timer.
	(toplevel) [Emacs19+]: Removed autoload setting for "timer".

	* wl.el (wl): Call `wl-folder-auto-check' after `wl-plugged-init'.

	* wl-util.el (wl-biff-notify): New inline function.
	(wl-biff-check-folders): Bind `elmo-network-session-name-prefix'
	locally.
	Call `wl-biff-check-folder-async' if length of `wl-biff-check-
	folder-list' is 1.
	Use `wl-biff-notify'.
	(wl-biff-check-folder-async-callback): New function.
	(wl-biff-check-folder-async): Ditto.

	* wl-folder.el (wl-folder): Don't check folders.
	(wl-folder-auto-check): New function.

2000-09-24  A. SAGATA  <sagata@nttvdt.hil.ntt.co.jp>

	* wl-util.el (wl-biff-start) [Emacs19+]:
	Use `timer-next-integral-multiple-of-time'.
	(wl-biff-check-folders): Use `wl-default-folder'
	if `wl-biff-check-folder-list' is nil.

2000-09-24  OKAZAKI Tetsurou  <okazaki@be.to>

	* wl-summary.el (wl-summary-set-crosspost): Use `elmo-list-delete'
	instead of `elmo-delete-lists'.

2000-09-22  Katsumi Yamaoka    <yamaoka@jpl.org>

	* wl.el (wl-plugged-toggle-all): Set the value of
	`wl-modeline-plug-status' instead of `wl-plug-state-indicator'.
	(wl-plugged-toggle): Ditto.
	(wl-toggle-plugged): Ditto.
	(wl-plugged-init): Ditto.

	* wl-xmas.el (wl-biff-init-icons): Set icons data to
	`wl-modeline-biff-state-off' and `wl-modeline-biff-state-on'
	instead of `wl-biff-state-indicator-off' and
	`wl-biff-state-indicator-on'; don't modify the value and the type
	of `wl-biff-state-indicator-off' and `wl-biff-state-indicator-on'.
	(wl-plugged-init-icons): Set icons data to
	`wl-modeline-plug-state-off' and `wl-modeline-plug-state-on'
	instead of `wl-plug-state-indicator-off' and
	`wl-plug-state-indicator-on'; don't modify the value and the type
	of `wl-plug-state-indicator-off' and `wl-plug-state-indicator-on'.

	* wl-vars.el (wl-modeline-biff-state-off,
	wl-modeline-biff-state-on, wl-modeline-biff-status,
	wl-modeline-plug-state-off, wl-modeline-plug-state-on,
	wl-modeline-plug-status): New internal variables.
	(wl-biff-state-indicator-off, wl-biff-state-indicator-on,
	wl-biff-check-interval, wl-biff-check-folder-list): Change
	customization group from `wl-folder' to `wl-highlight'.
	(wl-plug-state-indicator-off, wl-plug-state-indicator-on,
	wl-show-plug-status-on-modeline): Defcustomized.

	* wl-util.el (wl-biff-check-folders): Set the value of the flag
	`wl-modeline-biff-status' instead of `wl-biff-state-indicator'.
	(wl-mode-line-buffer-identification): Set both ON and OFF data with
	a flag to `mode-line-buffer-identification'.

	* wl-e21.el (wl-biff-init-icons): Set icons data to
	`wl-modeline-biff-state-off' and `wl-modeline-biff-state-on'
	instead of `wl-biff-state-indicator-off' and
	`wl-biff-state-indicator-on'.
	(wl-plugged-init-icons): Set icons data to
	`wl-modeline-plug-state-off' and `wl-modeline-plug-state-on'
	instead of `wl-plug-state-indicator-off' and
	`wl-plug-state-indicator-on'.

2000-09-20  Hiroya Murata  <lapis-lazuli@pop06.odn.ne.jp>

	* wl-util.el (wl-mode-line-buffer-identification): Don't breed
	excessive titles.

2000-09-20  Katsumi Yamaoka    <yamaoka@jpl.org>

	* wl.el (wl-plugged-mode): Use revised
	`wl-mode-line-buffer-identification'.
	(wl-plugged-init): Don't use `force-mode-line-update'.

	* wl-xmas.el (wl-draft-overload-functions): Use revised
	`wl-mode-line-buffer-identification'.
	(wl-setup-summary): Renamed from `wl-xmas-setup-summary'.
	(wl-setup-folder): Renamed from `wl-xmas-setup-folder'.
	(TopLevel): Add `wl-setup-summary' to `wl-summary-mode-hook';
	add `wl-plugged-init-icons' and `wl-biff-init-icons' to
	`wl-make-plugged-hook';
	add `wl-folder-init-icons' and `wl-setup-folder' to
	`wl-folder-mode-hook'.

	* wl-vars.el (wl-use-highlight-mouse-line): Activate it for Emacs
	19 as well.
	(wl-mode-line-display-priority-list): New user option.
	(wl-biff-state-indicator-off, wl-biff-state-indicator-on):
	Defcustomized.
	(wl-make-plugged-hook, wl-summary-mode-hook, wl-folder-mode-hook):
	Add docs.

	* wl-util.el (wl-biff-start): Call `wl-biff-check-folders' at the
	start.
	(wl-mode-line-buffer-identification): Revised as a function.

	* wl-summary.el (wl-summary-mode): Use revised
	`wl-mode-line-buffer-identification'; don't call
	`wl-e21-setup-summary' nor `wl-xmas-setup-summary' directly.
	(TopLevel): Don't bind `wl-e21-setup-summary' nor
	`wl-xmas-setup-summary'.

	* wl-nemacs.el (wl-draft-overload-functions): Use revised
	`wl-mode-line-buffer-identification'.

	* wl-mule.el (wl-draft-overload-functions): Use revised
	`wl-mode-line-buffer-identification'.

	* wl-folder.el (wl-make-plugged-alist): Don't call
	`wl-biff-init-icons' nor `wl-plugged-init-icons' directly.
	(wl-folder): Don't call `wl-folder-init-icons' directly.
	(wl-folder-mode): Don't call `wl-e21-setup-folder' nor
	`wl-xmas-setup-folder' directly;
	use revised `wl-mode-line-buffer-identification'.
	(TopLevel): Don't bind `wl-biff-init-icons',
	`wl-plugged-init-icons', `wl-folder-init-icons',
	`wl-e21-setup-folder' nor `wl-xmas-setup-folder'.

	* wl-e21.el (wl-draft-overload-functions): Use revised
	`wl-mode-line-buffer-identification'.
	(wl-setup-summary): Renamed from `wl-e21-setup-summary'.
	(wl-setup-folder): Renamed from `wl-e21-setup-folder'.
	(TopLevel): Add `wl-setup-summary' to `wl-summary-mode-hook';
	add `wl-plugged-init-icons' and `wl-biff-init-icons' to
	`wl-make-plugged-hook';
	add `wl-folder-init-icons' and `wl-setup-folder' to
	`wl-folder-mode-hook'.

2000-09-18  A. SAGATA <sagata@nttvdt.hil.ntt.co.jp>
            Katsumi Yamaoka    <yamaoka@jpl.org>

	* wl.el (wl): Call `wl-biff-start'.
	(wl-exit): Call `wl-biff-stop'.
	(wl-plugged-mode): Show biff in modeline.
	(wl-unplugged-glyph, wl-plugged-glyph): Removed.

	* wl-xmas.el (wl-draft-overload-functions): Show biff in modeline.
	(wl-biff-init-icons): New function.
	(wl-plugged-init-icons): Don't make too much keymaps.
	(wl-biff-nomail-glyph, wl-biff-mail-glyph): New variables.

	* wl-vars.el (wl-biff-nomail-icon, wl-biff-mail-icon,
	wl-biff-state-indicator-off, wl-biff-state-indicator-on): New
	variables.
	(wl-biff-check-interval, wl-biff-check-folder-list): New user
	options.

	* wl-util.el (wl-biff-check-folders, wl-biff-event-handler,
	wl-biff-start, wl-biff-stop): New functions.
	(timer-next-integral-multiple-of-time): Defined with `defun-maybe'.
	(wl-biff-timer-name): New variable.

	* wl-summary.el (wl-summary-mode): Show biff in modeline.

	* wl-nemacs.el (wl-draft-overload-functions): Show biff in modeline.
	(wl-plugged-init-icons, wl-folder-init-icons): Removed.

	* wl-mule.el (wl-draft-overload-functions): Show biff in modeline.
	(wl-plugged-init-icons, wl-folder-init-icons): Removed.

	* wl-folder.el (wl-make-plugged-alist): Call `wl-biff-init-icons'.
	(TopLevel): Bind `wl-biff-init-icons', `wl-plugged-init-icons' and
	`wl-folder-init-icons' to `ignore' if they are not available.
	(wl-folder-mode): Show biff in modeline.

	* wl-e21.el (wl-draft-overload-functions): Show biff in modeline.
	(wl-biff-init-icons): New function.
	(wl-plugged-init-icons): Don't make too much keymaps.
	(wl-biff-nomail-image, wl-biff-mail-image): New variables.

2000-09-15  OKAZAKI Tetsurou  <okazaki@be.to>

	* wl-vars.el (wl-strict-diff-folders): Customization Type
	and doc fix.  Define as a list of regular expressions for
	folders or nil.
	* wl-folder.el (wl-folder-check-one-entity): Use
	`wl-string-match-member' instead of `wl-string-member' for
	`wl-strict-diff-folders'.

2000-09-14  Katsumi Yamaoka    <yamaoka@jpl.org>

	* wl-xmas.el (wl-xmas-highlight-folder-group-line): New function.
	(wl-highlight-folder-current-line): Use it; new implementation.
	(wl-xmas-setup-draft-toolbar, wl-xmas-setup-message-toolbar,
	wl-xmas-setup-summary-toolbar, wl-xmas-setup-folder-toolbar): Use
	`defsubst' instead of `defun'.

	* wl-vars.el (wl-highlight-folder-by-numbers): Renamed from
	`wl-highlight-group-folder-by-numbers'; made it can also be a
	number.  See info for more details.

	* wl-summary.el: Bind `wl-xmas-setup-summary' when XEmacs is not
	running.

	* wl-nemacs.el (wl-xmas-setup-*, wl-delete-all-overlays): No need
	to bind them.

	* wl-mule.el (wl-xmas-setup-*): No need to bind them.
	(wl-highlight-folder-current-line): New implementation.

	* wl-highlight.el (wl-highlight-folder-group-line): New
	implementation.
	(wl-delete-all-overlays): Rewrite as a marco.
	(TopLevel): Require `wl-e21' when Emacs 21 is running.

	* wl-folder.el: Bind `wl-xmas-setup-folder' when XEmacs is not
	running.
	(wl-folder-*-glyph): No need to bind them.

	* wl-e21.el (wl-e21-highlight-folder-group-line): Renamed from
	`wl-e21-highlight-folder-group-icon'; rewrite.
	(wl-e21-setup-draft-toolbar, wl-e21-setup-message-toolbar): Use
	`defsubst' instead of `defun'.
	(wl-folder-mode-map): Bind it when compiling.

2000-09-13  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl.el (wl): Initialize plug-related settings before `wl-init'.

	* wl-draft.el (wl-draft): funcall `wl-fcc' if it is a function.

2000-09-13  Katsumi Yamaoka    <yamaoka@jpl.org>

	* wl-folder.el (wl-folder-entity-assign-id): Undo the last change.

2000-09-11  Katsumi Yamaoka    <yamaoka@jpl.org>

	* wl-e21.el (wl-e21-highlight-folder-group-icon): New function.
	(wl-highlight-folder-current-line): Use it.

	* wl-folder.el (wl-folder-entity-assign-id): Don't put text props
	in `id-name'.

2000-09-08  Katsumi Yamaoka    <yamaoka@jpl.org>

	* wl.el: Require `wl-e21' when Emacs 21 is running.

	* wl-vars.el (wl-highlight-folder-with-icon): Activate it by
	default when Emacs 21 is running.
	(wl-use-highlight-mouse-line): Ditto.
	(wl-on-emacs21): New constant.
	(wl-on-emacs20): Removed.

	* wl-summary.el (wl-summary-mode): Call `wl-e21-setup-summary' when
	Emacs 21 is running.

	* wl-folder.el (wl-folder-mode): Call `wl-e21-setup-folder' when
	Emacs 21 is running.

	* wl-e21.el: New file.

2000-09-08   Daiki Ueno  <ueno@unixuser.org>

	* wl.el (wl-plugged-init): Refer `wl-plug-state-indicator-on' indirectly.
	(wl-toggle-plugged): Ditto.
	(wl-plugged-toggle): Ditto.
	(wl-plugged-toggle-all): Ditto.

	* wl-vars.el (wl-plug-state-indicator): Refer
	`wl-plug-state-indicator-on' indirectly.

2000-08-31  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-summary.el (wl-summary-sync-update3): Call `elmo-commit'.
	Call `wl-folder-confirm-existence'.

	* wl-folder.el (wl-folder-confirm-existence): Added optional
	argument `force'.

2000-08-30  OKAZAKI Tetsurou  <okazaki@be.to>

	* wl-summary.el (wl-summary-refile-subr): Assume
	`copy-or-refile' as symbol.
	(wl-summary-refile): Follow up above change.
	(wl-summary-copy): Ditto.  Doc fix.

2000-08-29  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-summary.el (wl-summary-pick): Don't bind
	`elmo-search-mime-charset'.

	* wl-vars.el (wl-highlight-message-header-button-alist): Define
	default using old backquote style.
	(wl-search-mime-charset): Abolished.

	* wl-highlight.el (wl-highlight-headers):
	Call `point' after `re-search-forward'(for Nemacs).

	* wl-summary.el (wl-summary-msgdb-load-async): Follow up the changes
	for elmo-imap4.el.

2000-08-29   Daiki Ueno  <ueno@unixuser.org>

	* wl-message.el (wl-mmelmo-message-redisplay): Bind
	`wl-message-ignored-field-list' instead of
	`mime-view-ignored-field-list'.

	* wl-folder.el (wl-folder-goto-top-of-current-folder):Simplified.
	Add interactive spec.
	(wl-folder-goto-bottom-of-current-folder): Ditto.
	(wl-folder-mode-map): Bind them.

	* wl-vars.el (wl-message-ignored-field-list): New variable.
	(wl-message-visible-field-list): New variable.

	* wl-mime.el (wl-mime-header-presentation-method): New function.
	(wl-mime-setup): Set header-presentation-method.

2000-08-28   Daiki Ueno  <ueno@unixuser.org>

	* wl-nemacs.el (wl-draft-overload-functions): Set
	`mode-line-buffer-identification' instead of using
	`wl-make-modeline'.

	* wl.el (wl-plugged-mode): Set `mode-line-buffer-identification'
	instead	of using `wl-make-modeline'.

	* wl-xmas.el (wl-plugged-init-icons): Set up
	`wl-plug-state-indicator-on' and `wl-plug-state-indicator-off'.
	(wl-make-modeline): Abolish.
	(wl-draft-overload-functions): Set
	`mode-line-buffer-identification' instead of using
	`wl-make-modeline'.

	* wl-util.el (wl-make-modeline-subr): Abolish.
	(wl-mode-line-buffer-identification): New alias.

	* wl-summary.el (wl-summary-buffer-folder-indicator): New.
	(wl-summary-make-modeline): Abolish.
	(wl-summary-buffer-set-folder): Set
	`wl-summary-buffer-folder-indicator'.
	(wl-summary-mode): Set `mode-line-buffer-identification' instead
	of using `wl-make-modeline'.
	(wl-summary-switch-to-clone-buffer): Don't set
	`mode-line-buffer-identification'.
	(wl-summary-goto-folder-subr): Ditto.

	* wl-mule.el (wl-draft-overload-functions): Set
	`mode-line-buffer-identification' instead of using
	`wl-make-modeline'.

	* wl-folder.el (wl-folder-mode): Set
	`mode-line-buffer-identification' instead of using
	`wl-make-modeline'.
	(wl-folder): Don't set `mode-line-buffer-identification'.

2000-08-28  OKAZAKI Tetsurou  <okazaki@be.to>

	* wl-refile.el (wl-refile-learn): Simplified.  Use `memq'
	instead of `member' for `wl-refile-guess-func-list' look-ups.
	Use `cons' instead of `add-to-list' to update `wl-refile-alist'.

2000-08-28   Daiki Ueno  <ueno@unixuser.org>

	* wl-mime.el (wl-message-button-dispatcher-internal): Rename from
	`wl-message-button-dispatcher'.

	* tm-wl.el (wl-message-button-dispatcher-internal): Ditto.

	* wl-message.el (wl-message-button-dispatcher): Use it.

	* wl-vars.el (wl-highlight-message-header-button-alist): Add
	"In-Reply-To".

	* wl-highlight.el (wl-highlight-message-add-buttons-to-header):
	Bind `case-fold-search' to t.

2000-08-28   Daiki Ueno  <ueno@unixuser.org>

	* wl-xmas.el (wl-message-overload-functions): Initialize
	`wl-message-button-map'.

	* wl-mule.el (wl-message-overload-functions): Initialize
	`wl-message-button-map'.

	* wl-vars.el (wl-highlight-message-header-button-alist): New.

	* wl-message.el (wl-message-button-map): New keymap.
	(wl-message-add-button): New function.
	(wl-message-button-dispatcher): New function.
	(wl-message-button-refer-article): New function.

	* wl-highlight.el
	(wl-highlight-message-add-buttons-to-header): New function.
	(wl-highlight-headers): Use it.

2000-08-28   Daiki Ueno  <ueno@unixuser.org>

	* wl-summary.el (wl-summary-default-from): Use
	`wl-address-get-petname-1'.
	(wl-summary-simple-from): Ditto.

	* wl-address.el (wl-address-get-petname-1): New inline function.
	(wl-address-get-petname): Use it.

2000-08-27   Daiki Ueno  <ueno@unixuser.org>

	* wl-summary.el (wl-summary-default-from): Return full-name part
	from the address if no petname was found.
	(wl-summary-simple-from): Ditto.

	* wl-address.el (wl-address-get-petname): Return nil if no petname
	associated with the address was found.

2000-08-23  Masahiro MURATA  <muse@ba2.so-net.ne.jp>

	* wl-folder.el (wl-folder-open-all): Remove progress gauge when
	display is finished.

2000-08-23  TAKAHASHI Kaoru  <kaoru@kaisei.org>

	* wl-folder.el (wl-folder-confirm-existence): Fixed typo in
	`elmo-folder-exists-p' argument.

2000-08-23   Daiki Ueno  <ueno@unixuser.org>

	* wl-folder.el (wl-folder-confirm-existence): Check existence of
	the folder.

2000-08-23  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-summary.el (wl-summary-msgdb-load-async): Rewrite.

	* wl-draft.el (wl-draft-send-mail-with-pop-before-smtp):
	Use `elmo-pop3-get-session' instead of `elmo-pop3-get-connection'.

2000-08-22   Daiki Ueno  <ueno@unixuser.org>

	* wl-folder.el (wl-folder-create-subr): New function.
	(wl-folder-confirm-existence): Use it.
	(wl-folder-check-one-entity): Use it.
	Check the error symbol is derived from 'elmo-open-error.

	* wl-summary.el (wl-summary-read-folder): Don't pass the argument
	`ignore-error'.

2000-08-21  TAKAHASHI Kaoru  <kaoru@kaisei.org>

	* wl-util.el (toplevel): Add (eval-when-compile (require
	'elmo-util)).  (Maybe `provide' is typo.)

2000-08-21  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-util.el (toplevel): Removed (provide 'elmo-util).
	(I don't know why this was needed.)

	* wl-summary.el (wl-summary-jump-to-msg-by-message-id-via-nntp):
	Follow up changes for stream-type.

	* wl-draft.el (wl-draft-send-mail-with-pop-before-smtp): Ditto.
	(wl-draft-elmo-nntp-send): Ditto.

	* wl-vars.el (wl-pop-before-smtp-stream-type): New variable.
	(wl-nntp-posting-stream-type): Ditto.
	(wl-pop-before-smtp-ssl): Abolished.
	(wl-nntp-posting-ssl): Ditto.

	* wl-address.el (wl-address-quote-specials): New function.
	(wl-address-make-completion-list): Use `wl-address-quote-specials'.

	* wl-draft.el (wl-draft-reply): Ditto.

2000-08-16  TAKAHASHI Kaoru  <kaoru@kaisei.org>

	* wl-draft.el (wl-user-agent-compose): Add (require 'wl) for
	use function `wl-string-match-assoc'.

2000-08-10  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-vars.el (wl-draft-remove-group-list-contents): New user option.

	* wl-draft.el (wl-draft-deduce-address-list): New function.
	(wl-draft-parse-mailbox-list): Ditto.
	(wl-draft-send-mail-with-smtp): Use `wl-draft-deduce-address-list'
	instead of `smtp-deduce-address-list'.
	(wl-draft-on-field-p): Follow group list.

	* wl-address.el (wl-address-concat-token): New function.
	(wl-address-string-without-group-list-contents): Ditto.
	(wl-complete-field-body): Fixed problem of completion
	by japanese petname.
	(wl-address-make-completion-list): Rewrite.

2000-08-11  Taro Kawagishi <taro.kawagishi@nokia.com>

	* wl-address.el (wl-address-make-completion-list): Completion by
	petname.
	(wl-complete-field-body): Likewise.

2000-08-08  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-draft.el (wl-draft-reply): Fixed problem when to or cc
	contains invalid address syntax.

2000-07-26  Kenichi OKADA  <okada@opaopa.org>

	* wl-folder.el (wl-folder-check-entity-async): Use
	`elmo-nntp-spec-hostname'.

2000-08-02  OKAZAKI Tetsurou  <okazaki@be.to>

	* wl-summary.el (wl-summary-msgdb-load-async): Use
	`elmo-imap4-mailbox' for `elmo-imap4-send-command'.

2000-07-31  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-draft.el (wl-draft-reply): Set argument
	`content-transfer-encoding' as nil.

2000-07-26  Takaaki MORIYAMA <taka@airlab.cs.ritsumei.ac.jp>

	* wl-refile.el (wl-refile-learn): Move hit element to the top of
	`wl-refile-alist'.

2000-07-26  Kenichi OKADA  <okada@opaopa.org>

	* wl-draft.el (wl-draft): Added argument `content-transfer-encoding'.
	(wl-draft-edit-string): Ditto.
	(wl-draft-forward): Ditto.
	* wl-summary.el (wl-summary-write): Ditto.

2000-07-24  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-summary.el (wl-summary-sync-update3): Call
	`wl-summary-buffer-number-column-detect'.
	(wl-summary-buffer-number-column-detect): Search from point-min.

2000-07-19  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-draft.el (wl-draft-reply): Fixed problem when mail-followup-to
	contains an address which is not included in original to or cc.

2000-07-19  Kenichi OKADA  <okada@opaopa.org>

	* wl-summary.el (wl-summary-target-mark-uudecode): Error when
	begin-line does not exist.
	* wl-message.el (wl-message-uu-substring): Ditto.

2000-07-18  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-summary.el (wl-summary-mode): Call `kill-all-local-variables' to
	clear local variables.
	(wl-summary-exit): Call `elmo-commit'.
	(wl-summary-switch-to-clone-buffer): Call
	`wl-summary-buffer-set-folder' after `wl-summary-mode'.
	(wl-summary-goto-folder-subr): Ditto.

	* wl-vars.el (wl-folder-sync-range-alist): Changed default value for
	POP folder.

2000-07-17  Yuuichi Teranishi  <teranisi@gohome.org>

	* tm-wl.el, wl-address.el, wl-demo.el, wl-dnd.el, wl-draft.el,
	wl-draft.el.orig, wl-expire.el, wl-fldmgr.el, wl-folder.el,
	wl-highlight.el, wl-message.el, wl-mime.el, wl-mule.el, wl-nemacs.el,
	wl-refile.el, wl-refile.el.orig, wl-score.el, wl-summary.el,
	wl-summary.el.orig, wl-template.el, wl-thread.el, wl-util.el,
	wl-vars.el, wl-xmas.el, wl.el (toplevel): Deleted time-stamp line.

	* wl-draft.el (wl-draft-reply): Bind `eword-lexical-analyzer' locally.

2000-07-12  Hironori Fukuchi <nory@valis.co.jp>

	* wl-summary.el (wl-summary-search-by-subject):
	Search parent message from the latest one.

2000-07-13  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-draft.el (wl-draft-reply):	Insert address with full-name.
	(Thanks to MAKINO Takashi <makino@cyber.office.ne.jp>)

	* wl-vars.el (wl-draft-reply-use-address-with-full-name):
	New user option.

	* wl-summary.el (wl-summary-sync-update3): Use `elmo-list-bigger-diff'
	if elmo-nntp-use-killed-list is nil.
	Use `elmo-msgdb-append-to-killed-list'.
	(Append numbers confirmed as disappeared to the killed list.)
	(wl-summary-confirm-appends): Don't display negative number.

2000-07-07  Kenichi OKADA  <okada@opaopa.org>

	* wl-summary.el (TopLevel): Define-maybe `ps-print-preprint'.

2000-07-11  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-summary.el (wl-summary-sync): Call `elmo-clear-killed' when
	range is `all'.
	(wl-summary-sync-update3): Use `elmo-list-diff' instead of
	`elmo-list-bigger-diff'.

2000-07-04  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-summary.el (wl-summary-buffer-exit-func):
	New buffer local variable.
	(wl-summary-exit): Call `wl-summary-buffer-exit-func' if non-nil.

2000-07-10  Katsumi Yamaoka    <yamaoka@jpl.org>

	* wl-demo.el (wl-demo): Fix the last change.

2000-07-07  Katsumi Yamaoka    <yamaoka@jpl.org>

	* wl-demo.el (wl-demo): Don't use `eval'.

2000-07-07  Kenichi OKADA  <okada@opaopa.org>

	* wl-summary.el (wl-summary-buffer-thread-modified):
	New buffer-local variable.
	(wl-summary-set-thread-modified): New function.
	(wl-summary-thread-modified-p): New function.
	(wl-summary-save-status): Use function `wl-summary-thread-modified-p'.
	(wl-summary-yank-saved-message): Use function
	`wl-summary-set-thread-modified'
	(wl-summary-switch-to-clone-buffer): Add
	`wl-summary-buffer-thread-modified'.

	* wl-vars.el (wl-summary-buffer-message-saved-hook): New variable.
	(wl-summary-buffer-mark-saved-hook): Ditto.
	* wl-summary.el (wl-summary-msgdb-save): New hook
	`wl-summary-buffer-message-saved-hook' and
	`wl-summary-buffer-mark-saved-hook'.

2000-07-04  Katsumi Yamaoka    <yamaoka@jpl.org>

	* wl-demo.el (wl-demo): Simplified `fringe' face manipulation.

2000-07-04  Katsumi Yamaoka    <yamaoka@jpl.org>

	* wl-demo.el (wl-demo): Make `kill-buffer-hook' buffer-local;
	don't hide scroll bars under FSF Emacsen because it may incur an
	undesirable redrawing.

2000-07-04  Kenichi OKADA  <okada@opaopa.org>

	* wl-draft.el (wl-draft-edit-string): Call
	`wl-draft-reedit-hook' instead of `wl-mail-setup-hook'.

2000-07-03  Katsumi Yamaoka    <yamaoka@jpl.org>

	* wl-demo.el (wl-demo): Hide scroll bars, etc. first.

2000-07-01  OKAZAKI Tetsurou  <okazaki@be.to>

	* wl-summary.el (wl-summary-msgdb-load-async): Call
	`elmo-imap4-spec-mailbox' instead of `elmo-imap4-spec-folder'.

2000-06-30  Katsumi Yamaoka    <yamaoka@jpl.org>

	* wl-demo.el (wl-demo): Don't show scroll bars, gutter tabs or
	fringes in demo buffer; center bitmap logo correctly even if old
	Mule is used.

2000-06-27  MAKINO Takashi <makino@cyber.office.ne.jp>

	* wl.el (wl-save-status): Call `wl-refile-alist-save' without argument.

	* wl-refile.el (wl-refile-subject-alist): New variable.
	(wl-refile-subject-alist-file-name): Ditto.
	(wl-refile-alist-setup): Rewrite.
	(wl-refile-alist-save): Use `elmo-object-save'.
	Eliminated arguments.
	(wl-refile-learn): Check `wl-refile-guess-func-list'.
	(wl-refile-guess-by-subject): New function.
	(wl-refile-guess-func-list): Added it.

2000-06-29  Katsumi Yamaoka    <yamaoka@jpl.org>

	* wl-demo.el (wl-demo-with-temp-file-buffer): New macro.
	(wl-logo-bitmap, wl-logo-xbm, wl-logo-xpm): Use it.

2000-06-28  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-summary.el (wl-summary-buffer-prev-folder-func):
	New buffer-local variable.
	(wl-summary-buffer-next-folder-func): Ditto.
	(wl-summary-down): Call `wl-summary-buffer-next-folder-func'
	if non-nil.
	(wl-summary-up): Call `wl-summary-buffer-prev-folder-func'
	if non-nil.
	(wl-summary-next): Call `wl-summary-buffer-next-folder-func'
	if non-nil.
	(wl-summary-prev): Call `wl-summary-buffer-prev-folder-func'
	if non-nil.

2000-06-23  Katsumi Yamaoka    <yamaoka@jpl.org>

	* wl-demo.el (wl-demo): Don't set the value of `fill-column'
	permanently in the demo buffer.

2000-06-22  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-mime.el (wl-summary-burst-subr): Use `mime-entity-body' and
	`mime-entity-fetch-field'.

	* wl.el (wl-exit): Delete plugged buffer.

	* wl-xmas.el (wl-draft-overload-menubar): Override menubar only when
	XEmacs has menubar feature.

2000-06-19  Katsumi Yamaoka    <yamaoka@jpl.org>

	* wl-demo.el (wl-demo): Don't use `end-of-line' with arg 0.  It
	cannot arrive at the beginning of the buffer under old Emacsen.

2000-06-19  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-address.el (wl-address-ldap-search):
	Call `ldap-search-entries' with `withdn' argument t.
	(wl-complete-field-body): Bind completion-ignore-case as t.
	Clear ldap search hash when it was sole completion.
	Use elmo-string for pattern string.
	(wl-ldap-alias-safe-string): Eliminated needless let.

2000-06-16  Shun-ichi GOTO <gotoh@taiyo.co.jp>

	* wl-address.el (wl-ldap-alias-dn-level): New variable.
	(wl-ldap-alias-sep): New constant.
	(wl-ldap-search-attribute-type-list): Ditto.
	(wl-ldap-get-value): New function.
	(wl-ldap-make-filter): Ditto.
	(wl-ldap-make-matched-value-list): Ditto.
	(wl-ldap-alias-safe-string): Ditto.
	(wl-ldap-register-dn-string): Ditto.
	(wl-address-ldap-search): Rewrite.

2000-06-17  Masahiro MURATA  <muse@ba2.so-net.ne.jp>

	* wl-thread.el (wl-thread-delete-msgs): Fixed problem when closed
	thread is deleted.
	(wl-thread-delete-line-from-buffer): Ditto.
	(wl-thread-get-exist-children): New function.

2000-06-15  Katsumi Yamaoka    <yamaoka@jpl.org>

	* wl-demo.el (wl-demo): Made it to select various image types.
	(wl-logo-bitmap, wl-logo-xbm, wl-logo-xpm): Renamed and divided
	from `wl-title-logo'.
	(wl-logo-ascii): New variable.
	(TopLevel): Require `wl-highlight'; no need to require `wl-xmas'.
	(wl-demo-copyright-notice): New constant.

	* wl-vars.el (wl-demo-display-logo): Made it can be a image type.

2000-06-15  TAKAHASHI Kaoru  <kaoru@kaisei.org>

	* wl-vars.el (wl-summary-target-above): Renamed from
	wl-summary-temp-above.
	* wl-score.el (wl-score-get-score-alist): Use it.
	(wl-summary-score-update-all-lines): Use it.
	* wl-summary.el: Ditto. (make-variable-buffer-local).

2000-06-15  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-vars.el (wl-ldap-port): New user option.

	* wl-address.el (wl-address-ldap-search): Renamed from wl-ldap-search.
	Rewite whole implementation.
	(wl-complete-field-body): Fixed.

2000-06-14  Yuuichi Teranishi  <teranisi@quickhack.net>

	* wl-address.el (wl-ldap-search-internal): Renamed to `wl-ldap-search'.
	Choose implementation at compile time.

2000-06-13  Takeshi Chiba <chiba@d3.bs1.fc.nec.co.jp>

	* wl-address.el (wl-ldap-search-internal): New function.
	(wl-complete-field-to): Use it.

2000-06-12  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-address.el (wl-ldap-search): Use `with-temp-buffer'.
	Use `let' instead of `let*'.
	Require 'wl-vars.

	* wl-vars.el (wl-ldap-server): Moved from wl-address.el.
	Define as defcustom.
	(wl-ldap-base): Ditto.
	(wl-use-ldap): Ditto.

2000-06-09  Takeshi Chiba <chiba@d3.bs1.fc.nec.co.jp>

	* wl-address.el (wl-ldap-search): New function.
	(wl-complete-field-body): Use `wl-ldap-search'.
	(wl-ldap-server): New variable.
	(wl-ldap-base): Ditto.
	(wl-use-ldap): Ditto.

2000-06-08  OKAZAKI Tetsurou  <okazaki@be.to>

	* wl-score.el (wl-score-guess-like-gnus): Use `elmo-string'
	(Pointed out by Mito <mit@nines.nec.co.jp>).
	* wl-summary.el (wl-summary-redisplay-no-mime): Update
	buffer-local variables like `wl-summary-redisplay-internal'.
	(wl-summary-redisplay-all-header): Likewise.  Update
	Summary view too.

2000-06-05  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-summary.el (wl-summary-jump-to-parent-message):
	Consider prefix argument.

	* wl-thread.el (wl-thread-update-line-msgs): Fixed problem
	when closed thread is deleted.

2000-05-31  Yasushi ABE <yasushi@stbbs.net>

	* wl-summary.el (wl-summary-jump-to-parent-message):
	Consider thread modification.

2000-06-03  OKAZAKI Tetsurou  <okazaki@be.to>

	* wl-message.el (wl-message-normal-get-original-buffer): Use
	`save-excursion'.

	* wl-vars.el (wl-smtp-posting-server): Customization Type fix.
	(wl-summary-showto-folder-regexp): Ditto.

2000-05-31  OKAZAKI Tetsurou  <okazaki@be.to>

	* wl-util.el (wl-delete-alist): Doc fix.
	(wl-delete-associations): New function.
	(wl-inverse-alist): New function.
	* wl-summary.el (wl-summary-exec-subr): Rename parameters.
	Split temporary variables. Use `wl-delete-associations'
	and `wl-inverse-alist'.
	(wl-summary-delete-copy-marks-on-buffer): Rename the parameter.

2000-05-30  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-folder.el (wl-folder-prefetch-entity):
	Execute prefetching if new count is unknown.

2000-05-27  Masahiro MURATA  <muse@ba2.so-net.ne.jp>

	* wl-vars.el (wl-summary-insert-headers-hook): New variable.

	* wl-thread.el (wl-thread-cleanup-symbols): If entity is exists,
	delete entity.
	(wl-thread-set-parent): If insert as top, set linked as nil.

	* wl-summary.el (wl-summary-delete-messages-on-buffer): Call
	`wl-thread-cleanup-symbols' when view mode is thread.

2000-05-26  OKAZAKI Tetsurou  <okazaki@be.to>

	* wl-folder.el (wl-folder-create-folder-entity): Use
	with-current-buffer.
	(wl-local-folder-init): Call set-buffer to make sure we are in
	the Folder buffer. Don't touch buffer-local variables here.
	(wl-folder-mode): Initialize buffer-local variables here.

	* wl-folder.el (wl-folder-get-path): Use let instead of let*.
	(wl-folder-entity-assign-id): Ditto.
	(wl-folder-create-entity-hashtb): Ditto.
	(wl-local-folder-init): Ditto.
	(wl-folder-create-group-alist): Initialize `cur-alist' with let.

2000-05-24  TAKAHASHI Kaoru  <kaoru@kaisei.org>

	* wl-summary.el (wl-summary-default-from): Fix probrem when
	std11-extract-address-components return (nil "foo@bar").

2000-05-24  OKAZAKI Tetsurou  <okazaki@be.to>

	* wl-draft.el (wl-draft-clone-local-variables):
	Remove redundant `setq'.

2000-05-19  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-draft.el (wl-draft-yank-from-mail-reply-buffer):
	Bind wl-highlight-x-face-func as nil while highlighting header.

2000-05-21  OKAZAKI Tetsurou  <okazaki@be.to>

	* wl-folder.el (wl-folder-buffer-cur-path): Make buffer-local.

2000-05-21  Masahiro MURATA  <muse@ba2.so-net.ne.jp>

	* wl-summary.el (wl-summary-switch-to-clone-buffer): Remove
	elmo-msgdb-overview-hashtb from copy-variables.
	(wl-summary-refile-subr): Use `elmo-msgdb-overview-get-entity'
	instead of `elmo-msgdb-overview-get-entity-by-number'.
	(wl-summary-auto-refile): Ditto.

	* wl-thread.el (wl-thread-update-line-on-buffer-sub): Use
	`elmo-msgdb-overview-get-entity' instead of
	`elmo-msgdb-search-overview-entity'.  Use
	`elmo-msgdb-overview-get-entity' instead of
	`elmo-msgdb-overview-get-entity-by-number'.
	(wl-thread-insert-entity-sub): Ditto.
	(wl-thread-insert-message): Ditto.

	* wl-message.el (wl-mmelmo-message-redisplay): Change argument of
	`elmo-msgdb-overview-get-entity'.
	(wl-normal-message-redisplay): Ditto.

2000-05-20  Masahiro MURATA  <muse@ba2.so-net.ne.jp>

	* wl-thread.el (wl-thread-cleanup-symbols): Fix delete entity from
	`wl-thread-entities'.
	(wl-thread-delete-message): Fix remove top message from
	`wl-thread-entity-list'.

	* wl-summary.el (wl-summary-delete-messages-on-buffer): Don't use
	wl-append(nconc), because update-list is broken on Meadow.

	* wl-summary.el (wl-summary-insert-thread-entity): Changed delayed
	updating process.
	(wl-summary-rescan): Ditto.
	(wl-summary-sync-update3): Ditto.
	* wl-thread.el (wl-thread-set-parent): Renamed from
	`wl-summary-set-parent'.
	(wl-thread-insert-message): Updating buffer faster.
	(wl-thread-delete-message): Updating buffer faster.

	* wl-score.el (wl-summary-score-update-all-lines): Changed
	interval for display progress gauge.

2000-05-19  TAKAHASHI Kaoru  <kaoru@kaisei.org>

	* wl-vars.el (wl-summary-always-sticky-folder-list): `t' means all
	folder always-sticky.
	* wl-summary.el (wl-summary-always-sticky-folder-p): defun instead of
	defmacro.

2000-05-18  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-vars.el (wl-draft-add-references): New user option.

	* wl-draft.el (wl-draft-add-references): New function.
	(wl-draft-yank-from-mail-reply-buffer): Use it.
	(wl-draft-insert-current-message): Bind `wl-draft-add-references'
	as nil.

2000-05-12  Masahiro MURATA  <muse@ba2.so-net.ne.jp>

	* wl-thread.el (wl-thread-update-line-msgs): Called
	`wl-thread-update-line-on-buffer-sub'.
	(wl-thread-update-line-on-buffer): Delete routine of inserting
	thread.
	(wl-thread-update-line-on-buffer-sub): Routine of inserting thread
	moved from `wl-thread-update-line-on-buffer'.
	Add threshold for displaying progress gauge.
	* wl-summary.el (wl-summary-delete-messages-on-buffer): Change
	argument of `wl-thread-update-line-msgs'.
	Add threshold for displaying progress gauge.
	* wl-folder.el:
	Add threshold for displaying progress gauge.
	* wl-score.el: Ditto.

	* wl-expire.el (wl-summary-expire): Display deleting info.

2000-05-12  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-thread.el (wl-thread-update-line-msgs): Added optional argument
	`no-msg'.
	* wl-summary.el (wl-summary-delete-messages-on-buffer): Set no-msg
	argument of `wl-thread-update-line-msgs'.
	(wl-summary-set-parent): Added optional argument `parent-number'.
	(wl-summary-buffer-saved-message): New buffer local variable.
	(wl-summary-save-current-message): New command.
	(wl-summary-yank-saved-message): Ditto.
	(wl-summary-mode-map): Added key binding for
	`wl-summary-save-current-message' (\ew) and
	`wl-summary-yank-saved-message' (\C-y).
	(wl-summary-yank-saved-message): Inhibit setting itself as a parent.

2000-05-11  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-summary.el (wl-summary-mode-map): Added key binding for
	`wl-summary-set-parent' (ts).

2000-05-10  Masahiro MURATA  <muse@ba2.so-net.ne.jp>

	* wl-summary.el (wl-summary-insert-thread-entity): Search same
	subject faster. If thread number is reverse, delayed updating
	thread.
	(wl-summary-search-by-subject): Ditto.
	(wl-summary-put-alike): Ditto.
	(wl-summary-get-alike): Ditto.
	(wl-summary-insert-headers): Insert header of all overview in
	buffer.
	(wl-summary-rescan): Delayed updating thread. Kill search subject
	buffer for wl-summary-search-by-subject.
	(wl-summary-sync-update3): Ditto.
	(wl-summary-exit): Ditto.
	(wl-summary-goto-bottom-of-current-thread): Change for linked
	thread.
	(wl-summary-overview-create-summary-line): Change line for linked
	thread.

	* wl-summary.el (wl-summary-update-thread): Use
	wl-thread-maybe-get-children-num.
	(wl-summary-set-parent): If change parent, move sub thread.
	(wl-summary-redisplay-internal): Add horizontal recenter.
	(wl-summary-redisplay-no-mime): Add horizontal recenter.

	* wl-thread.el (wl-thread-entity-get-linked): New function.
	(wl-thread-entity-set-linked): New function.
	(wl-thread-create-entity): Add linked element.
	(wl-thread-entity-insert-as-top): Use wl-append.
	(wl-thread-maybe-get-children-num): If closing thread, return
	children msgs.
	(wl-thread-update-line-msgs): Displaying progress message.
	(wl-thread-update-line-on-buffer-sub): Use
	wl-thread-maybe-get-children-num.
	(wl-thread-update-line-on-buffer): If update line is not exists,
	insert thread.
	(wl-thread-delete-message): If delete top msg of thread, search
	parent by subject.
	(wl-thread-insert-entity): Use
	wl-thread-maybe-get-children-num.

	* wl-highlight.el (wl-highlight-summary-current-line): change
	sregexp for linked thread.
	* wl-util.el (wl-count-lines): Count lines.
	(wl-horizontal-recenter): horizontal recenter.
	* wl-score.el (wl-score-put-alike): Use wl-count-lines
	(wl-score-get-alike): Ditto.
	* wl-vars.el (wl-summary-search-parent-by-subject-regexp): Changed.
	(wl-subject-length-limit): New variable.
	(wl-highlight-thread-indent-string-regexp): Changed for linked
	thread.

2000-05-10  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-vars.el (wl-summary-search-parent-by-subject-regexp):
	New variable (revival).
	* wl-summary.el (wl-summary-insert-thread-entity): Search parent
	by subject matching if there's no in-reply-to nor references field
	(revival).


2000-05-10  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-thread.el (wl-thread-close-all): Fixed typo in display-progress
	message.

2000-05-09  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-summary.el (wl-summary-reply): Return t if there was a
	message at cursor point.
	Added unwind-protect.
	(wl-summary-reply-with-citation): Cite only when wl-summary-reply
	returns t.
	(wl-summary-cancel-message): Do nothing when there's no message at
	cursor point.
	(wl-summary-forward): Ditto.
	(wl-summary-jump-to-parent-message): Ditto.
	(wl-summary-reedit): Ditto.
	(wl-summary-edit-addresses): Ditto.
	(wl-summary-pipe-message): Ditto.
	(wl-summary-print-message-with-ps-print): Ditto.
	(wl-summary-print-message): Ditto.
	(wl-summary-mark-as-important): Ditto.
	(wl-summary-mark-as-unread): Ditto.

	* wl-summary.el (wl-summary-reply): Cause an error when there's no
	message at cursor point.
	(wl-summary-reply-with-citation): Remove unwind-protect.

	* wl-summary.el (wl-summary-insert-thread-entity): Eliminated
	subject searching feature.
	* wl-vars.el (wl-summary-search-parent-by-subject-regexp):
	Eliminated.

2000-04-28  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-vars.el (wl-summary-search-parent-by-subject-regexp):
	New variable.
	* wl-summary.el (wl-summary-insert-thread-entity): Search parent
	by subject matching if there's no in-reply-to nor references field.

	* wl-summary.el (wl-summary-set-parent): New command (No key binding).

	* wl-folder.el (wl-folder-insert-entity): Remove progress gauge
	when display is finished.
	(wl-folder-open-all): Ditto.
	(wl-folder-update-access-group): Ditto.
	* wl-summary.el (wl-summary-delete-messages-on-buffer): Ditto.
	* wl-thread.el (wl-thread-close-all): Ditto.

	* wl-summary.el (wl-summary-delete-messages-on-buffer): Remove
	progress gauge only when it was displayed.
	* wl-folder.el (wl-folder-insert-entity): Ditto.

2000-04-26  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-summary.el (wl-summary-incorporate): Enclose
	`wl-summary-sync-force-update' with save-excursion.

2000-04-21  Yuuichi Teranishi  <teranisi@elmo.dq.isl.ntt.co.jp>

	* wl-summary.el (wl-summary-prefetch-region):
	Pass current cursor point to `pos-visible-in-window-p' after
	moving cursor to the started point.

2000-04-20  Katsumi Yamaoka    <yamaoka@jpl.org>

	* wl-vars.el (wl-ignored-forwarded-headers): New user option.

	* wl-draft.el (wl-draft-insert-current-message): Delete useless
	fields from the forwarding message.
	(wl-draft-yank-from-mail-reply-buffer): Allow the optional argument
	`ignored-fields'.

2000-04-20  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-mime.el (wl-message-request-partial):
	Eliminated argument `msgdb'.
	Don't pass `msgdb' argument to `elmo-read-msg-no-cache'.
	(wl-mime-combine-message/partial-pieces): Likewise.
	* tm-wl.el (wl-message-request-partial): Likewise.
	(wl-mime-combine-message/partial-pieces): Likewise.

2000-04-17  Yoshiki Hayashi  <yoshiki@xemacs.org>

	* wl-summary.el (wl-summary-sync-marks): Remove progress gauge
	when display is finished.

2000-04-17  HARAGUCHI Shuugou <haraguti@nd.net.fujitsu.co.jp>

	* wl-summary.el (wl-summary-goto-folder-subr):
	Fix problem when wl-summary-partial-highlight-above-lines is nil.

2000-04-18  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-summary.el (wl-summary-prefetch-region): Redisplay only
	when cursor point is visible.

2000-04-15  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-expire.el (wl-expire-archive-get-max-number):
	Don't use `file-name-directory'.

2000-04-14  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-expire.el (wl-expire-archive-get-max-number):
	Use `file-name-directory'.

2000-04-13  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-summary.el (wl-summary-sync-marks): Re-display progress
	only when there is progress.

2000-04-13  Mito <mit@nines.nec.co.jp>

	* wl-summary.el (wl-summary-sync-marks): Display progress.

2000-04-13  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-summary.el (wl-summary-move-cached-regex): Eliminated.
	(wl-summary-prev): Move cursor regardless of unread status.
	(wl-summary-next): Ditto.

2000-04-10  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-mime.el (wl-summary-burst-subr): Renamed from `wl-burst'.
	Added argument `target' and `number'.
	* tm-wl.el (wl-summary-burst-subr): New function.
	(wl-summary-burst): Use it.

2000-04-10  Mito <mit@nines.nec.co.jp>

	* wl-mime.el (wl-burst): New function.
	(wl-summary-burst): Use it.

2000-04-07  A. SAGATA <sagata@nttvdt.hil.ntt.co.jp>

	* wl-address.el (wl-address-petname-add-or-change): Use e-mail address
	as petname when there's no candidate.

2000-04-07  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-vars.el (wl-fldmgr-add-complete-with-current-folder-list):
	New variable.
	* wl-fldmgr.el (wl-fldmgr-add): Use it.

	* wl.el (wl-plugged-init): Flush queues if started with plugged status.

	* wl-folder.el (wl-folder-flush-queue): Flush operation queue too.

2000-04-05  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-refile.el (wl-refile-expand-newtext): Add `original' argument.
	Use substring of `original' instead of buffer-substring.
	(wl-refile-evaluate-rule):
	Set `original' argument of wl-refile-expand-newtext.

	* wl-summary.el
	(wl-summary-auto-refile-check-refile-rule-alist-subr,
	wl-summary-auto-refile-check-refile-rule-alist): Eliminated.
	(wl-summary-auto-refile): Check existence of destination folder just
	before marking.

2000-04-05  TAKAHASHI Kaoru  <kaoru@kaisei.org>

	* wl-refile.el (wl-refile-evaluate-rule): Fixed problem
	when wl-refile-get-field-value return nil.

2000-04-04   Daiki Ueno  <ueno@unixuser.org>

	* wl-refile.el
	(wl-refile-expand-newtext): New function imported from Gnus.
	(wl-refile-evaluate-rule): Use it.

2000-04-04  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-summary.el (wl-summary-print-destination):
	Duplicate folder string to avoid putting text-property on
	original string.

	* wl-refile.el (wl-refile-get-field-value): New function.
	(wl-refile-evaluate-rule): New function;
	Evaluate refile rule recursively.
	(wl-refile-guess-by-rule): Use wl-refile-evaluate-rule.
	* wl-summary.el (wl-summary-auto-refile-check-refile-rule-alist-subr):
	New function; Check existence of a target folder recursively.
	(wl-summary-auto-refile-check-refile-rule-alist):
	Use wl-summary-auto-refile-check-refile-rule-alist-subr.

2000-03-30  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-demo.el (wl-title-logo): Refer wl-icon-dir.

	* wl-folder.el (wl-create-folder-entity-from-buffer):
	Fixed problem when '}' character is contained in folder name.

	* wl-xmas.el (wl-make-modeline): Consider plugged status.

2000-03-29  Daiki Ueno <ueno@kiss.kake.info.waseda.ac.jp>

	* wl-fldmgr.el (wl-fldmgr-add-completion-hashtb): New variable.
	(wl-fldmgr-add-completion-all-completions):
	Use wl-fldmgr-add-completion-hashtb.

2000-03-28  Daiki Ueno <ueno@kiss.kake.info.waseda.ac.jp>

	* wl-fldmgr.el (wl-fldmgr-add-completion-all-completions,
	wl-fldmgr-add-completion-subr):	New functions.
	* wl-folder.el (wl-folder-completion-func): New variable.
	* wl-summary.el (wl-summary-read-folder):
	Use wl-folder-completion-func.

	* wl-refile.el: Eliminate throw & catch.

	* wl.el (wl-plugged-sending-queue-status): Fixed.

2000-03-27  Mikio Nakajima <minakaji@osaka.email.ne.jp>

	* wl-draft.el (wl-draft): Put category property on
	mail-header-separator.
